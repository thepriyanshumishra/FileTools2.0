function Pn(u){return u instanceof Int8Array||u instanceof Uint8Array||u instanceof Uint8ClampedArray}class hn{fileName;data;constructor(t,n){this.fileName=t,this.data=n}}const gn={XmlResourceFiles:{log:`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE logmap [
<!ELEMENT logmap (log)+>
<!ELEMENT log (#PCDATA)>
<!ATTLIST log events CDATA #IMPLIED>
<!ATTLIST log output CDATA #IMPLIED>
<!ATTLIST log filename CDATA #IMPLIED>
<!ATTLIST log generations CDATA #IMPLIED>
<!ATTLIST log limit CDATA #IMPLIED>
<!ATTLIST log format CDATA #IMPLIED>
]>
<logmap>
  <log events="None"/>
  <log output="Debug"/>
  <log filename="Magick-%g.log"/>
  <log generations="3"/>
  <log limit="2000"/>
  <log format="%t %r %u %v %d %c[%p]: %m/%f/%l/%d
  %e"/>
</logmap>
`,policy:`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE policymap [
<!ELEMENT policymap (policy)*>
<!ATTLIST policymap xmlns CDATA #FIXED "">
<!ELEMENT policy EMPTY>
<!ATTLIST policy xmlns CDATA #FIXED "">
<!ATTLIST policy domain NMTOKEN #REQUIRED>
<!ATTLIST policy name NMTOKEN #IMPLIED>
<!ATTLIST policy pattern CDATA #IMPLIED>
<!ATTLIST policy rights NMTOKEN #IMPLIED>
<!ATTLIST policy stealth NMTOKEN #IMPLIED>
<!ATTLIST policy value CDATA #IMPLIED>
]>
<policymap>
  <policy domain="cache" name="shared-secret" value="passphrase"/>
  <policy domain="coder" rights="none" pattern="EPHEMERAL" />
  <policy domain="coder" rights="none" pattern="MVG" />
  <policy domain="coder" rights="none" pattern="MSL" />
  <policy domain="path" rights="none" pattern="@*" />
  <policy domain="path" rights="none" pattern="|*" />
</policymap>
`}};class ki{constructor(){this.log=new hn("log.xml",gn.XmlResourceFiles.log),this.policy=new hn("policy.xml",gn.XmlResourceFiles.policy)}static default=new ki;*all(){yield this.log,yield this.policy}log;policy}class Co{constructor(t,n){this.eventType=t,this.message=n??""}eventType;message}const Po={Opaque:11},tt={Red:0,Green:1,Blue:2,Black:3,Alpha:4,Index:5,Composite:64},Y={Undefined:0,Composite:31,All:134217727};class bo{constructor(t,n,e,c){this.red=t,this.green=n,this.blue=e,this.white=c}red;green;blue;white}const A={Undefined:0,CMY:1,CMYK:2,Gray:3,HCL:4,HCLp:5,HSB:6,HSI:7,HSL:8,HSV:9,HWB:10,Lab:11,LCH:12,LCHab:13,LCHuv:14,Log:15,LMS:16,Luv:17,OHTA:18,Rec601YCbCr:19,Rec709YCbCr:20,RGB:21,scRGB:22,sRGB:23,Transparent:24,XyY:25,XYZ:26,YCbCr:27,YCC:28,YDbDr:29,YIQ:30,YPbPr:31,YUV:32,LinearGray:33,Jzazbz:34,DisplayP3:35,Adobe98:36,ProPhoto:37,Oklab:38,Oklch:39,CAT02LMSC:40},un={[A.Undefined]:"Undefined",[A.CMY]:"CMY",[A.CMYK]:"CMYK",[A.Gray]:"Gray",[A.HCL]:"HCL",[A.HCLp]:"HCLp",[A.HSB]:"HSB",[A.HSI]:"HSI",[A.HSL]:"HSL",[A.HSV]:"HSV",[A.HWB]:"HWB",[A.Lab]:"Lab",[A.LCH]:"LCH",[A.LCHab]:"LCHab",[A.LCHuv]:"LCHuv",[A.Log]:"Log",[A.LMS]:"LMS",[A.Luv]:"Luv",[A.OHTA]:"OHTA",[A.Rec601YCbCr]:"Rec601YCbCr",[A.Rec709YCbCr]:"Rec709YCbCr",[A.RGB]:"RGB",[A.scRGB]:"scRGB",[A.sRGB]:"sRGB",[A.Transparent]:"Transparent",[A.XyY]:"XyY",[A.XYZ]:"XYZ",[A.YCbCr]:"YCbCr",[A.YCC]:"YCC",[A.YDbDr]:"YDbDr",[A.YIQ]:"YIQ",[A.YPbPr]:"YPbPr",[A.YUV]:"YUV",[A.LinearGray]:"LinearGray",[A.Jzazbz]:"Jzazbz",[A.DisplayP3]:"DisplayP3",[A.Adobe98]:"Adobe98",[A.ProPhoto]:"ProPhoto",[A.Oklab]:"Oklab",[A.Oklch]:"Oklch",[A.CAT02LMSC]:"CAT02LMS"};class Do{colorSpace=A.Undefined;copyright=null;description=null;manufacturer=null;model=null}class Eo{_data;_index;constructor(t){this._data=t,this._index=0,this.isLittleEndian=!1}get index(){return this._index}isLittleEndian;readLong(){return this.canRead(4)?this.isLittleEndian?this.readLongLSB():this.readLongMSB():null}readString(t){if(t==0)return"";if(!this.canRead(t))return null;let n=new TextDecoder("utf-8").decode(this._data.subarray(this._index,this._index+t));const e=n.indexOf("\0");return e!=-1&&(n=n.substring(0,e)),this._index+=t,n}seek(t){return t>=this._data.length?!1:(this._index=t,!0)}skip(t){return this._index+t>=this._data.length?!1:(this._index+=t,!0)}canRead(t){return t>this._data.length?!1:this._index+t<=this._data.length}readLongLSB(){let t=this._data[this._index];return t|=this._data[this._index+1]<<8,t|=this._data[this._index+2]<<16,t|=this._data[this._index+3]<<24,this._index+=4,t}readLongMSB(){let t=this._data[this._index]<<24;return t|=this._data[this._index+1]<<16,t|=this._data[this._index+2]<<8,t|=this._data[this._index+3],this._index+=4,t}}class wi{_data=new Do;_reader;constructor(t){this._reader=new Eo(t)}static read(t){const n=new wi(t);return n.readColorSpace(),n.readTagTable(),n._data}readColorSpace(){this._reader.seek(16);const t=this._reader.readString(4);t!=null&&(this._data.colorSpace=this.determineColorSpace(t.trimEnd()))}determineColorSpace(t){switch(t){case"CMY":return A.CMY;case"CMYK":return A.CMYK;case"GRAY":return A.Gray;case"HSL":return A.HSL;case"HSV":return A.HSV;case"Lab":return A.Lab;case"Luv":return A.Luv;case"RGB":return A.sRGB;case"XYZ":return A.XYZ;case"YCbr":return A.YCbCr;default:return A.Undefined}}readTagTable(){if(!this._reader.seek(128))return;const t=this._reader.readLong();if(t!=null)for(let n=0;n<t;n++)switch(this._reader.readLong()){case 1668313716:this._data.copyright=this.readTag();break;case 1684370275:this._data.description=this.readTag();break;case 1684893284:this._data.manufacturer=this.readTag();break;case 1684890724:this._data.model=this.readTag();break;default:this._reader.skip(8);break}}readTag(){const t=this._reader.readLong(),n=this._reader.readLong();if(t===null||n===null)return null;const e=this._reader.index;if(!this._reader.seek(t))return null;const c=this.readTagValue(n);return this._reader.seek(e),c}readTagValue(t){switch(this._reader.readString(4)){case"desc":return this.readTextDescriptionTypeValue();case"text":return this.readTextTypeValue(t);default:return null}}readTextDescriptionTypeValue(){if(!this._reader.skip(4))return null;const t=this._reader.readLong();return t==null?null:this._reader.readString(t)}readTextTypeValue(t){return this._reader.skip(4)?this._reader.readString(t):null}}class bn{constructor(t,n){this.name=t,this.data=n}name;data}class xo extends bn{_data;constructor(t){super("icc",t)}get colorSpace(){return this.initialize(),this._data.colorSpace}get copyright(){return this.initialize(),this._data.copyright}get description(){return this.initialize(),this._data.description}get manufacturer(){return this.initialize(),this._data.manufacturer}get model(){return this.initialize(),this._data.model}initialize(){this._data||(this._data=wi.read(this.data))}}const pn={Quantum:1};class yi{constructor(t,n){this.distortion=t,this.difference=n}difference;distortion;static _create(t,n){return new yi(t,n)}}class Ao{constructor(t){this.metric=t}metric;highlightColor;lowlightColor;masklightColor;_setArtifacts(t){this.highlightColor!==void 0&&t.setArtifact("compare:highlight-color",this.highlightColor),this.lowlightColor!==void 0&&t.setArtifact("compare:lowlight-color",this.lowlightColor),this.masklightColor!==void 0&&t.setArtifact("compare:masklight-color",this.masklightColor)}}const ri={In:37,SrcOver:67},di={Error:400};class z extends Error{_relatedErrors=[];constructor(t,n=di.Error){super(t),this.severity=n}severity;get relatedErrors(){return this._relatedErrors}_setRelatedErrors(t){this._relatedErrors=t}}class Bt{static get depth(){return l._api._Quantum_Depth_Get()}static get max(){return l._api._Quantum_Max_Get()}}function pt(u,t){return u===0?t??null:l._api.UTF8ToString(u)}function To(u,t){const n=pt(t);return u._MagickMemory_Relinquish(t),n}function fi(u,t,n){const e=u.lengthBytesUTF8(t)+1,c=u._malloc(e);try{return u.stringToUTF8(t,c,e),n(c)}finally{u._free(c)}}function F(u,t){return u===null?t(0):fi(l._api,u,t)}class ut{constructor(t,n,e,c,h){if(t!==void 0)if(typeof t=="string"){let d=0;try{d=l._api._MagickColor_Create(),F(t,k=>{if(l._api._MagickColor_Initialize(d,k)===0)throw new z("invalid color specified");this.initialize(d)})}finally{l._api._free(d)}}else this.r=t,this.g=n??0,this.b=e??0,h===void 0?this.a=c??Bt.max:(this.k=c??0,this.a=h,this.isCmyk=!0)}r=0;g=0;b=0;a=0;k=0;isCmyk=!1;static _create(t){const n=new ut;return n.initialize(t),n}toShortString(){return this.a!==Bt.max?this.toString():this.isCmyk?`cmyka(${this.r},${this.g},${this.b},${this.k})`:`#${this.toHex(this.r)}${this.toHex(this.g)}${this.toHex(this.b)}`}toString(){return this.isCmyk?`cmyka(${this.r},${this.g},${this.b},${this.k},${(this.a/Bt.max).toFixed(4)})`:`#${this.toHex(this.r)}${this.toHex(this.g)}${this.toHex(this.b)}${this.toHex(this.a)}`}_use(t){let n=0;try{n=l._api._MagickColor_Create(),l._api._MagickColor_Red_Set(n,this.r),l._api._MagickColor_Green_Set(n,this.g),l._api._MagickColor_Blue_Set(n,this.b),l._api._MagickColor_Alpha_Set(n,this.a),this.isCmyk?(l._api._MagickColor_Black_Set(n,this.k),l._api._MagickColor_IsCMYK_Set(n,1)):l._api._MagickColor_IsCMYK_Set(n,0),t(n)}finally{l._api._MagickColor_Dispose(n)}}initialize(t){this.r=l._api._MagickColor_Red_Get(t),this.g=l._api._MagickColor_Green_Get(t),this.b=l._api._MagickColor_Blue_Get(t),this.a=l._api._MagickColor_Alpha_Get(t),this.isCmyk=l._api._MagickColor_IsCMYK_Get(t)===1,this.isCmyk&&(this.k=l._api._MagickColor_Black_Get(t))}toHex(t){return t.toString(16).padStart(2,"0")}}var At=(u=>(u[u.NoValue=0]="NoValue",u[u.PercentValue=4096]="PercentValue",u[u.IgnoreAspectRatio=8192]="IgnoreAspectRatio",u[u.Less=16384]="Less",u[u.Greater=32768]="Greater",u[u.FillArea=65536]="FillArea",u[u.LimitPixels=131072]="LimitPixels",u[u.AspectRatio=1048576]="AspectRatio",u))(At||{});class _t{_includeXyInToString;_width=0;_height=0;_x=0;_y=0;_aspectRatio=!1;_fillArea=!1;_greater=!1;_isPercentage=!1;_ignoreAspectRatio=!1;_less=!1;_limitPixels=!1;constructor(t,n,e,c){if(typeof t=="number"){if(e!==void 0&&c!==void 0?(this._width=e,this._height=c,this._x=t,this._y=n??0,this._includeXyInToString=!0):(this._width=t,this._height=n??this._width,this._x=0,this._y=0,this._includeXyInToString=!1),this._width<0)throw new z("negative width is not allowed");if(this._height<0)throw new z("negative height is not allowed")}else{this._includeXyInToString=t.indexOf("+")>=0||t.indexOf("-")>=0;const h=l._api._MagickGeometry_Create();try{F(t,d=>{const k=l._api._MagickGeometry_Initialize(h,d);if(k===At.NoValue)throw new z("invalid geometry specified");this.hasFlag(k,At.AspectRatio)?this.initializeFromAspectRation(h,t):this.initialize(h,k)})}finally{l._api._MagickGeometry_Dispose(h)}}}get aspectRatio(){return this._aspectRatio}get fillArea(){return this._fillArea}set fillArea(t){this._fillArea=t}get greater(){return this._greater}set greater(t){this._greater=t}get height(){return this._height}set height(t){this._height=t}get ignoreAspectRatio(){return this._ignoreAspectRatio}set ignoreAspectRatio(t){this._ignoreAspectRatio=t}get isPercentage(){return this._isPercentage}set isPercentage(t){this._isPercentage=t}get less(){return this._less}set less(t){this._less=t}get limitPixels(){return this._limitPixels}set limitPixels(t){this._limitPixels=t}get width(){return this._width}set width(t){this._width=t}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}toString(){if(this._aspectRatio)return this._width+":"+this._height;let t="";return this._width==0&&this._height==0?t+="0x0":(this._width>0&&(t+=this._width.toString()),this._height>0?t+="x"+this._height.toString():t+="x"),(this._x!=0||this._y!=0||this._includeXyInToString)&&(this._x>=0&&(t+="+"),t+=this._x,this.y>=0&&(t+="+"),t+=this.y),this._fillArea&&(t+="^"),this._greater&&(t+=">"),this._isPercentage&&(t+="%"),this._ignoreAspectRatio&&(t+="!"),this._less&&(t+="<"),this._limitPixels&&(t+="@"),t}static _fromRectangle(t){if(t===0)throw new z("unable to allocate memory");try{const n=l._api._MagickRectangle_Width_Get(t),e=l._api._MagickRectangle_Height_Get(t),c=l._api._MagickRectangle_X_Get(t),h=l._api._MagickRectangle_Y_Get(t);return new _t(c,h,n,e)}finally{l._api._MagickRectangle_Dispose(t)}}_toRectangle(t){const n=l._api._MagickRectangle_Create();if(n===0)throw new z("unable to allocate memory");try{return l._api._MagickRectangle_Width_Set(n,this._width),l._api._MagickRectangle_Height_Set(n,this._height),l._api._MagickRectangle_X_Set(n,this._x),l._api._MagickRectangle_Y_Set(n,this._y),t(n)}finally{l._api._MagickRectangle_Dispose(n)}}initialize(t,n){this._width=l._api._MagickGeometry_Width_Get(t),this._height=l._api._MagickGeometry_Height_Get(t),this._x=l._api._MagickGeometry_X_Get(t),this._y=l._api._MagickGeometry_Y_Get(t),this._ignoreAspectRatio=this.hasFlag(n,At.IgnoreAspectRatio),this._isPercentage=this.hasFlag(n,At.PercentValue),this._fillArea=this.hasFlag(n,At.FillArea),this._greater=this.hasFlag(n,At.Greater),this._less=this.hasFlag(n,At.Less),this._limitPixels=this.hasFlag(n,At.LimitPixels)}initializeFromAspectRation(t,n){this._aspectRatio=!0;const e=n.split(":");this._width=this.parseNumber(e[0]),this._height=this.parseNumber(e[1]),this._x=l._api._MagickGeometry_X_Get(t),this._y=l._api._MagickGeometry_Y_Get(t)}parseNumber(t){let n=0;for(;n<t.length&&!this.isNumber(t[n]);)n++;const e=n;for(;n<t.length&&this.isNumber(t[n]);)n++;return parseInt(t.substr(e,n-e))}isNumber(t){return t>="0"&&t<="9"}hasFlag(t,n){return(t&n)===n}}class Gt{constructor(t,n){this.x=t,this.y=n??t}x;y;static _create(t){return t===0?new Gt(0,0):new Gt(l._api._PointInfo_X_Get(t),l._api._PointInfo_Y_Get(t))}}class Mi{constructor(t){this.area=l._api._ConnectedComponent_GetArea(t),this.centroid=Gt._create(l._api._ConnectedComponent_GetCentroid(t)),this.color=ut._create(l._api._ConnectedComponent_GetColor(t)),this.height=l._api._ConnectedComponent_GetHeight(t),this.id=l._api._ConnectedComponent_GetId(t),this.width=l._api._ConnectedComponent_GetWidth(t),this.x=l._api._ConnectedComponent_GetX(t),this.y=l._api._ConnectedComponent_GetY(t)}area;centroid;color;height;id;width;x;y;static _create(t,n){const e=[];if(t===0)return e;for(let c=0;c<n;c++){const h=l._api._ConnectedComponent_GetInstance(t,c);h===0||l._api._ConnectedComponent_GetArea(h)<Number.EPSILON||e.push(new Mi(h))}return e}toGeometry(){return new _t(this.x,this.y,this.width,this.height)}}class Fo{angleThreshold;areaThreshold;circularityThreshold;connectivity;diameterThreshold;eccentricityThreshold;majorAxisThreshold;meanColor;minorAxisThreshold;perimeterThreshold;constructor(t){this.connectivity=t}_setArtifacts(t){this.angleThreshold!==void 0&&t.setArtifact("connected-components:angle-threshold",this.angleThreshold.toString()),this.areaThreshold!==void 0&&t.setArtifact("connected-components:area-threshold",this.areaThreshold.toString()),this.circularityThreshold!==void 0&&t.setArtifact("connected-components:circularity-threshold",this.circularityThreshold.toString()),this.diameterThreshold!==void 0&&t.setArtifact("connected-components:diameter-threshold",this.diameterThreshold.toString()),this.eccentricityThreshold!==void 0&&t.setArtifact("connected-components:eccentricity-threshold",this.eccentricityThreshold.toString()),this.majorAxisThreshold!==void 0&&t.setArtifact("connected-components:major-axis-threshold",this.majorAxisThreshold.toString()),this.meanColor!==void 0&&t.setArtifact("connected-components:mean-color",this.meanColor.toString()),this.minorAxisThreshold!==void 0&&t.setArtifact("connected-components:minor-axis-threshold",this.minorAxisThreshold.toString()),this.perimeterThreshold!==void 0&&t.setArtifact("connected-components:perimeter-threshold",this.perimeterThreshold.toString())}}const Yt={Undefined:0,PixelsPerInch:1,PixelsPerCentimeter:2};class pe{constructor(t,n,e){n===void 0?(this.x=t,this.y=t,this.units=Yt.PixelsPerInch):e!==void 0?(this.x=t,this.y=n,this.units=e):(this.x=t,this.y=t,this.units=n)}x;y;units;toString(t){return t==this.units||t===Yt.Undefined||t===void 0?pe.toString(this.x,this.y,t??Yt.Undefined):this.units==Yt.PixelsPerCentimeter&&t==Yt.PixelsPerInch?pe.toString(this.x*2.54,this.y*2.54,t):pe.toString(this.x/2.54,this.y/2.54,t)}static toString(t,n,e){let c=`${t}x${n}`;switch(e){case Yt.PixelsPerCentimeter:c+="cm";break;case Yt.PixelsPerInch:c+="inch";break}return c}}class yt{static _disposeAfterExecution(t,n){try{const e=n(t);return e instanceof Promise?Promise.resolve(e).then(c=>(t.dispose(),yt.checkResult(t,c),c)):(t.dispose(),yt.checkResult(t,e),e)}catch(e){throw t.dispose(),e}}static checkResult(t,n){if(n===t)throw new z("The result of the function cannot be the instance that has been disposed.");return n}}class Dn{_pointer;_bytes;_func;constructor(t,n,e){this._pointer=t,this._func=e,this._bytes=l._api.HEAPU8.subarray(t,t+n)}func(t){return t._bytes===void 0?t._func(new Uint8Array):t._func(t._bytes)}dispose(){this._pointer=l._api._MagickMemory_Relinquish(this._pointer)}}class En{instance;type;constructor(t,n){this.instance=l._api._malloc(t),this.type=n,l._api.setValue(this.instance,0,this.type)}get ptr(){return this.instance}get value(){return l._api.getValue(this.instance,this.type)}}class Rt extends En{constructor(){super(4,"i32")}static use(t){const n=new Rt;try{return t(n)}finally{l._api._free(n.ptr)}}}class x{pointer;constructor(t){this.pointer=t}get ptr(){return this.pointer.ptr}check(t,n){return this.isError()?n():t()}static usePointer(t,n){return Rt.use(e=>{const c=t(e.ptr);return x.checkException(e,c,n)})}static use(t,n){return Rt.use(e=>{const c=t(new x(e));return x.checkException(e,c,n)})}static checkException(t,n,e){if(!x.isRaised(t))return n;const c=x.getErrorSeverity(t.value);if(c>=di.Error)x.throw(t,c);else if(e!==void 0){const h=x.createError(t.value,c);e(h)}else x.dispose(t);return n}isError(){return x.isRaised(this.pointer)?x.getErrorSeverity(this.pointer.value)>=di.Error:!1}static getErrorSeverity(t){return l._api._MagickExceptionHelper_Severity(t)}static isRaised(t){return t.value!==0}static throw(t,n){const e=x.createError(t.value,n);throw x.dispose(t),e}static createError(t,n){const e=x.getMessage(t),c=new z(e,n),h=l._api._MagickExceptionHelper_RelatedCount(t);if(h===0)return c;const d=[];for(let k=0;k<h;k++){const w=l._api._MagickExceptionHelper_Related(t,k),S=x.getErrorSeverity(w),E=x.createError(w,S);d.push(E)}return c._setRelatedErrors(d),c}static getMessage(t){const n=l._api._MagickExceptionHelper_Message(t),e=l._api._MagickExceptionHelper_Description(t);let c=pt(n,"Unknown error");return e!==0&&(c+=`(${l._api.UTF8ToString(e)})`),c}static dispose(t){l._api._MagickExceptionHelper_Dispose(t.value)}}class oe{disposeMethod;instance;constructor(t,n){this.instance=t,this.disposeMethod=n}get _instance(){if(this.instance>0)return this.instance;throw this.instance===-1&&this._instanceNotInitialized(),new z("instance is disposed")}set _instance(t){this.disposeInstance(this.instance),this.instance=t}dispose(){this.instance=this.disposeInstance(this.instance)}_instanceNotInitialized(){throw new z("instance is not initialized")}_setInstance(t,n){return n.check(()=>this.instance===0?!1:(this.dispose(),this.instance=t,!0),()=>(this.disposeInstance(t),!0))}disposeInstance(t){return t>0&&(this.onDispose!==void 0&&this.onDispose(),this.disposeMethod(t)),0}}class vi{constructor(t,n,e,c,h,d,k){this.ascent=t,this.descent=n,this.maxHorizontalAdvance=e,this.textHeight=c,this.textWidth=h,this.underlinePosition=d,this.underlineThickness=k}ascent;descent;maxHorizontalAdvance;textHeight;textWidth;underlinePosition;underlineThickness;static _create(t){if(t==0)return null;try{const n=l._api._TypeMetric_Ascent_Get(t),e=l._api._TypeMetric_Descent_Get(t),c=l._api._TypeMetric_MaxHorizontalAdvance_Get(t),h=l._api._TypeMetric_TextHeight_Get(t),d=l._api._TypeMetric_TextWidth_Get(t),k=l._api._TypeMetric_UnderlinePosition_Get(t),w=l._api._TypeMetric_UnderlineThickness_Get(t);return new vi(n,e,c,h,d,k,w)}finally{l._api._TypeMetric_Dispose(t)}}}function dn(u,t){if(u.byteLength===0)throw new z("The specified array cannot be empty");let n=0;try{return n=l._api._malloc(u.byteLength),l._api.HEAPU8.set(u,n),t(n)}finally{n!==0&&l._api._free(n)}}function Ge(u,t){if(u.length===0)throw new z("The specified array cannot be empty");const n=u.length*8;let e=0;try{e=l._api._malloc(n);const c=new ArrayBuffer(n),h=new Float64Array(c);for(let d=0;d<u.length;d++)h[d]=u[d];return l._api.HEAPU8.set(new Int8Array(c),e),t(e)}finally{e!==0&&l._api._free(e)}}function Go(u,t){if(u.byteLength===0)throw new z("The specified array cannot be empty");let n=0;try{return n=l._api._malloc(u.byteLength),l._api.HEAPU8.set(u,n),t(n)}finally{n!==0&&l._api._free(n)}}class Si extends oe{constructor(t){const n=t.settings._drawing._use(c=>l._api._DrawingWand_Create(t._instance,c._instance)),e=l._api._DrawingWand_Dispose;super(n,e)}affine(t,n,e,c,h,d){x.usePointer(k=>{l._api._DrawingWand_Affine(this._instance,t,n,e,c,h,d,k)})}borderColor(t){x.usePointer(n=>{t._use(e=>{l._api._DrawingWand_BorderColor(this._instance,e,n)})})}color(t,n,e){x.usePointer(c=>{l._api._DrawingWand_Color(this._instance,t,n,e,c)})}draw(t){t.forEach(n=>{n.draw(this)}),x.usePointer(n=>{l._api._DrawingWand_Render(this._instance,n)})}fillColor(t){x.usePointer(n=>{t._use(e=>{l._api._DrawingWand_FillColor(this._instance,e,n)})})}fillOpacity(t){x.usePointer(n=>{l._api._DrawingWand_FillOpacity(this._instance,t,n)})}fillRule(t){x.usePointer(n=>{l._api._DrawingWand_FillRule(this._instance,t,n)})}font(t){x.usePointer(n=>{F(t,e=>{l._api._DrawingWand_Font(this._instance,e,n)})})}fontPointSize(t){x.usePointer(n=>{l._api._DrawingWand_FontPointSize(this._instance,t,n)})}fontTypeMetrics(t,n){return x.usePointer(e=>F(t,c=>{const h=l._api._DrawingWand_FontTypeMetrics(this._instance,c,n?1:0,e);return vi._create(h)}))}gravity(t){x.usePointer(n=>{l._api._DrawingWand_Gravity(this._instance,t,n)})}line(t,n,e,c){x.usePointer(h=>{l._api._DrawingWand_Line(this._instance,t,n,e,c,h)})}pathFinish(){x.usePointer(t=>{l._api._DrawingWand_PathFinish(this._instance,t)})}pathLineToAbs(t,n){x.usePointer(e=>{l._api._DrawingWand_PathLineToAbs(this._instance,t,n,e)})}pathLineToRel(t,n){x.usePointer(e=>{l._api._DrawingWand_PathLineToRel(this._instance,t,n,e)})}pathMoveToAbs(t,n){x.usePointer(e=>{l._api._DrawingWand_PathMoveToAbs(this._instance,t,n,e)})}pathMoveToRel(t,n){x.usePointer(e=>{l._api._DrawingWand_PathMoveToRel(this._instance,t,n,e)})}pathStart(){x.usePointer(t=>{l._api._DrawingWand_PathStart(this._instance,t)})}point(t,n){x.usePointer(e=>{l._api._DrawingWand_Point(this._instance,t,n,e)})}rectangle(t,n,e,c){x.usePointer(h=>{l._api._DrawingWand_Rectangle(this._instance,t,n,e,c,h)})}roundRectangle(t,n,e,c,h,d){x.usePointer(k=>{l._api._DrawingWand_RoundRectangle(this._instance,t,n,e,c,h,d,k)})}strokeColor(t){x.usePointer(n=>{t._use(e=>{l._api._DrawingWand_StrokeColor(this._instance,e,n)})})}strokeDashArray(t){x.usePointer(n=>{Ge(t,e=>{l._api._DrawingWand_StrokeDashArray(this._instance,e,t.length,n)})})}strokeDashOffset(t){x.usePointer(n=>{l._api._DrawingWand_StrokeDashOffset(this._instance,t,n)})}strokeWidth(t){x.usePointer(n=>{l._api._DrawingWand_StrokeWidth(this._instance,t,n)})}text(t,n,e){x.usePointer(c=>{F(e,h=>{l._api._DrawingWand_Text(this._instance,t,n,h,c)})})}textAlignment(t){x.usePointer(n=>{l._api._DrawingWand_TextAlignment(this._instance,t,n)})}textAntialias(t){x.usePointer(n=>{l._api._DrawingWand_TextAntialias(this._instance,t?1:0,n)})}textDecoration(t){x.usePointer(n=>{l._api._DrawingWand_TextDecoration(this._instance,t,n)})}textInterlineSpacing(t){x.usePointer(n=>{l._api._DrawingWand_TextInterlineSpacing(this._instance,t,n)})}textInterwordspacing(t){x.usePointer(n=>{l._api._DrawingWand_TextInterwordSpacing(this._instance,t,n)})}textKerning(t){x.usePointer(n=>{l._api._DrawingWand_TextKerning(this._instance,t,n)})}textUnderColor(t){x.usePointer(n=>{t._use(e=>{l._api._DrawingWand_TextUnderColor(this._instance,e,n)})})}static _use(t,n){const e=new Si(t);return yt._disposeAfterExecution(e,n)}}class Ii extends En{constructor(){super(8,"double")}static use(t){const n=new Ii;try{return t(n)}finally{l._api._free(n.ptr)}}}const et={Undefined:0,Northwest:1,North:2,Northeast:3,West:4,Center:5,East:6,Southwest:7,South:8,Southeast:9};function*Ro(u){for(const t of u)switch(t){case et.North:yield"north";break;case et.Northeast:yield"north",yield"east";break;case et.Northwest:yield"north",yield"west";break;case et.East:yield"east";break;case et.West:yield"west";break;case et.South:yield"south";break;case et.Southeast:yield"south",yield"east";break;case et.Southwest:yield"south",yield"west"}}function Wo(u){switch(u){case et.North:return"north";case et.Northeast:return"northeast";case et.Northwest:return"northwest";case et.East:return"east";case et.West:return"west";case et.South:return"south";case et.Southeast:return"southeast";case et.Southwest:return"southwest";case et.Center:return"center";default:return}}class Re{constructor(t,n,e){this.meanErrorPerPixel=t,this.normalizedMeanError=n,this.normalizedMaximumError=e}meanErrorPerPixel;normalizedMaximumError;normalizedMeanError;static _create(t){const n=l._api._MagickImage_MeanErrorPerPixel_Get(t._instance),e=l._api._MagickImage_NormalizedMeanError_Get(t._instance),c=l._api._MagickImage_NormalizedMaximumError_Get(t._instance);return new Re(n,e,c)}}const dt={Unknown:"UNKNOWN",ThreeFr:"3FR",ThreeG2:"3G2",ThreeGp:"3GP",A:"A",Aai:"AAI",Ai:"AI",APng:"APNG",Art:"ART",Arw:"ARW",Ashlar:"ASHLAR",Avci:"AVCI",Avi:"AVI",Avif:"AVIF",Avs:"AVS",B:"B",Bayer:"BAYER",Bayera:"BAYERA",Bgr:"BGR",Bgra:"BGRA",Bgro:"BGRO",Bmp:"BMP",Bmp2:"BMP2",Bmp3:"BMP3",Brf:"BRF",C:"C",Cal:"CAL",Cals:"CALS",Canvas:"CANVAS",Caption:"CAPTION",Cin:"CIN",Cip:"CIP",Clip:"CLIP",Cmyk:"CMYK",Cmyka:"CMYKA",Cr2:"CR2",Cr3:"CR3",Crw:"CRW",Cube:"CUBE",Cur:"CUR",Cut:"CUT",Data:"DATA",Dcm:"DCM",Dcr:"DCR",Dcraw:"DCRAW",Dcx:"DCX",Dds:"DDS",Dfont:"DFONT",Dng:"DNG",Dpx:"DPX",Dxt1:"DXT1",Dxt5:"DXT5",Epdf:"EPDF",Epi:"EPI",Eps:"EPS",Eps2:"EPS2",Eps3:"EPS3",Epsf:"EPSF",Epsi:"EPSI",Ept:"EPT",Ept2:"EPT2",Ept3:"EPT3",Erf:"ERF",Exr:"EXR",Farbfeld:"FARBFELD",Fax:"FAX",Ff:"FF",Fff:"FFF",File:"FILE",Fits:"FITS",Fl32:"FL32",Flv:"FLV",Fractal:"FRACTAL",Ftp:"FTP",Fts:"FTS",Ftxt:"FTXT",G:"G",G3:"G3",G4:"G4",Gif:"GIF",Gif87:"GIF87",Gradient:"GRADIENT",Gray:"GRAY",Graya:"GRAYA",Group4:"GROUP4",Hald:"HALD",Hdr:"HDR",Heic:"HEIC",Heif:"HEIF",Histogram:"HISTOGRAM",Hrz:"HRZ",Htm:"HTM",Html:"HTML",Http:"HTTP",Https:"HTTPS",Icb:"ICB",Ico:"ICO",Icon:"ICON",Icn:"ICN",Iiq:"IIQ",Info:"INFO",Inline:"INLINE",Ipl:"IPL",Isobrl:"ISOBRL",Isobrl6:"ISOBRL6",J2c:"J2C",J2k:"J2K",Jng:"JNG",Jnx:"JNX",Jp2:"JP2",Jpc:"JPC",Jpe:"JPE",Jpeg:"JPEG",Jpg:"JPG",Jpm:"JPM",Jps:"JPS",Jpt:"JPT",Json:"JSON",Jxl:"JXL",K:"K",K25:"K25",Kdc:"KDC",Label:"LABEL",M:"M",M2v:"M2V",M4v:"M4V",Mac:"MAC",Map:"MAP",Mask:"MASK",Mat:"MAT",Matte:"MATTE",Mdc:"MDC",Mef:"MEF",Miff:"MIFF",Mkv:"MKV",Mng:"MNG",Mono:"MONO",Mov:"MOV",Mos:"MOS",Mp4:"MP4",Mpc:"MPC",Mpeg:"MPEG",Mpg:"MPG",Mpo:"MPO",Mrw:"MRW",Msl:"MSL",Msvg:"MSVG",Mtv:"MTV",Mvg:"MVG",Nef:"NEF",Nrw:"NRW",Null:"NULL",O:"O",Ora:"ORA",Orf:"ORF",Otb:"OTB",Otf:"OTF",Pal:"PAL",Palm:"PALM",Pam:"PAM",Pango:"PANGO",Pattern:"PATTERN",Pbm:"PBM",Pcd:"PCD",Pcds:"PCDS",Pcl:"PCL",Pct:"PCT",Pcx:"PCX",Pdb:"PDB",Pdf:"PDF",Pdfa:"PDFA",Pef:"PEF",Pes:"PES",Pfa:"PFA",Pfb:"PFB",Pfm:"PFM",Pgm:"PGM",Pgx:"PGX",Phm:"PHM",Picon:"PICON",Pict:"PICT",Pix:"PIX",Pjpeg:"PJPEG",Plasma:"PLASMA",Png:"PNG",Png00:"PNG00",Png24:"PNG24",Png32:"PNG32",Png48:"PNG48",Png64:"PNG64",Png8:"PNG8",Pnm:"PNM",Pocketmod:"POCKETMOD",Ppm:"PPM",Ps:"PS",Ps2:"PS2",Ps3:"PS3",Psb:"PSB",Psd:"PSD",Ptif:"PTIF",Pwp:"PWP",Qoi:"QOI",R:"R",RadialGradient:"RADIAL-GRADIENT",Raf:"RAF",Ras:"RAS",Raw:"RAW",Rgb:"RGB",Rgb565:"RGB565",Rgba:"RGBA",Rgbo:"RGBO",Rgf:"RGF",Rla:"RLA",Rle:"RLE",Rmf:"RMF",Rw2:"RW2",Rwl:"RWL",Scr:"SCR",Screenshot:"SCREENSHOT",Sct:"SCT",Sf3:"SF3",Sfw:"SFW",Sgi:"SGI",Shtml:"SHTML",Six:"SIX",Sixel:"SIXEL",SparseColor:"SPARSE-COLOR",Sr2:"SR2",Srf:"SRF",Srw:"SRW",Stegano:"STEGANO",Sti:"STI",StrImg:"STRIMG",Sun:"SUN",Svg:"SVG",Svgz:"SVGZ",Text:"TEXT",Tga:"TGA",Thumbnail:"THUMBNAIL",Tif:"TIF",Tiff:"TIFF",Tiff64:"TIFF64",Tile:"TILE",Tim:"TIM",Tm2:"TM2",Ttc:"TTC",Ttf:"TTF",Txt:"TXT",Ubrl:"UBRL",Ubrl6:"UBRL6",Uil:"UIL",Uyvy:"UYVY",Vda:"VDA",Vicar:"VICAR",Vid:"VID",Viff:"VIFF",Vips:"VIPS",Vst:"VST",WebM:"WEBM",WebP:"WEBP",Wbmp:"WBMP",Wmv:"WMV",Wpg:"WPG",X3f:"X3F",Xbm:"XBM",Xc:"XC",Xcf:"XCF",Xpm:"XPM",Xps:"XPS",Xv:"XV",Y:"Y",Yaml:"YAML",Ycbcr:"YCBCR",Ycbcra:"YCBCRA",Yuv:"YUV"},xe={Merge:13,Flatten:14,Mosaic:15,Trimbounds:16};class Bo extends oe{constructor(t){const n=l._api._DrawingSettings_Create(),e=l._api._DrawingSettings_Dispose;super(n,e);const c=t.affine;if(c!==void 0&&l._api._DrawingSettings_SetAffine(this._instance,c.scaleX,c.scaleY,c.shearX,c.shearY,c.translateX,c.translateY),t.borderColor!==void 0&&t.borderColor._use(d=>{l._api._DrawingSettings_BorderColor_Set(this._instance,d)}),t.fillColor!==void 0&&t.fillColor._use(d=>{l._api._DrawingSettings_FillColor_Set(this._instance,d)}),t.fillRule!==void 0&&l._api._DrawingSettings_FillRule_Set(this._instance,t.fillRule),t.font!==void 0){const d=Xt._getFontFileName(t.font);F(d,k=>{l._api._DrawingSettings_Font_Set(this._instance,k)})}t.fontPointsize!==void 0&&l._api._DrawingSettings_FontPointsize_Set(this._instance,t.fontPointsize),t.strokeColor!==void 0&&t.strokeColor._use(d=>{l._api._DrawingSettings_StrokeColor_Set(this._instance,d)});const h=t.strokeDashArray;h!==void 0&&Ge(h,d=>{l._api._DrawingSettings_SetStrokeDashArray(this._instance,d,h.length)}),t.strokeDashOffset!==void 0&&l._api._DrawingSettings_StrokeDashOffset_Set(this._instance,t.strokeDashOffset),t.strokeWidth!==void 0&&l._api._DrawingSettings_StrokeWidth_Set(this._instance,t.strokeWidth),t.textAntiAlias!==void 0&&l._api._DrawingSettings_TextAntiAlias_Set(this._instance,t.textAntiAlias?1:0),t.textGravity!==void 0&&l._api._DrawingSettings_TextGravity_Set(this._instance,t.textGravity),t.textKerning!==void 0&&l._api._DrawingSettings_TextKerning_Set(this._instance,t.textKerning),t.textUnderColor!==void 0&&t.textUnderColor._use(d=>{l._api._DrawingSettings_TextUnderColor_Set(this._instance,d)})}setFillColor(t){t!==void 0?t._use(n=>{l._api._DrawingSettings_FillColor_Set(this._instance,n)}):l._api._DrawingSettings_FillColor_Set(this._instance,0)}setFillPattern(t){x.usePointer(n=>{t!==void 0?l._api._DrawingSettings_SetFillPattern(this._instance,t._instance,n):l._api._DrawingSettings_SetFillPattern(this._instance,0,n)})}}class Lo{affine;borderColor;backgroundColor;fillColor;fillRule;font;fontPointsize;strokeColor;strokeDashArray;strokeDashOffset;strokeWidth;textAntiAlias;textGravity;textKerning;textUnderColor;_use(t){const n=new Bo(this);return yt._disposeAfterExecution(n,t)}}const Oo={Undefined:0};class xn extends oe{constructor(t){const n=l._api._MagickSettings_Create(),e=l._api._MagickSettings_Dispose;if(super(n,e),t._colorFuzz!==void 0&&l._api._MagickSettings_SetColorFuzz(this._instance,t._colorFuzz),t._fileName!==void 0&&F(t._fileName,c=>{l._api._MagickSettings_SetFileName(this._instance,c)}),t._ping&&l._api._MagickSettings_SetPing(this._instance,1),t._quality!==void 0&&l._api._MagickSettings_SetQuality(this._instance,t._quality),t.antiAlias!==void 0&&l._api._MagickSettings_AntiAlias_Set(this._instance,t.antiAlias?1:0),t.backgroundColor!==void 0&&t.backgroundColor._use(c=>{l._api._MagickSettings_BackgroundColor_Set(this._instance,c)}),t.colorSpace!==void 0&&l._api._MagickSettings_ColorSpace_Set(this._instance,t.colorSpace),t.colorType!==void 0&&l._api._MagickSettings_ColorType_Set(this._instance,t.colorType),t.compression!==void 0&&l._api._MagickSettings_Compression_Set(this._instance,t.compression),t.debug!==void 0&&l._api._MagickSettings_Debug_Set(this._instance,t.debug?1:0),t.density!==void 0){const c=t.density.toString();F(c,h=>{l._api._MagickSettings_Density_Set(this._instance,h)})}if(t.depth!==void 0&&l._api._MagickSettings_Depth_Set(this._instance,t.depth),t.endian!==void 0&&l._api._MagickSettings_Endian_Set(this._instance,t.endian),t.fillColor!==void 0&&this.setOption("fill",t.fillColor.toString()),t.font!==void 0){const c=Xt._getFontFileName(t.font);F(c,h=>{l._api._MagickSettings_SetFont(this._instance,h)})}t.fontPointsize!==void 0&&l._api._MagickSettings_FontPointsize_Set(this._instance,t.fontPointsize),t.format!==void 0&&F(t.format,c=>{l._api._MagickSettings_Format_Set(this._instance,c)}),t.interlace!==void 0&&l._api._MagickSettings_Interlace_Set(this._instance,t.interlace),t.page!==void 0&&F(t.page.toString(),c=>{l._api._MagickSettings_SetPage(this._instance,c)}),t.strokeColor!==void 0&&this.setOption("stroke",t.strokeColor.toString()),t.strokeWidth!==void 0&&this.setOption("strokeWidth",t.strokeWidth.toString()),t.textInterlineSpacing!==void 0&&this.setOption("interline-spacing",t.textInterlineSpacing.toString());for(const c in t._options)this.setOption(c,t._options[c])}setOption(t,n){F(t,e=>{F(n,c=>{l._api._MagickSettings_SetOption(this._instance,e,c)})})}}class de{_colorFuzz;_drawing=new Lo;_fileName;_onArtifact;_options={};_ping=!1;_quality;get affine(){return this._drawing.affine}set affine(t){this._drawing.affine=t}antiAlias;backgroundColor;get borderColor(){return this._drawing.borderColor}set borderColor(t){this._drawing.borderColor=t}colorSpace;colorType;compression;debug;density;depth;endian;get fillColor(){return this._drawing.fillColor}set fillColor(t){this.setDefineAndArtifact("fill",t?.toString()),this._drawing.fillColor=t}get fillRule(){return this._drawing.fillRule??Oo.Undefined}set fillRule(t){this._drawing.fillRule=t}get font(){return this._drawing.font}set font(t){this._drawing.font=t}get fontPointsize(){return this._drawing.fontPointsize}set fontPointsize(t){this._drawing.fontPointsize=t}format;interlace;page;get strokeColor(){return this._drawing.strokeColor}set strokeColor(t){this._drawing.strokeColor=t}get strokeDashArray(){return this._drawing.strokeDashArray}set strokeDashArray(t){this._drawing.strokeDashArray=t}get strokeDashOffset(){return this._drawing.strokeDashOffset}set strokeDashOffset(t){this._drawing.strokeDashOffset=t}get strokeWidth(){return this._drawing.strokeWidth}set strokeWidth(t){this.setDefineAndArtifact("stroke",t?.toString()),this._drawing.strokeWidth=t}get textAntiAlias(){return this._drawing.textAntiAlias}set textAntiAlias(t){this._drawing.textAntiAlias=t}textInterlineSpacing;get textKerning(){return this._drawing.textKerning}set textKerning(t){this.setDefineAndArtifact("kerning",t?.toString()),this._drawing.textKerning=t}get textGravity(){return this._drawing.textGravity}set textGravity(t){this.setDefineAndArtifact("gravity",Wo(t)),this._drawing.textGravity=t}get textUnderColor(){return this._drawing.textUnderColor}set textUnderColor(t){this._drawing.textUnderColor=t}getDefine(t,n){return n!==void 0?this._options[`${t}:${n}`]??null:this._options[t]??null}removeDefine(t,n){if(n===void 0)delete this._options[t];else{const e=this.parseDefine(t,n);delete this._options[e]}}setDefine(t,n,e){if(e===void 0)this._options[t]=n;else{const c=this.parseDefine(t,n);typeof e=="string"?this._options[c]=e:typeof e=="number"?this._options[c]=e.toString():this._options[c]=e?"true":"false"}}setDefines(t){t.getDefines().forEach(n=>{n!==void 0&&this.setDefine(n.format,n.name,n.value)})}_clone(){const t=new de;return Object.assign(t,this),t}_use(t){const n=new xn(this);return yt._disposeAfterExecution(n,t)}parseDefine(t,n){return t===dt.Unknown?n:`${t}:${n}`}setDefineAndArtifact(t,n){n===void 0?this.removeDefine(t):this.setDefine(t,n),this._onArtifact!==void 0&&this._onArtifact(t,n)}}class wt extends de{constructor(t){super(),Object.assign(this,t)}extractArea;frameIndex;frameCount;height;get syncImageWithExifProfile(){const t=this.getDefine("exif:sync-image");return t===null?!0:t.toLowerCase()==="true"}set syncImageWithExifProfile(t){this.setDefine("exif:sync-image",t.toString())}get syncImageWithTiffProperties(){const t=this.getDefine("tiff:sync-image");return t===null?!0:t.toLowerCase()==="true"}set syncImageWithTiffProperties(t){this.setDefine("tiff:sync-image",t.toString())}width;_use(t){const n=new xn(this),e=this.getSize();if(e!==""&&F(e,c=>{l._api._MagickSettings_SetSize(n._instance,c)}),this.frameIndex!==void 0||this.frameCount!==void 0){const c=this.frameIndex??0,h=this.frameCount??1;l._api._MagickSettings_SetScene(n._instance,c),l._api._MagickSettings_SetNumberScenes(n._instance,h);const d=this.frameCount!==void 0?`${c}-${c+h}`:c.toString();F(d.toString(),k=>{l._api._MagickSettings_SetScenes(n._instance,k)})}return this.extractArea!==void 0&&F(this.extractArea.toString(),c=>{l._api._MagickSettings_Extract_Set(n._instance,c)}),yt._disposeAfterExecution(n,t)}getSize(){return this.width!==void 0&&this.height!==void 0?`${this.width}x${this.height}`:this.width!==void 0?`${this.width}x`:this.height!==void 0?`x${this.height}`:""}}const An={No:1,Riemersma:2};class $o extends oe{constructor(t){const n=l._api._QuantizeSettings_Create(),e=l._api._QuantizeSettings_Dispose;super(n,e),l._api._QuantizeSettings_SetColors(this._instance,t.colors),l._api._QuantizeSettings_SetColorSpace(this._instance,t.colorSpace),l._api._QuantizeSettings_SetDitherMethod(this._instance,t.ditherMethod??An.No),l._api._QuantizeSettings_SetMeasureErrors(this._instance,t.measureErrors?1:0),l._api._QuantizeSettings_SetTreeDepth(this._instance,t.treeDepth)}}class mi{constructor(){this.colors=256,this.colorSpace=A.Undefined,this.ditherMethod=An.Riemersma,this.measureErrors=!1,this.treeDepth=0}colors;colorSpace;ditherMethod;measureErrors;treeDepth;_use(t){const n=new $o(this);return yt._disposeAfterExecution(n,t)}}class Ft{_image;_names=[];constructor(t){this._image=t}setArtifact(t,n){this._names.push(t),this._image.setArtifact(t,n)}static use(t,n){const e=new Ft(t);try{return n(e)}finally{e.dispose()}}dispose(){for(const t of this._names)this._image.removeArtifact(t)}}class Mt extends Array{constructor(){super()}static create(t){const n=Mt.createObject();return t!==void 0&&n.read(t),n}dispose(){let t=this.pop();for(;t!==void 0;)t.dispose(),t=this.pop()}appendHorizontally(t){return this.createImage((n,e)=>l._api._MagickImageCollection_Append(n,0,e.ptr),t)}appendVertically(t){return this.createImage((n,e)=>l._api._MagickImageCollection_Append(n,1,e.ptr),t)}clone(t){return Mt.use(n=>{for(let e=0;e<this.length;e++)n.push(nt._clone(this[e]));return t(n)})}coalesce(){this.replaceImages((t,n)=>l._api._MagickImageCollection_Coalesce(t,n.ptr))}combine(t,n){let e=n,c=A.sRGB;return typeof t=="number"?c=t:e=t,this.createImage((h,d)=>l._api._MagickImageCollection_Combine(h,c,d.ptr),e)}complex(t,n){return Ft.use(this[0],e=>(t._setArtifacts(e),this.createImage((c,h)=>l._api._MagickImageCollection_Complex(c,t.complexOperator,h.ptr),n)))}deconstruct(){this.replaceImages((t,n)=>l._api._MagickImageCollection_Deconstruct(t,n.ptr))}evaluate(t,n){return this.createImage((e,c)=>l._api._MagickImageCollection_Evaluate(e,t,c.ptr),n)}flatten(t){return this.mergeImages(xe.Flatten,t)}fx(t,n,e){this.throwIfEmpty();let c=Y.All,h=e;return typeof n=="number"?c=n:h=n,F(t,d=>this.createImage((k,w)=>l._api._MagickImageCollection_Fx(k,d,c,w.ptr),h))}merge(t){return this.mergeImages(xe.Merge,t)}montage(t,n){return this.throwIfEmpty(),this.attachImages(e=>{const c=t._use(h=>x.use(d=>{const k=l._api._MagickImageCollection_Montage(e,h._instance,d.ptr);return this.checkResult(k,d)}));return Mt._createFromImages(c,this.getSettings(),h=>{const d=t.transparentColor;return d!==void 0&&h.forEach(k=>{k.transparent(d)}),h.merge(n)})})}morph(t){if(this.length<2)throw new z("operation requires at least two images");this.replaceImages((n,e)=>l._api._MagickImageCollection_Morph(n,t,e.ptr))}mosaic(t){return this.mergeImages(xe.Mosaic,t)}optimize(){this.replaceImages((t,n)=>l._api._MagickImageCollection_Optimize(t,n.ptr))}optimizePlus(){this.replaceImages((t,n)=>l._api._MagickImageCollection_OptimizePlus(t,n.ptr))}optimizeTransparency(){this.throwIfEmpty(),this.attachImages(t=>{x.usePointer(n=>{l._api._MagickImageCollection_OptimizeTransparency(t,n)})})}ping(t,n){this.readOrPing(!0,t,n)}polynomial(t,n){return this.createImage((e,c)=>Ge(t,h=>l._api._MagickImageCollection_Polynomial(e,h,t.length,c.ptr)),n)}quantize(t){this.throwIfEmpty();const n=t===void 0?new mi:t;return this.attachImages(e=>{n._use(c=>{x.usePointer(h=>{l._api._MagickImageCollection_Quantize(e,c._instance,h)})})}),n.measureErrors?Re._create(this[0]):null}read(t,n){this.readOrPing(!1,t,n)}remap(t,n){this.throwIfEmpty();const e=n===void 0?new mi:n;this.attachImages(c=>{e._use(h=>{x.use(d=>{l._api._MagickImageCollection_Remap(c,h._instance,t._instance,d.ptr)})})})}resetPage(){this.forEach(t=>{t.resetPage()})}smushHorizontal(t,n){return this.smush(t,!1,n)}smushVertical(t,n){return this.smush(t,!0,n)}trimBounds(){this.mergeImages(xe.Trimbounds,()=>{})}static use(t){const n=Mt.create();return yt._disposeAfterExecution(n,t)}write(t,n){this.throwIfEmpty();let e=0,c=0;const h=this[0],d=this.getSettings();n!==void 0?d.format=t:(n=t,d.format=h.format),x.use(w=>{Rt.use(S=>{d._use(E=>{this.attachImages(C=>{e=l._api._MagickImage_WriteBlob(C,E._instance,S.ptr,w.ptr),c=S.value})})})});const k=new Dn(e,c,n);return yt._disposeAfterExecution(k,k.func)}static _createFromImages(t,n,e){const c=Mt.createObject();return c.addImages(t,n._clone()),e(c)}addImages(t,n){n.format=dt.Unknown;let e=t;for(;e!==0;){const c=l._api._MagickImage_GetNext(e);l._api._MagickImage_SetNext(e,0),this.push(nt._createFromImage(e,n)),e=c}}attachImages(t){try{for(let n=0;n<this.length-1;n++)l._api._MagickImage_SetNext(this[n]._instance,this[n+1]._instance);return t(this[0]._instance)}finally{for(let n=0;n<this.length-1;n++)l._api._MagickImage_SetNext(this[n]._instance,0)}}checkResult(t,n){return n.check(()=>t,()=>(l._api._MagickImageCollection_Dispose(t),0))}static createObject(){return Object.create(Mt.prototype)}createImage(t,n){this.throwIfEmpty();const e=this.attachImages(c=>x.use(h=>{const d=t(c,h);return this.checkResult(d,h)}));return nt._createFromImage(e,this.getSettings())._use(n)}getSettings(){return this[0]._getSettings()._clone()}mergeImages(t,n){return this.createImage((e,c)=>l._api._MagickImageCollection_Merge(e,t,c.ptr),n)}readOrPing(t,n,e){this.dispose(),x.use(c=>{const h=e===void 0?new wt:new wt(e);h._ping=t,typeof n=="string"?(h._fileName=n,h._use(d=>{const k=l._api._MagickImageCollection_ReadFile(d._instance,c.ptr);this.addImages(k,h)})):h._use(d=>{const k=n.byteLength;let w=0;try{w=l._api._malloc(k),l._api.HEAPU8.set(n,w);const S=l._api._MagickImageCollection_ReadBlob(d._instance,w,0,k,c.ptr);this.addImages(S,h)}finally{w!==0&&l._api._free(w)}})})}replaceImages(t){this.throwIfEmpty();const n=this.attachImages(c=>x.use(h=>{const d=t(c,h);return this.checkResult(d,h)})),e=this.getSettings()._clone();this.dispose(),this.addImages(n,e)}smush(t,n,e){return this.createImage((c,h)=>l._api._MagickImageCollection_Smush(c,t,n?1:0,h.ptr),e)}throwIfEmpty(){if(this.length===0)throw new z("operation requires at least one image")}}class st{_value;constructor(t){this._value=t}static _fromQuantum(t){return new st(t/Bt.max*100)}multiply(t){return t*this._value/100}toDouble(){return this._value}toString(){return`${parseFloat(this._value.toFixed(2))}%`}_toQuantum(){return Bt.max*(this._value/100)}}class Uo{static use(t,n,e){const c=l._api._MagickRectangle_Create();try{l._api._MagickRectangle_X_Set(c,n.x),l._api._MagickRectangle_Y_Set(c,n.y);let h=n.width,d=n.height;return n.isPercentage&&(h=new st(n.width).multiply(t.width),d=new st(n.height).multiply(t.height)),l._api._MagickRectangle_Width_Set(c,h),l._api._MagickRectangle_Height_Set(c,d),e(c)}finally{l._api._MagickRectangle_Dispose(c)}}}class zo{static _use(t,n,e){let c=0;try{return c=l._api._OffsetInfo_Create(),l._api._PrimaryInfo_X_Set(c,t),l._api._PrimaryInfo_Y_Set(c,n),e(c)}finally{l._api._free(c)}}}class fn{_values;constructor(){this._values=new Array(7).fill(0)}get(t){return this._values[t]}set(t,n){this._values[t]=n}}class ne{_huPhashes=new Map;_hash="";channel;constructor(t,n,e){if(this.channel=t,typeof e=="number")for(let c=0;c<n.length;c++){const h=new fn;for(let d=0;d<7;d++){const k=l._api._ChannelPerceptualHash_GetHuPhash(e,c,d);h.set(d,k)}this._huPhashes.set(n[c],h)}else this.parseHash(n,e)}huPhash(t,n){if(n<0||n>6)throw new z("Invalid index specified");const e=this._huPhashes.get(t);if(e===void 0)throw new z("Invalid color space specified");return e.get(n)}sumSquaredDistance(t){let n=0;return this._huPhashes.forEach((e,c)=>{for(let h=0;h<7;h++){const d=e.get(h),k=t.huPhash(c,h);n+=(d-k)*(d-k)}}),n}toString(){return this._hash==""&&this.setHash(),this._hash}parseHash(t,n){this._hash=n;let e=0;for(const c of t){const h=new fn;for(let d=0;d<7;d++,e+=5){const k=Number.parseInt(n.substring(e,e+5),16);if(isNaN(k))throw new z("Invalid hash specified");let w=k/ne.powerOfTen(k>>17);k&65536&&(w=-w),h.set(d,w)}this._huPhashes.set(c,h)}}static powerOfTen(t){switch(t){case 2:return 100;case 3:return 1e3;case 4:return 1e4;case 5:return 1e5;case 6:return 1e6;default:return 10}}setHash(){this._hash="",this._huPhashes.forEach(t=>{for(let n=0;n<7;n++){let e=t.get(n),c=0;for(;c<7&&Math.abs(e*10)<65356;)e*=10,c++;c<<=1,c<0&&(c|=1),c=(c<<16)+Math.floor(e<0?-(e-.5):e+.5),this._hash+=c.toString(16)}})}}class Pt{_red;_green;_blue;constructor(t,n,e){if(typeof t=="string"){const c=n??Pt._defaultColorspaces();Pt._validateColorSpaces(c);const h=35*c.length;if(t.length!==3*h)throw new z("Invalid hash size");this._red=new ne(tt.Red,c,t.substring(0,h)),this._blue=new ne(tt.Blue,c,t.substring(h,h+h)),this._green=new ne(tt.Green,c,t.substring(h+h))}else this._red=t,this._green=n,this._blue=e}static _create(t,n,e){if(e===0)throw new z("The native operation failed to create an instance");const c=Pt.createChannel(t,n,e,tt.Red),h=Pt.createChannel(t,n,e,tt.Green),d=Pt.createChannel(t,n,e,tt.Blue);return new Pt(c,h,d)}static _defaultColorspaces(){return[A.XyY,A.HSB]}static _validateColorSpaces(t){if(t.length<1||t.length>6)throw new z("Invalid number of colorspaces, the minimum is 1 and the maximum is 6");if(new Set(t).size!==t.length)throw new z("Specifying the same colorspace more than once is not allowed")}getChannel(t){switch(t){case tt.Red:return this._red;case tt.Green:return this._green;case tt.Blue:return this._blue;default:return null}}sumSquaredDistance(t){const n=t.getChannel(tt.Red),e=t.getChannel(tt.Green),c=t.getChannel(tt.Blue);if(n===null||e===null||c===null)throw new z("The other perceptual hash should contain a red, green and blue channel.");return this._red.sumSquaredDistance(n)+this._green.sumSquaredDistance(e)+this._blue.sumSquaredDistance(c)}toString(){return this._red.toString()+this._green.toString()+this._blue.toString()}static createChannel(t,n,e,c){const h=l._api._PerceptualHash_GetInstance(t._instance,e,c);return new ne(c,n,h)}}class ae extends oe{image;constructor(t){const n=x.usePointer(c=>l._api._PixelCollection_Create(t._instance,c)),e=l._api._PixelCollection_Dispose;super(n,e),this.image=t}static _create(t){return new ae(t)}static _use(t,n){const e=new ae(t);return yt._disposeAfterExecution(e,n)}static _map(t,n,e){const c=new ae(t);try{c.use(0,0,t.width,t.height,n,h=>{e(h)})}finally{c.dispose()}}getArea(t,n,e,c){return x.usePointer(h=>{const d=l._api._PixelCollection_GetArea(this._instance,t,n,e,c,h),k=e*c*this.image.channelCount;return l._api.HEAPU8.subarray(d,d+k)})}getReadOnlyArea(t,n,e,c){return x.usePointer(h=>{const d=l._api._PixelCollection_GetReadOnlyArea(this.image._instance,t,n,e,c,h),k=e*c*this.image.channelCount;return l._api.HEAPU8.subarray(d,d+k)})}getChannelIndex(t){return this.image._channelOffset(t)}getColor(t,n){const e=this.getArea(t,n,1,1),c=Array.from(e),h=this.image._channelOffset(tt.Index);if(h>=0&&c.splice(h,1),c.length===0)return null;if(c.length===1)return new ut(c[0],c[0],c[0]);if(c.length===2)return new ut(c[0],c[0],c[0],c[1]);const d=this.image._channelOffset(tt.Black)>=0,k=this.image._channelOffset(tt.Alpha)>=0;return d?c.length===4||!k?new ut(c[0],c[1],c[2],c[3],Bt.max):new ut(c[0],c[1],c[2],c[3],c[4]):c.length===3||!k?new ut(c[0],c[1],c[2]):new ut(c[0],c[1],c[2],c[3])}getPixel(t,n){return this.getArea(t,n,1,1)}setArea(t,n,e,c,h){x.usePointer(d=>{const k=h instanceof Uint8Array?h:new Uint8Array(h);Go(k,w=>{l._api._PixelCollection_SetArea(this._instance,t,n,e,c,w,k.length,d)})})}setPixel(t,n,e){e instanceof Uint8Array?this.setArea(t,n,1,1,e):this.setArea(t,n,1,1,e)}toByteArray(t,n,e,c,h){return this.use(t,n,e,c,h,d=>{if(d===0)return null;const k=e*c*h.length;return l._api.HEAPU8.slice(d,d+k)})}use(t,n,e,c,h,d){return F(h,k=>x.use(w=>{let S=l._api._PixelCollection_ToByteArray(this._instance,t,n,e,c,k,w.ptr);return w.check(()=>{const E=d(S);return S=l._api._MagickMemory_Relinquish(S),E},()=>(S=l._api._MagickMemory_Relinquish(S),null))}))}}const No={Undefined:0},Ho={Undefined:0};class Vt{constructor(t,n,e){this.x=t,this.y=n,this.z=e}x;y;z;static _create(t){return t===0?new Vt(0,0,0):new Vt(l._api._PrimaryInfo_X_Get(t),l._api._PrimaryInfo_Y_Get(t),l._api._PrimaryInfo_Z_Get(t))}_use(t){let n=0;try{n=l._api._PrimaryInfo_Create(),l._api._PrimaryInfo_X_Set(n,this.x),l._api._PrimaryInfo_Y_Set(n,this.y),l._api._PrimaryInfo_Z_Set(n,this.z),t(n)}finally{l._api._PrimaryInfo_Dispose(n)}}}class jo{channel;depth;entropy;kurtosis;maximum;mean;minimum;skewness;standardDeviation;constructor(t,n){this.channel=t,this.depth=l._api._ChannelStatistics_Depth_Get(n),this.entropy=l._api._ChannelStatistics_Entropy_Get(n),this.kurtosis=l._api._ChannelStatistics_Kurtosis_Get(n),this.maximum=l._api._ChannelStatistics_Maximum_Get(n),this.mean=l._api._ChannelStatistics_Mean_Get(n),this.minimum=l._api._ChannelStatistics_Minimum_Get(n),this.skewness=l._api._ChannelStatistics_Skewness_Get(n),this.standardDeviation=l._api._ChannelStatistics_StandardDeviation_Get(n)}}class Ci{_channels=new Map;get channels(){return Array.from(this._channels.keys())}composite(){return this._channels.get(tt.Composite)}getChannel(t){const n=this._channels.get(t);return n!==void 0?n:null}static _create(t,n,e){const c=new Ci;return t.channels.forEach(h=>{e>>h&1&&c.addChannel(n,h)}),c.addChannel(n,tt.Composite),c}addChannel(t,n){const e=l._api._Statistics_GetInstance(t,n);e!==0&&this._channels.set(n,new jo(n,e))}}class Yo{static toArray(t){if(t===0)return null;const n=l._api._StringInfo_Datum_Get(t),e=l._api._StringInfo_Length_Get(t);return l._api.HEAPU8.subarray(n,n+e)}}class mn{constructor(t){this.error=t}error}class nt extends oe{_settings;_progress;_warning;constructor(t,n){super(t,l._api._MagickImage_Dispose),this._settings=n,this._settings._onArtifact=this.onSettingsArtifactChanged.bind(this)}get animationDelay(){return l._api._MagickImage_AnimationDelay_Get(this._instance)}set animationDelay(t){l._api._MagickImage_AnimationDelay_Set(this._instance,t)}get animationIterations(){return l._api._MagickImage_AnimationIterations_Get(this._instance)}set animationIterations(t){l._api._MagickImage_AnimationIterations_Set(this._instance,t)}get animationTicksPerSecond(){return l._api._MagickImage_AnimationTicksPerSecond_Get(this._instance)}set animationTicksPerSecond(t){l._api._MagickImage_AnimationTicksPerSecond_Set(this._instance,t)}get artifactNames(){const t=[];l._api._MagickImage_ResetArtifactIterator(this._instance);let n=l._api._MagickImage_GetNextArtifactName(this._instance);for(;n!==0;)t.push(l._api.UTF8ToString(n)),n=l._api._MagickImage_GetNextArtifactName(this._instance);return t}get attributeNames(){const t=[];l._api._MagickImage_ResetAttributeIterator(this._instance);let n=l._api._MagickImage_GetNextAttributeName(this._instance);for(;n!==0;)t.push(l._api.UTF8ToString(n)),n=l._api._MagickImage_GetNextAttributeName(this._instance);return t}get backgroundColor(){const t=l._api._MagickImage_BackgroundColor_Get(this._instance);return ut._create(t)}set backgroundColor(t){t._use(n=>{l._api._MagickImage_BackgroundColor_Set(this._instance,n)})}get baseHeight(){return l._api._MagickImage_BaseHeight_Get(this._instance)}get baseWidth(){return l._api._MagickImage_BaseWidth_Get(this._instance)}get blackPointCompensation(){return l._api._MagickImage_BlackPointCompensation_Get(this._instance)===1}set blackPointCompensation(t){l._api._MagickImage_BlackPointCompensation_Set(this._instance,t?1:0)}get borderColor(){const t=l._api._MagickImage_BorderColor_Get(this._instance);return ut._create(t)}set borderColor(t){t._use(n=>{l._api._MagickImage_BorderColor_Set(this._instance,n)})}get boundingBox(){return this.useExceptionPointer(t=>{const n=l._api._MagickImage_BoundingBox_Get(this._instance,t),e=_t._fromRectangle(n);return e.width===0||e.height===0?null:e})}get channelCount(){return l._api._MagickImage_ChannelCount_Get(this._instance)}get channels(){const t=[];return[tt.Red,tt.Green,tt.Blue,tt.Black,tt.Alpha].forEach(n=>{l._api._MagickImage_HasChannel(this._instance,n)&&t.push(n)}),t}get chromaticity(){return new bo(Vt._create(l._api._MagickImage_ChromaRed_Get(this._instance)),Vt._create(l._api._MagickImage_ChromaGreen_Get(this._instance)),Vt._create(l._api._MagickImage_ChromaBlue_Get(this._instance)),Vt._create(l._api._MagickImage_ChromaWhite_Get(this._instance)))}set chromaticity(t){t.blue._use(n=>l._api._MagickImage_ChromaBlue_Set(this._instance,n)),t.green._use(n=>l._api._MagickImage_ChromaGreen_Set(this._instance,n)),t.red._use(n=>l._api._MagickImage_ChromaRed_Set(this._instance,n)),t.white._use(n=>l._api._MagickImage_ChromaWhite_Set(this._instance,n))}get classType(){return l._api._MagickImage_ClassType_Get(this._instance)}set classType(t){this.useExceptionPointer(n=>{l._api._MagickImage_ClassType_Set(this._instance,t,n)})}get colorFuzz(){return st._fromQuantum(l._api._MagickImage_ColorFuzz_Get(this._instance))}set colorFuzz(t){const n=t._toQuantum();l._api._MagickImage_ColorFuzz_Set(this._instance,n),this._settings._colorFuzz=n}get colormapSize(){return l._api._MagickImage_ColormapSize_Get(this._instance)}set colormapSize(t){this.useExceptionPointer(n=>{l._api._MagickImage_ColormapSize_Set(this._instance,t,n)})}get colorSpace(){return l._api._MagickImage_ColorSpace_Get(this._instance)}set colorSpace(t){this.useExceptionPointer(n=>{l._api._MagickImage_ColorSpace_Set(this._instance,t,n)})}get colorType(){return this.settings.colorType!==void 0?this.settings.colorType:l._api._MagickImage_ColorType_Get(this._instance)}set colorType(t){this.useExceptionPointer(n=>{l._api._MagickImage_ColorType_Set(this._instance,t,n)})}get comment(){return this.getAttribute("comment")}set comment(t){t===null?this.removeAttribute("comment"):this.setAttribute("comment",t)}get compose(){return l._api._MagickImage_Compose_Get(this._instance)}set compose(t){l._api._MagickImage_Compose_Set(this._instance,t)}get compression(){return l._api._MagickImage_Compression_Get(this._instance)}get density(){return new pe(l._api._MagickImage_ResolutionX_Get(this._instance),l._api._MagickImage_ResolutionY_Get(this._instance),l._api._MagickImage_ResolutionUnits_Get(this._instance))}set density(t){l._api._MagickImage_ResolutionX_Set(this._instance,t.x),l._api._MagickImage_ResolutionY_Set(this._instance,t.y),l._api._MagickImage_ResolutionUnits_Set(this._instance,t.units)}get depth(){return l._api._MagickImage_Depth_Get(this._instance)}set depth(t){l._api._MagickImage_Depth_Set(this._instance,t)}get endian(){return l._api._MagickImage_Endian_Get(this._instance)}set endian(t){l._api._MagickImage_Endian_Set(this._instance,t)}get fileName(){const t=l._api._MagickImage_FileName_Get(this._instance);return t===0?null:l._api.UTF8ToString(t)}get filterType(){return l._api._MagickImage_FilterType_Get(this._instance)}set filterType(t){l._api._MagickImage_FilterType_Set(this._instance,t)}get format(){return pt(l._api._MagickImage_Format_Get(this._instance),"")}set format(t){F(t.toString(),n=>l._api._MagickImage_Format_Set(this._instance,n))}get gamma(){return l._api._MagickImage_Gamma_Get(this._instance)}get gifDisposeMethod(){return l._api._MagickImage_GifDisposeMethod_Get(this._instance)}set gifDisposeMethod(t){l._api._MagickImage_GifDisposeMethod_Set(this._instance,t)}get hasAlpha(){return this.toBool(l._api._MagickImage_HasAlpha_Get(this._instance))}set hasAlpha(t){this.useExceptionPointer(n=>{t&&this.alpha(Po.Opaque),l._api._MagickImage_HasAlpha_Set(this._instance,this.fromBool(t),n)})}get height(){return l._api._MagickImage_Height_Get(this._instance)}get interlace(){return l._api._MagickImage_Interlace_Get(this._instance)}get isOpaque(){return this.useExceptionPointer(t=>this.toBool(l._api._MagickImage_IsOpaque_Get(this._instance,t)))}get interpolate(){return l._api._MagickImage_Interpolate_Get(this._instance)}set interpolate(t){l._api._MagickImage_Interpolate_Set(this._instance,t)}get label(){return this.getAttribute("label")}set label(t){t===null?this.removeAttribute("label"):this.setAttribute("label",t)}get matteColor(){const t=l._api._MagickImage_MatteColor_Get(this._instance);return ut._create(t)}set matteColor(t){t._use(n=>{l._api._MagickImage_MatteColor_Set(this._instance,n)})}get metaChannelCount(){return l._api._MagickImage_MetaChannelCount_Get(this._instance)}set metaChannelCount(t){this.useExceptionPointer(n=>{l._api._MagickImage_MetaChannelCount_Set(this._instance,t,n)})}get orientation(){return l._api._MagickImage_Orientation_Get(this._instance)}set orientation(t){l._api._MagickImage_Orientation_Set(this._instance,t)}get onProgress(){return this._progress}set onProgress(t){t!==void 0?lt.setProgressDelegate(this):this.disposeProgressDelegate(),this._progress=t}get onWarning(){return this._warning}set onWarning(t){this._warning=t}get page(){const t=l._api._MagickImage_Page_Get(this._instance);return _t._fromRectangle(t)}set page(t){t._toRectangle(n=>{l._api._MagickImage_Page_Set(this._instance,n)})}get profileNames(){const t=[];l._api._MagickImage_ResetProfileIterator(this._instance);let n=l._api._MagickImage_GetNextProfileName(this._instance);for(;n!==0;)t.push(l._api.UTF8ToString(n)),n=l._api._MagickImage_GetNextProfileName(this._instance);return t}get quality(){return l._api._MagickImage_Quality_Get(this._instance)}set quality(t){let n=t<1?1:t;n=n>100?100:n,l._api._MagickImage_Quality_Set(this._instance,n),this._settings._quality=n}get renderingIntent(){return l._api._MagickImage_RenderingIntent_Get(this._instance)}set renderingIntent(t){l._api._MagickImage_RenderingIntent_Set(this._instance,t)}get settings(){return this._settings}get signature(){return this.useExceptionPointer(t=>pt(l._api._MagickImage_Signature_Get(this._instance,t)))}get totalColors(){return this.useExceptionPointer(t=>l._api._MagickImage_TotalColors_Get(this._instance,t))}get virtualPixelMethod(){return l._api._MagickImage_VirtualPixelMethod_Get(this._instance)}set virtualPixelMethod(t){this.useExceptionPointer(n=>{l._api._MagickImage_VirtualPixelMethod_Set(this._instance,t,n)})}get width(){return l._api._MagickImage_Width_Get(this._instance)}adaptiveBlur(t,n){const e=this.valueOrDefault(t,0),c=this.valueOrDefault(n,1);this.useException(h=>{const d=l._api._MagickImage_AdaptiveBlur(this._instance,e,c,h.ptr);this._setInstance(d,h)})}adaptiveResize(t,n){const e=typeof t=="number"?new _t(0,0,t,n):t;this.useException(c=>{F(e.toString(),h=>{const d=l._api._MagickImage_AdaptiveResize(this._instance,h,c.ptr);this._setInstance(d,c)})})}adaptiveSharpen(t,n,e){let c=0;const h=n??1;let d=e??Y.Undefined;t!==void 0&&(n===void 0?d=t:c=t),this.useException(k=>{const w=l._api._MagickImage_AdaptiveSharpen(this._instance,c,h,d,k.ptr);this._setInstance(w,k)})}adaptiveThreshold(t,n,e,c){const h=e instanceof st?e._toQuantum():0;let d=c??Y.Undefined;typeof e=="number"&&(d=e),this.useException(k=>{const w=l._api._MagickImage_AdaptiveThreshold(this._instance,t,n,h,d,k.ptr);this._setInstance(w,k)})}addNoise(t,n,e){let c=1,h=e??Y.Undefined;n!==void 0&&(e===void 0?h=n:c=n),this.useException(d=>{const k=l._api._MagickImage_AddNoise(this._instance,t,c,h,d.ptr);this._setInstance(k,d)})}affineTransform(t){this.useException(n=>{const e=l._api._MagickImage_AffineTransform(this._instance,t.scaleX,t.scaleY,t.shearX,t.shearY,t.translateX,t.translateY,n.ptr);this._setInstance(e,n)})}alpha(t){this.useExceptionPointer(n=>{l._api._MagickImage_SetAlpha(this._instance,t,n)})}annotate(t,n,e,c){return this.useExceptionPointer(h=>this._settings._drawing._use(d=>{F(t,k=>{let w=null,S=et.Undefined,E=0;typeof n=="object"?(w=n.toString(),e!==void 0&&(S=e),c!==void 0&&(E=c)):(S=n,e!==void 0&&(E=e)),F(w,C=>{l._api._MagickImage_Annotate(this._instance,d._instance,k,C,S,E,h)})})}))}autoGamma(t){this.useExceptionPointer(n=>{const e=this.valueOrDefault(t,Y.Composite);l._api._MagickImage_AutoGamma(this._instance,e,n)})}autoLevel(t){this.useExceptionPointer(n=>{const e=this.valueOrDefault(t,Y.Undefined);l._api._MagickImage_AutoLevel(this._instance,e,n)})}autoOrient(){this.useException(t=>{const n=l._api._MagickImage_AutoOrient(this._instance,t.ptr);this._setInstance(n,t)})}autoThreshold(t){this.useException(n=>{l._api._MagickImage_AutoThreshold(this._instance,t,n.ptr)})}bilateralBlur(t,n,e,c){const h=this.valueOrComputedDefault(e,()=>Math.sqrt(t*t+n*n)),d=this.valueOrDefault(c,h*.25);this.useException(k=>{const w=l._api._MagickImage_BilateralBlur(this._instance,t,n,h,d,k.ptr);this._setInstance(w,k)})}blackThreshold(t,n){const e=this.valueOrDefault(n,Y.Composite);this.useException(c=>{F(t.toString(),h=>{l._api._MagickImage_BlackThreshold(this._instance,h,e,c.ptr)})})}blueShift(t){const n=this.valueOrDefault(t,1.5);this.useException(e=>{const c=l._api._MagickImage_BlueShift(this._instance,n,e.ptr);this._setInstance(c,e)})}blur(t,n,e){let c=0;const h=this.valueOrDefault(n,1);let d=this.valueOrDefault(e,Y.Undefined);t!==void 0&&(n===void 0?d=t:c=t),this.useException(k=>{const w=l._api._MagickImage_Blur(this._instance,c,h,d,k.ptr);this._setInstance(w,k)})}border(t,n){const e=t,c=this.valueOrDefault(n,t),h=new _t(0,0,e,c);this.useException(d=>{h._toRectangle(k=>{const w=l._api._MagickImage_Border(this._instance,k,d.ptr);this._setInstance(w,d)})})}brightnessContrast(t,n,e){const c=this.valueOrDefault(e,Y.Undefined);this.useException(h=>{l._api._MagickImage_BrightnessContrast(this._instance,t.toDouble(),n.toDouble(),c,h.ptr)})}cannyEdge(t,n,e,c){const h=this.valueOrDefault(t,0),d=this.valueOrDefault(n,1),k=this.valueOrDefault(e,new st(10)).toDouble()/100,w=this.valueOrDefault(c,new st(30)).toDouble()/100;this.useException(S=>{const E=l._api._MagickImage_CannyEdge(this._instance,h,d,k,w,S.ptr);this._setInstance(E,S)})}charcoal(t,n){const e=t===void 0?0:t,c=n===void 0?1:n;this.useException(h=>{const d=l._api._MagickImage_Charcoal(this._instance,e,c,h.ptr);this._setInstance(d,h)})}chop(t){this.useException(n=>{t._toRectangle(e=>{const c=l._api._MagickImage_Chop(this._instance,e,n.ptr);this._setInstance(c,n)})})}chopHorizontal(t,n){this.chop(new _t(t,0,n,0))}chopVertical(t,n){this.chop(new _t(0,t,0,n))}clahe(t,n,e,c){this.useExceptionPointer(h=>{const d=t instanceof st?t.multiply(this.width):t,k=n instanceof st?n.multiply(this.height):n;l._api._MagickImage_Clahe(this._instance,d,k,e,c,h)})}clone(t){return nt._clone(this)._use(t)}cloneArea(t,n){return x.usePointer(e=>t._toRectangle(c=>zo._use(0,0,h=>{const d=l._api._MagickImage_CloneArea(this._instance,t.width,t.height,e);l._api._MagickImage_CopyPixels(d,this._instance,c,h,Y.Undefined,e);const k=new nt(d,this._settings);return n(k)})))}clut(t,n,e){const c=this.valueOrDefault(n,Ho.Undefined),h=this.valueOrDefault(e,Y.Undefined);this.useExceptionPointer(d=>{l._api._MagickImage_Clut(this._instance,t._instance,c,h,d)})}colorAlpha(t){if(!this.hasAlpha)return;const n=nt.create();n.read(t,this.width,this.height),n.composite(this,ri.SrcOver,new Gt(0,0)),this._instance=n._instance}compare(t,n,e,c){const h=n instanceof Ao,d=h?n.metric:n;let k=e;c!==void 0&&(k=c);let w=Y.Undefined;if(typeof k!="function")return k!==void 0&&(w=k),this.useExceptionPointer(E=>l._api._MagickImage_CompareDistortion(this._instance,t._instance,d,w,E));e!==void 0&&typeof e!="function"&&(w=e);const S=Ft.use(this,E=>(h&&n._setArtifacts(E),Ii.use(C=>{const K=this.useExceptionPointer(V=>l._api._MagickImage_Compare(this._instance,t._instance,d,w,C.ptr,V)),Q=C.value,W=nt._createFromImage(K,this._settings);return yi._create(Q,W)})));return S.difference._use(()=>k(S))}composite(t,n,e,c,h){let d=0,k=0,w=ri.In,S=Y.All,E=null;n instanceof Gt?(d=n.x,k=n.y):n!==void 0&&(w=n),e instanceof Gt?(d=e.x,k=e.y):typeof e=="string"?E=e:e!==void 0&&(S=e),typeof c=="string"?E=c:c!==void 0&&(S=c),h!==void 0&&(S=h),E!==null&&this.setArtifact("compose:args",E),this.useExceptionPointer(C=>{l._api._MagickImage_Composite(this._instance,t._instance,d,k,w,S,C)}),E!==null&&this.removeArtifact("compose:args")}compositeGravity(t,n,e,c,h,d){let k=0,w=0,S=ri.In,E=Y.All,C=null;e instanceof Gt?(k=e.x,w=e.y):e!==void 0&&(S=e),c instanceof Gt?(k=c.x,w=c.y):typeof c=="string"?C=c:c!==void 0&&(E=c),typeof h=="string"?C=h:h!==void 0&&(E=h),d!==void 0&&(E=d),C!==null&&this.setArtifact("compose:args",C),this.useExceptionPointer(K=>{l._api._MagickImage_CompositeGravity(this._instance,t._instance,n,k,w,S,E,K)}),C!==null&&this.removeArtifact("compose:args")}connectedComponents(t){const n=typeof t=="number"?new Fo(t):t;return Ft.use(this,e=>(n._setArtifacts(e),this.useException(c=>Rt.use(h=>{try{const d=l._api._MagickImage_ConnectedComponents(this._instance,n.connectivity,h.ptr,c.ptr);return this._setInstance(d,c),Mi._create(h.value,this.colormapSize)}finally{h.value!==0&&l._api._ConnectedComponent_DisposeList(h.value)}}))))}contrast=()=>this.contrastPrivate(!0);contrastStretch(t,n,e){const c=this.width*this.height,h=t.multiply(c);let d=0,k=this.valueOrDefault(e,Y.Undefined);n instanceof st?d=c-n.multiply(c):(d=c-t.multiply(c),n!==void 0&&(k=n)),this.useExceptionPointer(w=>{l._api._MagickImage_ContrastStretch(this._instance,h,d,k,w)})}static create(t,n,e){const c=new nt(nt.createInstance(),new de);return t!==void 0&&c.readOrPing(!1,t,n,e),c}crop(t,n,e){let c,h;typeof t!="number"?(c=t,h=this.valueOrDefault(n,et.Undefined)):n!==void 0&&(c=new _t(t,n),h=this.valueOrDefault(e,et.Undefined)),this.useException(d=>{F(c.toString(),k=>{const w=l._api._MagickImage_Crop(this._instance,k,h,d.ptr);this._setInstance(w,d)})})}cropToTiles(t,n,e){let c,h;return typeof t=="number"&&typeof n=="number"&&e!==void 0?(c=new _t(0,0,t,n),h=e):typeof t!="number"&&typeof n!="number"&&(c=t,h=n),this.useException(d=>F(c.toString(),k=>{const w=l._api._MagickImage_CropToTiles(this._instance,k,d.ptr);return Mt._createFromImages(w,this._settings,S=>h(S))}))}cycleColormap(t){this.useExceptionPointer(n=>{l._api._MagickImage_CycleColormap(this._instance,t,n)})}deskew(t,n){return Ft.use(this,e=>{n!==void 0&&e.setArtifact("deskew:auto-crop",n),this.useException(h=>{const d=l._api._MagickImage_Deskew(this._instance,t._toQuantum(),h.ptr);this._setInstance(d,h)});const c=Number(this.getArtifact("deskew:angle"));return isNaN(c)?0:c})}distort(t,n){Ft.use(this,e=>{let c,h=0;typeof t=="number"?c=t:(c=t.method,h=t.bestFit?1:0,t._setArtifacts(e)),this.useException(d=>{Ge(n,k=>{const w=l._api._MagickImage_Distort(this._instance,c,h,k,n.length,d.ptr);this._setInstance(w,d)})})})}draw(...t){const n=t.flat();n.length!==0&&Si._use(this,e=>{e.draw(n)})}evaluate(t,n,e,c){if(typeof n=="number"){const h=n,d=typeof e=="number"?e:e._toQuantum();this.useExceptionPointer(k=>{l._api._MagickImage_EvaluateOperator(this._instance,t,h,d,k)})}else if(c!==void 0){if(typeof e!="number")throw new z("this should not happen");const h=n,d=e,k=typeof c=="number"?c:c._toQuantum();if(h.isPercentage)throw new z("percentage is not supported");this.useExceptionPointer(w=>{Uo.use(this,h,S=>{l._api._MagickImage_EvaluateGeometry(this._instance,t,S,d,k,w)})})}}extent(t,n,e){let c=et.Undefined,h;typeof t!="number"?h=t:typeof n=="number"&&(h=new _t(t,n)),typeof n=="number"?c=n:n!==void 0&&(this.backgroundColor=n),typeof e=="number"?c=e:e!==void 0&&(this.backgroundColor=e),this.useException(d=>{F(h.toString(),k=>{const w=l._api._MagickImage_Extent(this._instance,k,c,d.ptr);this._setInstance(w,d)})})}flip(){this.useException(t=>{const n=l._api._MagickImage_Flip(this._instance,t.ptr);this._setInstance(n,t)})}floodFill(t,n,e,c){this.floodFillPrivate(t,n,e,c,!1)}flop(){this.useException(t=>{const n=l._api._MagickImage_Flop(this._instance,t.ptr);this._setInstance(n,t)})}formatExpression(t){return this.useExceptionPointer(n=>this._settings._use(e=>F(t,c=>{const h=l._api._MagickImage_FormatExpression(this._instance,e._instance,c,n);return To(l._api,h)})))}gammaCorrect(t,n){const e=this.valueOrDefault(n,Y.Undefined);this.useExceptionPointer(c=>{l._api._MagickImage_GammaCorrect(this._instance,t,e,c)})}gaussianBlur(t,n,e){const c=this.valueOrDefault(n,1),h=this.valueOrDefault(e,Y.Undefined);this.useException(d=>{const k=l._api._MagickImage_GaussianBlur(this._instance,t,c,h,d.ptr);this._setInstance(k,d)})}getArtifact(t){return F(t,n=>{const e=l._api._MagickImage_GetArtifact(this._instance,n);return pt(e)})}getAttribute(t){return this.useException(n=>F(t,e=>{const c=l._api._MagickImage_GetAttribute(this._instance,e,n.ptr);return pt(c)}))}getColormapColor(t){const n=l._api._MagickImage_GetColormapColor(this._instance,t);return n===0?null:ut._create(n)}getColorProfile(){const t=["icc","icm"];for(const n of t){const e=this.getProfilePrivate(n);if(e!==null)return new xo(e)}return null}getPixels(t){if(this._settings._ping)throw new z("image contains no pixel data");return ae._use(this,t)}getProfile(t){const n=this.getProfilePrivate(t);return n===null?null:new bn(t,n)}getWriteMask(t){const n=this.useExceptionPointer(c=>l._api._MagickImage_GetWriteMask(this._instance,c)),e=n===0?null:new nt(n,new de);return e==null?t(e):e._use(t)}grayscale(t=No.Undefined){this.useExceptionPointer(n=>{l._api._MagickImage_Grayscale(this._instance,t,n)})}hasProfile(t){return F(t,n=>this.toBool(l._api._MagickImage_HasProfile(this._instance,n)))}histogram(){const t=new Map;return this.useExceptionPointer(n=>{Rt.use(e=>{const c=l._api._MagickImage_Histogram(this._instance,e.ptr,n);if(c!==0){const h=e.value;for(let d=0;d<h;d++){const k=l._api._MagickColorCollection_GetInstance(c,d),w=ut._create(k),S=l._api._MagickColor_Count_Get(k);t.set(w.toString(),S)}l._api._MagickColorCollection_DisposeList(c)}})}),t}inverseContrast=()=>this.contrastPrivate(!1);inverseFloodFill(t,n,e,c){this.floodFillPrivate(t,n,e,c,!0)}inverseLevel(t,n,e,c){const h=this.valueOrDefault(e,1),d=this.valueOrDefault(c,Y.Composite);this.useExceptionPointer(k=>{l._api._MagickImage_InverseLevel(this._instance,t.toDouble(),n._toQuantum(),h,d,k)})}inverseOpaque=(t,n)=>this.opaquePrivate(t,n,!0);inverseSigmoidalContrast(t,n,e){this.sigmoidalContrastPrivate(!1,t,n,e)}inverseTransparent=t=>this.transparentPrivate(t,!0);level(t,n,e,c){const h=this.valueOrDefault(e,1),d=this.valueOrDefault(c,Y.Composite);this.useExceptionPointer(k=>{l._api._MagickImage_Level(this._instance,t.toDouble(),n._toQuantum(),h,d,k)})}linearStretch(t,n){this.useExceptionPointer(e=>{l._api._MagickImage_LinearStretch(this._instance,t.toDouble(),n._toQuantum(),e)})}liquidRescale(t,n){const e=typeof t=="number"?new _t(t,n):t;this.useException(c=>{F(e.toString(),h=>{const d=l._api._MagickImage_LiquidRescale(this._instance,h,e.x,e.y,c.ptr);this._setInstance(d,c)})})}negate(t){this.useExceptionPointer(n=>{const e=this.valueOrDefault(t,Y.Undefined);l._api._MagickImage_Negate(this._instance,0,e,n)})}negateGrayScale(t){this.useExceptionPointer(n=>{const e=this.valueOrDefault(t,Y.Undefined);l._api._MagickImage_Negate(this._instance,1,e,n)})}normalize(){this.useExceptionPointer(t=>{l._api._MagickImage_Normalize(this._instance,t)})}modulate(t,n,e){const c=this.valueOrDefault(n,new st(100)),h=this.valueOrDefault(e,new st(100));this.useExceptionPointer(d=>{const k=`${t.toDouble()}/${c.toDouble()}/${h.toDouble()}`;F(k,w=>{l._api._MagickImage_Modulate(this._instance,w,d)})})}morphology(t){this.useException(n=>{F(t.kernel,e=>{const c=l._api._MagickImage_Morphology(this._instance,t.method,e,t.channels,t.iterations,n.ptr);this._setInstance(c,n)})})}motionBlur(t,n,e){this.useException(c=>{const h=l._api._MagickImage_MotionBlur(this._instance,t,n,e,c.ptr);this._setInstance(h,c)})}oilPaint(t){const n=this.valueOrDefault(t,3),e=0;this.useException(c=>{const h=l._api._MagickImage_OilPaint(this._instance,n,e,c.ptr);this._setInstance(h,c)})}opaque=(t,n)=>this.opaquePrivate(t,n,!1);ping(t,n){this.readOrPing(!0,t,n)}perceptualHash(t){const n=this.valueOrDefault(t,Pt._defaultColorspaces());return Pt._validateColorSpaces(n),Ft.use(this,e=>{const c=n.map(h=>un[h]).join(",");return e.setArtifact("phash:colorspaces",c),this.useExceptionPointer(h=>{const d=l._api._MagickImage_PerceptualHash(this._instance,h);try{return Pt._create(this,n,d)}finally{l._api._PerceptualHash_DisposeList(d)}})})}quantize(t){const n=this.valueOrDefault(t,new mi);return this.useException(e=>{n._use(c=>{l._api._MagickImage_Quantize(this._instance,c._instance,e.ptr)})}),n.measureErrors?Re._create(this):null}read(t,n,e){this.readOrPing(!1,t,n,e)}readFromCanvas(t,n){const e=t.getContext("2d",n);if(e===null)return;const c=e.getImageData(0,0,t.width,t.height),h=new wt;h.format=dt.Rgba,h.width=t.width,h.height=t.height,this.useException(d=>{this.readFromArray(c.data,h,d)})}removeArtifact(t){F(t,n=>{l._api._MagickImage_RemoveArtifact(this._instance,n)})}removeAttribute(t){F(t,n=>{l._api._MagickImage_RemoveAttribute(this._instance,n)})}removeProfile(t){const n=typeof t=="string"?t:t.name;F(n,e=>{l._api._MagickImage_RemoveProfile(this._instance,e)})}removeWriteMask(){this.useExceptionPointer(t=>{l._api._MagickImage_SetWriteMask(this._instance,0,t)})}resetPage(){this.page=new _t(0,0,0,0)}resize(t,n,e){let c=this.filterType,h;typeof t=="number"?(h=new _t(t,n),e!==void 0&&(c=e)):(h=t,n!==void 0&&(c=n)),this.useException(d=>{F(h.toString(),k=>{const w=l._api._MagickImage_Resize(this._instance,k,c,d.ptr);this._setInstance(w,d)})})}roll(t,n){this.useException(e=>{const c=l._api._MagickImage_Roll(this._instance,t,n,e.ptr);this._setInstance(c,e)})}rotate(t){this.useException(n=>{const e=l._api._MagickImage_Rotate(this._instance,t,n.ptr);this._setInstance(e,n)})}separate(t,n){return this.useException(e=>{let c,h=Y.Undefined;if(typeof t=="number"&&n!==void 0)h=t,c=n;else if(typeof t=="function")c=t;else throw new z("invalid arguments");const d=l._api._MagickImage_Separate(this._instance,h,e.ptr);return Mt._createFromImages(d,this._settings,k=>c(k))})}sepiaTone(t=new st(80)){this.useException(n=>{const e=typeof t=="number"?new st(t):t,c=l._api._MagickImage_SepiaTone(this._instance,e._toQuantum(),n.ptr);this._setInstance(c,n)})}setArtifact(t,n){let e;typeof n=="string"?e=n:typeof n=="boolean"?e=this.fromBool(n).toString():e=n.toString(),F(t,c=>{F(e,h=>{l._api._MagickImage_SetArtifact(this._instance,c,h)})})}setAttribute(t,n){this.useException(e=>{F(t,c=>{F(n,h=>{l._api._MagickImage_SetAttribute(this._instance,c,h,e.ptr)})})})}setProfile(t,n){const e=typeof t=="string"?t:t.name;let c;n!==void 0?c=n:typeof t!="string"&&(c=t.data),this.useException(h=>{F(e,d=>{dn(c,k=>{l._api._MagickImage_SetProfile(this._instance,d,k,c.byteLength,h.ptr)})})})}setWriteMask(t){this.useExceptionPointer(n=>{l._api._MagickImage_SetWriteMask(this._instance,t._instance,n)})}sharpen(t,n,e){const c=this.valueOrDefault(t,0),h=this.valueOrDefault(n,1),d=this.valueOrDefault(e,Y.Undefined);this.useException(k=>{const w=l._api._MagickImage_Sharpen(this._instance,c,h,d,k.ptr);this._setInstance(w,k)})}shave(t,n){this.useException(e=>{const c=l._api._MagickImage_Shave(this._instance,t,n,e.ptr);this._setInstance(c,e)})}sigmoidalContrast(t,n,e){this.sigmoidalContrastPrivate(!0,t,n,e)}solarize(t=new st(50)){this.useException(n=>{const e=typeof t=="number"?new st(t):t;l._api._MagickImage_Solarize(this._instance,e._toQuantum(),n.ptr)})}splice(t,n){const e=this.valueOrDefault(n,et.Undefined);F(t.toString(),c=>{this.useException(h=>{const d=l._api._MagickImage_Splice(this._instance,c,e,h.ptr);this._setInstance(d,h)})})}statistics(t){const n=this.valueOrDefault(t,Y.All);return this.useExceptionPointer(e=>{const c=l._api._MagickImage_Statistics(this._instance,n,e),h=Ci._create(this,c,n);return l._api._Statistics_DisposeList(c),h})}strip(){this.useExceptionPointer(t=>{l._api._MagickImage_Strip(this._instance,t)})}transformColorSpace(t,n,e){const c=t;let h,d=pn.Quantum;n!==void 0&&(typeof n=="number"?d=n:h=n),e!==void 0&&(d=e);const k=this.hasProfile("icc")||this.hasProfile("icm");if(h===void 0){if(!k)return!1;h=c}else{if(c.colorSpace!==this.colorSpace)return!1;k||this.setProfile(c)}return d===pn.Quantum?Ft.use(this,w=>{w.setArtifact("profile:highres-transform",!1),this.setProfile(h)}):this.setProfile(h),!0}threshold(t,n){const e=this.valueOrDefault(n,Y.Undefined);this.useExceptionPointer(c=>{l._api._MagickImage_Threshold(this._instance,t._toQuantum(),e,c)})}thumbnail(t,n){const e=typeof t=="number"?new _t(t,n):t;this.useException(c=>{F(e.toString(),h=>{const d=l._api._MagickImage_Thumbnail(this._instance,h,c.ptr);this._setInstance(d,c)})})}toString=()=>`${this.format} ${this.width}x${this.height} ${this.depth}-bit ${un[this.colorSpace]}`;transparent(t){t._use(n=>{this.useExceptionPointer(e=>{l._api._MagickImage_Transparent(this._instance,n,0,e)})})}trim(...t){if(t.length>0)if(t.length==1&&t[0]instanceof st){const n=t[0];this.setArtifact("trim:percent-background",n.toDouble().toString())}else{const n=t,e=[...new Set(Ro(n))].join(",");this.setArtifact("trim:edges",e)}this.useException(n=>{const e=l._api._MagickImage_Trim(this._instance,n.ptr);this._setInstance(e,n),this.removeArtifact("trim:edges"),this.removeArtifact("trim:percent-background")})}wave(t,n,e){const c=this.valueOrDefault(t,this.interpolate),h=this.valueOrDefault(n,25),d=this.valueOrDefault(e,150);this.useException(k=>{const w=l._api._MagickImage_Wave(this._instance,c,h,d,k.ptr);this._setInstance(w,k)})}vignette(t,n,e,c){const h=this.valueOrDefault(t,0),d=this.valueOrDefault(n,1),k=this.valueOrDefault(e,0),w=this.valueOrDefault(c,0);this.useException(S=>{const E=l._api._MagickImage_Vignette(this._instance,h,d,k,w,S.ptr);this._setInstance(E,S)})}whiteThreshold(t,n){const e=this.valueOrDefault(n,Y.Composite);this.useException(c=>{F(t.toString(),h=>{l._api._MagickImage_WhiteThreshold(this._instance,h,e,c.ptr)})})}write(t,n){let e=0,c=0;n!==void 0?this._settings.format=t:n=t,this.useException(d=>{Rt.use(k=>{this._settings._use(w=>{try{e=l._api._MagickImage_WriteBlob(this._instance,w._instance,k.ptr,d.ptr),c=k.value}catch{e!==0&&(e=l._api._MagickMemory_Relinquish(e))}})})});const h=new Dn(e,c,n);return yt._disposeAfterExecution(h,h.func)}writeToCanvas(t,n){t.width=this.width,t.height=this.height;const e=t.getContext("2d",n);e!==null&&ae._map(this,"RGBA",c=>{const h=e.createImageData(this.width,this.height);let d=0;for(let k=0;k<this.height;k++)for(let w=0;w<this.width;w++)h.data[d++]=l._api.HEAPU8[c++],h.data[d++]=l._api.HEAPU8[c++],h.data[d++]=l._api.HEAPU8[c++],h.data[d++]=l._api.HEAPU8[c++];e.putImageData(h,0,0)})}static _createFromImage(t,n){return new nt(t,n)}_channelOffset(t){return l._api._MagickImage_HasChannel(this._instance,t)?l._api._MagickImage_ChannelOffset(this._instance,t):-1}static _clone(t){return x.usePointer(n=>new nt(l._api._MagickImage_Clone(t._instance,n),t._settings._clone()))}_getSettings(){return this._settings}_instanceNotInitialized(){throw new z("no image has been read")}_setInstance(t,n){if(super._setInstance(t,n)===!0||t===0&&this.onProgress!==void 0)return!0;throw new z("out of memory")}_use(t){return yt._disposeAfterExecution(this,t)}static _create(t){return nt.create()._use(t)}onDispose(){this.disposeProgressDelegate()}contrastPrivate(t){this.useExceptionPointer(n=>{l._api._MagickImage_Contrast(this._instance,this.fromBool(t),n)})}static createInstance(){return x.usePointer(t=>l._api._MagickImage_Create(0,t))}disposeProgressDelegate(){lt.removeProgressDelegate(this),this._progress=void 0}floodFillPrivate(t,n,e,c,h){let d=c;d===void 0&&this.getPixels(k=>{const w=k.getColor(n,e);w!==null&&(d=w)}),typeof t=="number"&&d!==void 0&&(d.a=t),this.settings._drawing._use(k=>{t instanceof ut?(k.setFillColor(t),k.setFillPattern()):t instanceof nt&&(k.setFillColor(),k.setFillPattern(t)),this.useExceptionPointer(w=>{d!==void 0?d._use(S=>{l._api._MagickImage_FloodFill(this._instance,k._instance,n,e,S,this.fromBool(h),w)}):l._api._MagickImage_FloodFill(this._instance,k._instance,n,e,0,this.fromBool(h),w)})})}fromBool(t){return t?1:0}getProfilePrivate(t){return F(t,n=>{const e=l._api._MagickImage_GetProfile(this._instance,n),c=Yo.toArray(e);return c===null?null:c})}onSettingsArtifactChanged(t,n){n===void 0?this.removeArtifact(t):this.setArtifact(t,n)}opaquePrivate(t,n,e){this.useExceptionPointer(c=>{t._use(h=>{n._use(d=>{l._api._MagickImage_Opaque(this._instance,h,d,this.fromBool(e),c)})})})}readOrPing(t,n,e,c){this.useException(h=>{const d=e instanceof wt?e:new wt(this._settings);if(d._ping=t,this._settings._ping=t,d.frameCount!==void 0&&d.frameCount>1)throw new z("The frame count can only be set to 1 when a single image is being read.");if(typeof n=="string")d._fileName=n;else if(Pn(n)){this.readFromArray(n,d,h);return}else d._fileName="xc:"+n.toShortString(),d.width=typeof e=="number"?e:0,d.height=typeof c=="number"?c:0;d._use(k=>{const w=l._api._MagickImage_ReadFile(k._instance,h.ptr);this._setInstance(w,h)})})}readFromArray(t,n,e){n._use(c=>{dn(t,h=>{const d=l._api._MagickImage_ReadBlob(c._instance,h,0,t.byteLength,e.ptr);this._setInstance(d,e)})})}sigmoidalContrastPrivate(t,n,e,c){let h;e!==void 0?typeof e=="number"?h=e:h=e.multiply(Bt.max):h=Bt.max*.5;const d=this.valueOrDefault(c,Y.Undefined);this.useExceptionPointer(k=>{l._api._MagickImage_SigmoidalContrast(this._instance,this.fromBool(t),n,h,d,k)})}toBool(t){return t===1}transparentPrivate(t,n){t._use(e=>{this.useExceptionPointer(c=>{l._api._MagickImage_Transparent(this._instance,e,this.fromBool(n),c)})})}valueOrDefault(t,n){return t===void 0?n:t}valueOrComputedDefault(t,n){return t===void 0?n():t}useException(t){return x.use(t,n=>{this.onWarning!==void 0&&this.onWarning(new mn(n))})}useExceptionPointer(t){return x.usePointer(t,n=>{this.onWarning!==void 0&&this.onWarning(new mn(n))})}}var Vo=(()=>{var u=import.meta.url;return async function(t={}){var n,e=t,c,h,d=new Promise((i,r)=>{c=i,h=r}),k=typeof window=="object",w=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",(!globalThis.crypto||!globalThis.crypto.getRandomValues)&&(globalThis.crypto={getRandomValues:i=>{for(let r=0;r<i.length;r++)i[r]=Math.random()*256|0}});var S="./this.program",E=(i,r)=>{throw r},C="";function K(i){return e.locateFile?e.locateFile(i,C):C+i}var Q,W;(k||w)&&(w?C=self.location.href:typeof document<"u"&&document.currentScript&&(C=document.currentScript.src),u&&(C=u),C.startsWith("blob:")?C="":C=C.slice(0,C.replace(/[?#].*/,"").lastIndexOf("/")+1),w&&(W=i=>{var r=new XMLHttpRequest;return r.open("GET",i,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),Q=async i=>{if(Di(i))return new Promise((a,o)=>{var _=new XMLHttpRequest;_.open("GET",i,!0),_.responseType="arraybuffer",_.onload=()=>{if(_.status==200||_.status==0&&_.response){a(_.response);return}o(_.status)},_.onerror=o,_.send(null)});var r=await fetch(i,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw new Error(r.status+" : "+r.url)});var V=console.log.bind(console),ot=console.error.bind(console),Ot,fe,We=!1,X,ht,ft,ce,D,B,me,gt,bi,ke,Di=i=>i.startsWith("file://");function Ei(){var i=fe.buffer;X=new Int8Array(i),ft=new Int16Array(i),e.HEAPU8=ht=new Uint8Array(i),ce=new Uint16Array(i),D=new Int32Array(i),B=new Uint32Array(i),me=new Float32Array(i),ke=new Float64Array(i),gt=new BigInt64Array(i),bi=new BigUint64Array(i)}function $n(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Jn(e.preRun.shift());Ai(Fi)}function Un(){!e.noFSInit&&!g.initialized&&g.init(),s.db(),g.ignorePermissions=!1}function zn(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Qn(e.postRun.shift());Ai(Ti)}var $t=0,_e=null;function xi(i){$t++,e.monitorRunDependencies?.($t)}function Be(i){if($t--,e.monitorRunDependencies?.($t),$t==0&&_e){var r=_e;_e=null,r()}}function le(i){e.onAbort?.(i),i="Aborted("+i+")",ot(i),We=!0,i+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(i);throw h(r),r}var Le;function Nn(){return e.locateFile?K("magick.wasm"):new URL("data:text/plain;base64,").href}function Hn(i){if(i==Le&&Ot)return new Uint8Array(Ot);if(W)return W(i);throw"both async and sync fetching of the wasm failed"}async function jn(i){if(!Ot)try{var r=await Q(i);return new Uint8Array(r)}catch{}return Hn(i)}async function Yn(i,r){try{var a=await jn(i),o=await WebAssembly.instantiate(a,r);return o}catch(_){ot(`failed to asynchronously prepare wasm: ${_}`),le(_)}}async function Vn(i,r,a){if(!i&&typeof WebAssembly.instantiateStreaming=="function"&&!Di(r))try{var o=fetch(r,{credentials:"same-origin"}),_=await WebAssembly.instantiateStreaming(o,a);return _}catch(p){ot(`wasm streaming compile failed: ${p}`),ot("falling back to ArrayBuffer instantiation")}return Yn(r,a)}function Xn(){return{a:Ws}}async function qn(){function i(p,f){return s=p.exports,s=So(s),fe=s.cb,Ei(),Ut=s.xb,Be(),s}xi();function r(p){return i(p.instance)}var a=Xn();if(e.instantiateWasm)return new Promise((p,f)=>{e.instantiateWasm(a,(m,y)=>{p(i(m))})});Le??=Nn();try{var o=await Vn(Ot,Le,a),_=r(o);return _}catch(p){return h(p),Promise.reject(p)}}class Kn{name="ExitStatus";constructor(r){this.message=`Program terminated with exit(${r})`,this.status=r}}var Ai=i=>{for(;i.length>0;)i.shift()(e)},Ti=[],Qn=i=>Ti.push(i),Fi=[],Jn=i=>Fi.push(i);function Zn(i,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":return X[i>>>0];case"i8":return X[i>>>0];case"i16":return ft[i>>>1>>>0];case"i32":return D[i>>>2>>>0];case"i64":return gt[i>>>3];case"float":return me[i>>>2>>>0];case"double":return ke[i>>>3>>>0];case"*":return B[i>>>2>>>0];default:le(`invalid type for getValue: ${r}`)}}var Oe=!0;function tr(i,r,a="i8"){switch(a.endsWith("*")&&(a="*"),a){case"i1":X[i>>>0]=r;break;case"i8":X[i>>>0]=r;break;case"i16":ft[i>>>1>>>0]=r;break;case"i32":D[i>>>2>>>0]=r;break;case"i64":gt[i>>>3]=BigInt(r);break;case"float":me[i>>>2>>>0]=r;break;case"double":ke[i>>>3>>>0]=r;break;case"*":B[i>>>2>>>0]=r;break;default:le(`invalid type for setValue: ${a}`)}}var O=i=>$s(i),$=()=>Us(),er=9007199254740992,ir=-9007199254740992,bt=i=>i<ir||i>er?NaN:Number(i),$e=[],Ut,L=i=>{var r=$e[i];return r||($e[i]=r=Ut.get(i)),r};function nr(i,r){return i>>>=0,L(i)(r)}var Qt=0;class Gi{constructor(r){this.excPtr=r,this.ptr=r-24}set_type(r){B[this.ptr+4>>>2>>>0]=r}get_type(){return B[this.ptr+4>>>2>>>0]}set_destructor(r){B[this.ptr+8>>>2>>>0]=r}get_destructor(){return B[this.ptr+8>>>2>>>0]}set_caught(r){r=r?1:0,X[this.ptr+12>>>0]=r}get_caught(){return X[this.ptr+12>>>0]!=0}set_rethrown(r){r=r?1:0,X[this.ptr+13>>>0]=r}get_rethrown(){return X[this.ptr+13>>>0]!=0}init(r,a){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(a)}set_adjusted_ptr(r){B[this.ptr+16>>>2>>>0]=r}get_adjusted_ptr(){return B[this.ptr+16>>>2>>>0]}}var we=i=>Os(i),rr=i=>{var r=Qt;if(!r)return we(0),0;var a=new Gi(r);a.set_adjusted_ptr(r);var o=a.get_type();if(!o)return we(0),r;for(var _ of i){if(_===0||_===o)break;var p=a.ptr+16;if(zs(_,o,p))return we(_),r}return we(o),r};function ar(){return rr([])}function sr(i,r,a){i>>>=0,r>>>=0,a>>>=0;var o=new Gi(i);throw o.init(r,a),Qt=i,Qt}function or(i){throw i>>>=0,Qt||(Qt=i),Qt}var j={isAbs:i=>i.charAt(0)==="/",splitPath:i=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(i).slice(1)},normalizeArray:(i,r)=>{for(var a=0,o=i.length-1;o>=0;o--){var _=i[o];_==="."?i.splice(o,1):_===".."?(i.splice(o,1),a++):a&&(i.splice(o,1),a--)}if(r)for(;a;a--)i.unshift("..");return i},normalize:i=>{var r=j.isAbs(i),a=i.slice(-1)==="/";return i=j.normalizeArray(i.split("/").filter(o=>!!o),!r).join("/"),!i&&!r&&(i="."),i&&a&&(i+="/"),(r?"/":"")+i},dirname:i=>{var r=j.splitPath(i),a=r[0],o=r[1];return!a&&!o?".":(o&&(o=o.slice(0,-1)),a+o)},basename:i=>i&&i.match(/([^\/]+|\/)\/*$/)[1],join:(...i)=>j.normalize(i.join("/")),join2:(i,r)=>j.normalize(i+"/"+r)},cr=()=>i=>crypto.getRandomValues(i),Ue=i=>{(Ue=cr())(i)},Jt={resolve:(...i)=>{for(var r="",a=!1,o=i.length-1;o>=-1&&!a;o--){var _=o>=0?i[o]:g.cwd();if(typeof _!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!_)return"";r=_+"/"+r,a=j.isAbs(_)}return r=j.normalizeArray(r.split("/").filter(p=>!!p),!a).join("/"),(a?"/":"")+r||"."},relative:(i,r)=>{i=Jt.resolve(i).slice(1),r=Jt.resolve(r).slice(1);function a(M){for(var v=0;v<M.length&&M[v]==="";v++);for(var I=M.length-1;I>=0&&M[I]==="";I--);return v>I?[]:M.slice(v,I-v+1)}for(var o=a(i.split("/")),_=a(r.split("/")),p=Math.min(o.length,_.length),f=p,m=0;m<p;m++)if(o[m]!==_[m]){f=m;break}for(var y=[],m=f;m<o.length;m++)y.push("..");return y=y.concat(_.slice(f)),y.join("/")}},Ri=typeof TextDecoder<"u"?new TextDecoder:void 0,Zt=(i,r=0,a=NaN)=>{r>>>=0;for(var o=r+a,_=r;i[_]&&!(_>=o);)++_;if(_-r>16&&i.buffer&&Ri)return Ri.decode(i.subarray(r,_));for(var p="";r<_;){var f=i[r++];if(!(f&128)){p+=String.fromCharCode(f);continue}var m=i[r++]&63;if((f&224)==192){p+=String.fromCharCode((f&31)<<6|m);continue}var y=i[r++]&63;if((f&240)==224?f=(f&15)<<12|m<<6|y:f=(f&7)<<18|m<<12|y<<6|i[r++]&63,f<65536)p+=String.fromCharCode(f);else{var M=f-65536;p+=String.fromCharCode(55296|M>>10,56320|M&1023)}}return p},ze=[],zt=i=>{for(var r=0,a=0;a<i.length;++a){var o=i.charCodeAt(a);o<=127?r++:o<=2047?r+=2:o>=55296&&o<=57343?(r+=4,++a):r+=3}return r},Ne=(i,r,a,o)=>{if(a>>>=0,!(o>0))return 0;for(var _=a,p=a+o-1,f=0;f<i.length;++f){var m=i.charCodeAt(f);if(m>=55296&&m<=57343){var y=i.charCodeAt(++f);m=65536+((m&1023)<<10)|y&1023}if(m<=127){if(a>=p)break;r[a++>>>0]=m}else if(m<=2047){if(a+1>=p)break;r[a++>>>0]=192|m>>6,r[a++>>>0]=128|m&63}else if(m<=65535){if(a+2>=p)break;r[a++>>>0]=224|m>>12,r[a++>>>0]=128|m>>6&63,r[a++>>>0]=128|m&63}else{if(a+3>=p)break;r[a++>>>0]=240|m>>18,r[a++>>>0]=128|m>>12&63,r[a++>>>0]=128|m>>6&63,r[a++>>>0]=128|m&63}}return r[a>>>0]=0,a-_},Wi=(i,r,a)=>{var o=zt(i)+1,_=new Array(o),p=Ne(i,_,0,_.length);return _.length=p,_},_r=()=>{if(!ze.length){var i=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(i=window.prompt("Input: "),i!==null&&(i+=`
`)),!i)return null;ze=Wi(i)}return ze.shift()},Nt={ttys:[],init(){},shutdown(){},register(i,r){Nt.ttys[i]={input:[],output:[],ops:r},g.registerDevice(i,Nt.stream_ops)},stream_ops:{open(i){var r=Nt.ttys[i.node.rdev];if(!r)throw new g.ErrnoError(43);i.tty=r,i.seekable=!1},close(i){i.tty.ops.fsync(i.tty)},fsync(i){i.tty.ops.fsync(i.tty)},read(i,r,a,o,_){if(!i.tty||!i.tty.ops.get_char)throw new g.ErrnoError(60);for(var p=0,f=0;f<o;f++){var m;try{m=i.tty.ops.get_char(i.tty)}catch{throw new g.ErrnoError(29)}if(m===void 0&&p===0)throw new g.ErrnoError(6);if(m==null)break;p++,r[a+f]=m}return p&&(i.node.atime=Date.now()),p},write(i,r,a,o,_){if(!i.tty||!i.tty.ops.put_char)throw new g.ErrnoError(60);try{for(var p=0;p<o;p++)i.tty.ops.put_char(i.tty,r[a+p])}catch{throw new g.ErrnoError(29)}return o&&(i.node.mtime=i.node.ctime=Date.now()),p}},default_tty_ops:{get_char(i){return _r()},put_char(i,r){r===null||r===10?(V(Zt(i.output)),i.output=[]):r!=0&&i.output.push(r)},fsync(i){i.output?.length>0&&(V(Zt(i.output)),i.output=[])},ioctl_tcgets(i){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(i,r,a){return 0},ioctl_tiocgwinsz(i){return[24,80]}},default_tty1_ops:{put_char(i,r){r===null||r===10?(ot(Zt(i.output)),i.output=[]):r!=0&&i.output.push(r)},fsync(i){i.output?.length>0&&(ot(Zt(i.output)),i.output=[])}}},lr=(i,r)=>ht.fill(0,i,i+r),Bi=(i,r)=>Math.ceil(i/r)*r,Li=i=>{i=Bi(i,65536);var r=Ls(65536,i);return r&&lr(r,i),r},R={ops_table:null,mount(i){return R.createNode(null,"/",16895,0)},createNode(i,r,a,o){if(g.isBlkdev(a)||g.isFIFO(a))throw new g.ErrnoError(63);R.ops_table||={dir:{node:{getattr:R.node_ops.getattr,setattr:R.node_ops.setattr,lookup:R.node_ops.lookup,mknod:R.node_ops.mknod,rename:R.node_ops.rename,unlink:R.node_ops.unlink,rmdir:R.node_ops.rmdir,readdir:R.node_ops.readdir,symlink:R.node_ops.symlink},stream:{llseek:R.stream_ops.llseek}},file:{node:{getattr:R.node_ops.getattr,setattr:R.node_ops.setattr},stream:{llseek:R.stream_ops.llseek,read:R.stream_ops.read,write:R.stream_ops.write,mmap:R.stream_ops.mmap,msync:R.stream_ops.msync}},link:{node:{getattr:R.node_ops.getattr,setattr:R.node_ops.setattr,readlink:R.node_ops.readlink},stream:{}},chrdev:{node:{getattr:R.node_ops.getattr,setattr:R.node_ops.setattr},stream:g.chrdev_stream_ops}};var _=g.createNode(i,r,a,o);return g.isDir(_.mode)?(_.node_ops=R.ops_table.dir.node,_.stream_ops=R.ops_table.dir.stream,_.contents={}):g.isFile(_.mode)?(_.node_ops=R.ops_table.file.node,_.stream_ops=R.ops_table.file.stream,_.usedBytes=0,_.contents=null):g.isLink(_.mode)?(_.node_ops=R.ops_table.link.node,_.stream_ops=R.ops_table.link.stream):g.isChrdev(_.mode)&&(_.node_ops=R.ops_table.chrdev.node,_.stream_ops=R.ops_table.chrdev.stream),_.atime=_.mtime=_.ctime=Date.now(),i&&(i.contents[r]=_,i.atime=i.mtime=i.ctime=_.atime),_},getFileDataAsTypedArray(i){return i.contents?i.contents.subarray?i.contents.subarray(0,i.usedBytes):new Uint8Array(i.contents):new Uint8Array(0)},expandFileStorage(i,r){var a=i.contents?i.contents.length:0;if(!(a>=r)){var o=1048576;r=Math.max(r,a*(a<o?2:1.125)>>>0),a!=0&&(r=Math.max(r,256));var _=i.contents;i.contents=new Uint8Array(r),i.usedBytes>0&&i.contents.set(_.subarray(0,i.usedBytes),0)}},resizeFileStorage(i,r){if(i.usedBytes!=r)if(r==0)i.contents=null,i.usedBytes=0;else{var a=i.contents;i.contents=new Uint8Array(r),a&&i.contents.set(a.subarray(0,Math.min(r,i.usedBytes))),i.usedBytes=r}},node_ops:{getattr(i){var r={};return r.dev=g.isChrdev(i.mode)?i.id:1,r.ino=i.id,r.mode=i.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=i.rdev,g.isDir(i.mode)?r.size=4096:g.isFile(i.mode)?r.size=i.usedBytes:g.isLink(i.mode)?r.size=i.link.length:r.size=0,r.atime=new Date(i.atime),r.mtime=new Date(i.mtime),r.ctime=new Date(i.ctime),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(i,r){for(const a of["mode","atime","mtime","ctime"])r[a]!=null&&(i[a]=r[a]);r.size!==void 0&&R.resizeFileStorage(i,r.size)},lookup(i,r){throw R.doesNotExistError},mknod(i,r,a,o){return R.createNode(i,r,a,o)},rename(i,r,a){var o;try{o=g.lookupNode(r,a)}catch{}if(o){if(g.isDir(i.mode))for(var _ in o.contents)throw new g.ErrnoError(55);g.hashRemoveNode(o)}delete i.parent.contents[i.name],r.contents[a]=i,i.name=a,r.ctime=r.mtime=i.parent.ctime=i.parent.mtime=Date.now()},unlink(i,r){delete i.contents[r],i.ctime=i.mtime=Date.now()},rmdir(i,r){var a=g.lookupNode(i,r);for(var o in a.contents)throw new g.ErrnoError(55);delete i.contents[r],i.ctime=i.mtime=Date.now()},readdir(i){return[".","..",...Object.keys(i.contents)]},symlink(i,r,a){var o=R.createNode(i,r,41471,0);return o.link=a,o},readlink(i){if(!g.isLink(i.mode))throw new g.ErrnoError(28);return i.link}},stream_ops:{read(i,r,a,o,_){var p=i.node.contents;if(_>=i.node.usedBytes)return 0;var f=Math.min(i.node.usedBytes-_,o);if(f>8&&p.subarray)r.set(p.subarray(_,_+f),a);else for(var m=0;m<f;m++)r[a+m]=p[_+m];return f},write(i,r,a,o,_,p){if(r.buffer===X.buffer&&(p=!1),!o)return 0;var f=i.node;if(f.mtime=f.ctime=Date.now(),r.subarray&&(!f.contents||f.contents.subarray)){if(p)return f.contents=r.subarray(a,a+o),f.usedBytes=o,o;if(f.usedBytes===0&&_===0)return f.contents=r.slice(a,a+o),f.usedBytes=o,o;if(_+o<=f.usedBytes)return f.contents.set(r.subarray(a,a+o),_),o}if(R.expandFileStorage(f,_+o),f.contents.subarray&&r.subarray)f.contents.set(r.subarray(a,a+o),_);else for(var m=0;m<o;m++)f.contents[_+m]=r[a+m];return f.usedBytes=Math.max(f.usedBytes,_+o),o},llseek(i,r,a){var o=r;if(a===1?o+=i.position:a===2&&g.isFile(i.node.mode)&&(o+=i.node.usedBytes),o<0)throw new g.ErrnoError(28);return o},mmap(i,r,a,o,_){if(!g.isFile(i.node.mode))throw new g.ErrnoError(43);var p,f,m=i.node.contents;if(!(_&2)&&m&&m.buffer===X.buffer)f=!1,p=m.byteOffset;else{if(f=!0,p=Li(r),!p)throw new g.ErrnoError(48);m&&((a>0||a+r<m.length)&&(m.subarray?m=m.subarray(a,a+r):m=Array.prototype.slice.call(m,a,a+r)),X.set(m,p>>>0))}return{ptr:p,allocated:f}},msync(i,r,a,o,_){return R.stream_ops.write(i,r,0,o,a,!1),0}}},hr=async i=>{var r=await Q(i);return new Uint8Array(r)},gr=(i,r,a,o,_,p)=>{g.createDataFile(i,r,a,o,_,p)},Oi=[],ur=(i,r,a,o)=>{typeof Browser<"u"&&Browser.init();var _=!1;return Oi.forEach(p=>{_||p.canHandle(r)&&(p.handle(i,r,a,o),_=!0)}),_},pr=(i,r,a,o,_,p,f,m,y,M)=>{var v=r?Jt.resolve(j.join2(i,r)):i;function I(b){function P(T){M?.(),m||gr(i,r,T,o,_,y),p?.(),Be()}ur(b,v,P,()=>{f?.(),Be()})||P(b)}xi(),typeof a=="string"?hr(a).then(I,f):I(a)},dr=i=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},a=r[i];if(typeof a>"u")throw new Error(`Unknown file open mode: ${i}`);return a},He=(i,r)=>{var a=0;return i&&(a|=365),r&&(a|=146),a},g={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(i){this.errno=i}},FSStream:class{shared={};get object(){return this.node}set object(i){this.node=i}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(i){this.shared.flags=i}get position(){return this.shared.position}set position(i){this.shared.position=i}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(i,r,a,o){i||(i=this),this.parent=i,this.mount=i.mount,this.id=g.nextInode++,this.name=r,this.mode=a,this.rdev=o,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(i){i?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(i){i?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return g.isDir(this.mode)}get isDevice(){return g.isChrdev(this.mode)}},lookupPath(i,r={}){if(!i)throw new g.ErrnoError(44);r.follow_mount??=!0,j.isAbs(i)||(i=g.cwd()+"/"+i);t:for(var a=0;a<40;a++){for(var o=i.split("/").filter(M=>!!M),_=g.root,p="/",f=0;f<o.length;f++){var m=f===o.length-1;if(m&&r.parent)break;if(o[f]!=="."){if(o[f]===".."){if(p=j.dirname(p),g.isRoot(_)){i=p+"/"+o.slice(f+1).join("/");continue t}else _=_.parent;continue}p=j.join2(p,o[f]);try{_=g.lookupNode(_,o[f])}catch(M){if(M?.errno===44&&m&&r.noent_okay)return{path:p};throw M}if(g.isMountpoint(_)&&(!m||r.follow_mount)&&(_=_.mounted.root),g.isLink(_.mode)&&(!m||r.follow)){if(!_.node_ops.readlink)throw new g.ErrnoError(52);var y=_.node_ops.readlink(_);j.isAbs(y)||(y=j.dirname(p)+"/"+y),i=y+"/"+o.slice(f+1).join("/");continue t}}}return{path:p,node:_}}throw new g.ErrnoError(32)},getPath(i){for(var r;;){if(g.isRoot(i)){var a=i.mount.mountpoint;return r?a[a.length-1]!=="/"?`${a}/${r}`:a+r:a}r=r?`${i.name}/${r}`:i.name,i=i.parent}},hashName(i,r){for(var a=0,o=0;o<r.length;o++)a=(a<<5)-a+r.charCodeAt(o)|0;return(i+a>>>0)%g.nameTable.length},hashAddNode(i){var r=g.hashName(i.parent.id,i.name);i.name_next=g.nameTable[r],g.nameTable[r]=i},hashRemoveNode(i){var r=g.hashName(i.parent.id,i.name);if(g.nameTable[r]===i)g.nameTable[r]=i.name_next;else for(var a=g.nameTable[r];a;){if(a.name_next===i){a.name_next=i.name_next;break}a=a.name_next}},lookupNode(i,r){var a=g.mayLookup(i);if(a)throw new g.ErrnoError(a);for(var o=g.hashName(i.id,r),_=g.nameTable[o];_;_=_.name_next){var p=_.name;if(_.parent.id===i.id&&p===r)return _}return g.lookup(i,r)},createNode(i,r,a,o){var _=new g.FSNode(i,r,a,o);return g.hashAddNode(_),_},destroyNode(i){g.hashRemoveNode(i)},isRoot(i){return i===i.parent},isMountpoint(i){return!!i.mounted},isFile(i){return(i&61440)===32768},isDir(i){return(i&61440)===16384},isLink(i){return(i&61440)===40960},isChrdev(i){return(i&61440)===8192},isBlkdev(i){return(i&61440)===24576},isFIFO(i){return(i&61440)===4096},isSocket(i){return(i&49152)===49152},flagsToPermissionString(i){var r=["r","w","rw"][i&3];return i&512&&(r+="w"),r},nodePermissions(i,r){return g.ignorePermissions?0:r.includes("r")&&!(i.mode&292)||r.includes("w")&&!(i.mode&146)||r.includes("x")&&!(i.mode&73)?2:0},mayLookup(i){if(!g.isDir(i.mode))return 54;var r=g.nodePermissions(i,"x");return r||(i.node_ops.lookup?0:2)},mayCreate(i,r){if(!g.isDir(i.mode))return 54;try{var a=g.lookupNode(i,r);return 20}catch{}return g.nodePermissions(i,"wx")},mayDelete(i,r,a){var o;try{o=g.lookupNode(i,r)}catch(p){return p.errno}var _=g.nodePermissions(i,"wx");if(_)return _;if(a){if(!g.isDir(o.mode))return 54;if(g.isRoot(o)||g.getPath(o)===g.cwd())return 10}else if(g.isDir(o.mode))return 31;return 0},mayOpen(i,r){return i?g.isLink(i.mode)?32:g.isDir(i.mode)&&(g.flagsToPermissionString(r)!=="r"||r&576)?31:g.nodePermissions(i,g.flagsToPermissionString(r)):44},checkOpExists(i,r){if(!i)throw new g.ErrnoError(r);return i},MAX_OPEN_FDS:4096,nextfd(){for(var i=0;i<=g.MAX_OPEN_FDS;i++)if(!g.streams[i])return i;throw new g.ErrnoError(33)},getStreamChecked(i){var r=g.getStream(i);if(!r)throw new g.ErrnoError(8);return r},getStream:i=>g.streams[i],createStream(i,r=-1){return i=Object.assign(new g.FSStream,i),r==-1&&(r=g.nextfd()),i.fd=r,g.streams[r]=i,i},closeStream(i){g.streams[i]=null},dupStream(i,r=-1){var a=g.createStream(i,r);return a.stream_ops?.dup?.(a),a},doSetAttr(i,r,a){var o=i?.stream_ops.setattr,_=o?i:r;o??=r.node_ops.setattr,g.checkOpExists(o,63),o(_,a)},chrdev_stream_ops:{open(i){var r=g.getDevice(i.node.rdev);i.stream_ops=r.stream_ops,i.stream_ops.open?.(i)},llseek(){throw new g.ErrnoError(70)}},major:i=>i>>8,minor:i=>i&255,makedev:(i,r)=>i<<8|r,registerDevice(i,r){g.devices[i]={stream_ops:r}},getDevice:i=>g.devices[i],getMounts(i){for(var r=[],a=[i];a.length;){var o=a.pop();r.push(o),a.push(...o.mounts)}return r},syncfs(i,r){typeof i=="function"&&(r=i,i=!1),g.syncFSRequests++,g.syncFSRequests>1&&ot(`warning: ${g.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var a=g.getMounts(g.root.mount),o=0;function _(f){return g.syncFSRequests--,r(f)}function p(f){if(f)return p.errored?void 0:(p.errored=!0,_(f));++o>=a.length&&_(null)}a.forEach(f=>{if(!f.type.syncfs)return p(null);f.type.syncfs(f,i,p)})},mount(i,r,a){var o=a==="/",_=!a,p;if(o&&g.root)throw new g.ErrnoError(10);if(!o&&!_){var f=g.lookupPath(a,{follow_mount:!1});if(a=f.path,p=f.node,g.isMountpoint(p))throw new g.ErrnoError(10);if(!g.isDir(p.mode))throw new g.ErrnoError(54)}var m={type:i,opts:r,mountpoint:a,mounts:[]},y=i.mount(m);return y.mount=m,m.root=y,o?g.root=y:p&&(p.mounted=m,p.mount&&p.mount.mounts.push(m)),y},unmount(i){var r=g.lookupPath(i,{follow_mount:!1});if(!g.isMountpoint(r.node))throw new g.ErrnoError(28);var a=r.node,o=a.mounted,_=g.getMounts(o);Object.keys(g.nameTable).forEach(f=>{for(var m=g.nameTable[f];m;){var y=m.name_next;_.includes(m.mount)&&g.destroyNode(m),m=y}}),a.mounted=null;var p=a.mount.mounts.indexOf(o);a.mount.mounts.splice(p,1)},lookup(i,r){return i.node_ops.lookup(i,r)},mknod(i,r,a){var o=g.lookupPath(i,{parent:!0}),_=o.node,p=j.basename(i);if(!p)throw new g.ErrnoError(28);if(p==="."||p==="..")throw new g.ErrnoError(20);var f=g.mayCreate(_,p);if(f)throw new g.ErrnoError(f);if(!_.node_ops.mknod)throw new g.ErrnoError(63);return _.node_ops.mknod(_,p,r,a)},statfs(i){return g.statfsNode(g.lookupPath(i,{follow:!0}).node)},statfsStream(i){return g.statfsNode(i.node)},statfsNode(i){var r={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:g.nextInode,ffree:g.nextInode-1,fsid:42,flags:2,namelen:255};return i.node_ops.statfs&&Object.assign(r,i.node_ops.statfs(i.mount.opts.root)),r},create(i,r=438){return r&=4095,r|=32768,g.mknod(i,r,0)},mkdir(i,r=511){return r&=1023,r|=16384,g.mknod(i,r,0)},mkdirTree(i,r){var a=i.split("/"),o="";for(var _ of a)if(_){(o||j.isAbs(i))&&(o+="/"),o+=_;try{g.mkdir(o,r)}catch(p){if(p.errno!=20)throw p}}},mkdev(i,r,a){return typeof a>"u"&&(a=r,r=438),r|=8192,g.mknod(i,r,a)},symlink(i,r){if(!Jt.resolve(i))throw new g.ErrnoError(44);var a=g.lookupPath(r,{parent:!0}),o=a.node;if(!o)throw new g.ErrnoError(44);var _=j.basename(r),p=g.mayCreate(o,_);if(p)throw new g.ErrnoError(p);if(!o.node_ops.symlink)throw new g.ErrnoError(63);return o.node_ops.symlink(o,_,i)},rename(i,r){var a=j.dirname(i),o=j.dirname(r),_=j.basename(i),p=j.basename(r),f,m,y;if(f=g.lookupPath(i,{parent:!0}),m=f.node,f=g.lookupPath(r,{parent:!0}),y=f.node,!m||!y)throw new g.ErrnoError(44);if(m.mount!==y.mount)throw new g.ErrnoError(75);var M=g.lookupNode(m,_),v=Jt.relative(i,o);if(v.charAt(0)!==".")throw new g.ErrnoError(28);if(v=Jt.relative(r,a),v.charAt(0)!==".")throw new g.ErrnoError(55);var I;try{I=g.lookupNode(y,p)}catch{}if(M!==I){var b=g.isDir(M.mode),P=g.mayDelete(m,_,b);if(P)throw new g.ErrnoError(P);if(P=I?g.mayDelete(y,p,b):g.mayCreate(y,p),P)throw new g.ErrnoError(P);if(!m.node_ops.rename)throw new g.ErrnoError(63);if(g.isMountpoint(M)||I&&g.isMountpoint(I))throw new g.ErrnoError(10);if(y!==m&&(P=g.nodePermissions(m,"w"),P))throw new g.ErrnoError(P);g.hashRemoveNode(M);try{m.node_ops.rename(M,y,p),M.parent=y}catch(T){throw T}finally{g.hashAddNode(M)}}},rmdir(i){var r=g.lookupPath(i,{parent:!0}),a=r.node,o=j.basename(i),_=g.lookupNode(a,o),p=g.mayDelete(a,o,!0);if(p)throw new g.ErrnoError(p);if(!a.node_ops.rmdir)throw new g.ErrnoError(63);if(g.isMountpoint(_))throw new g.ErrnoError(10);a.node_ops.rmdir(a,o),g.destroyNode(_)},readdir(i){var r=g.lookupPath(i,{follow:!0}),a=r.node,o=g.checkOpExists(a.node_ops.readdir,54);return o(a)},unlink(i){var r=g.lookupPath(i,{parent:!0}),a=r.node;if(!a)throw new g.ErrnoError(44);var o=j.basename(i),_=g.lookupNode(a,o),p=g.mayDelete(a,o,!1);if(p)throw new g.ErrnoError(p);if(!a.node_ops.unlink)throw new g.ErrnoError(63);if(g.isMountpoint(_))throw new g.ErrnoError(10);a.node_ops.unlink(a,o),g.destroyNode(_)},readlink(i){var r=g.lookupPath(i),a=r.node;if(!a)throw new g.ErrnoError(44);if(!a.node_ops.readlink)throw new g.ErrnoError(28);return a.node_ops.readlink(a)},stat(i,r){var a=g.lookupPath(i,{follow:!r}),o=a.node,_=g.checkOpExists(o.node_ops.getattr,63);return _(o)},fstat(i){var r=g.getStreamChecked(i),a=r.node,o=r.stream_ops.getattr,_=o?r:a;return o??=a.node_ops.getattr,g.checkOpExists(o,63),o(_)},lstat(i){return g.stat(i,!0)},doChmod(i,r,a,o){g.doSetAttr(i,r,{mode:a&4095|r.mode&-4096,ctime:Date.now(),dontFollow:o})},chmod(i,r,a){var o;if(typeof i=="string"){var _=g.lookupPath(i,{follow:!a});o=_.node}else o=i;g.doChmod(null,o,r,a)},lchmod(i,r){g.chmod(i,r,!0)},fchmod(i,r){var a=g.getStreamChecked(i);g.doChmod(a,a.node,r,!1)},doChown(i,r,a){g.doSetAttr(i,r,{timestamp:Date.now(),dontFollow:a})},chown(i,r,a,o){var _;if(typeof i=="string"){var p=g.lookupPath(i,{follow:!o});_=p.node}else _=i;g.doChown(null,_,o)},lchown(i,r,a){g.chown(i,r,a,!0)},fchown(i,r,a){var o=g.getStreamChecked(i);g.doChown(o,o.node,!1)},doTruncate(i,r,a){if(g.isDir(r.mode))throw new g.ErrnoError(31);if(!g.isFile(r.mode))throw new g.ErrnoError(28);var o=g.nodePermissions(r,"w");if(o)throw new g.ErrnoError(o);g.doSetAttr(i,r,{size:a,timestamp:Date.now()})},truncate(i,r){if(r<0)throw new g.ErrnoError(28);var a;if(typeof i=="string"){var o=g.lookupPath(i,{follow:!0});a=o.node}else a=i;g.doTruncate(null,a,r)},ftruncate(i,r){var a=g.getStreamChecked(i);if(r<0||!(a.flags&2097155))throw new g.ErrnoError(28);g.doTruncate(a,a.node,r)},utime(i,r,a){var o=g.lookupPath(i,{follow:!0}),_=o.node,p=g.checkOpExists(_.node_ops.setattr,63);p(_,{atime:r,mtime:a})},open(i,r,a=438){if(i==="")throw new g.ErrnoError(44);r=typeof r=="string"?dr(r):r,r&64?a=a&4095|32768:a=0;var o,_;if(typeof i=="object")o=i;else{_=i.endsWith("/");var p=g.lookupPath(i,{follow:!(r&131072),noent_okay:!0});o=p.node,i=p.path}var f=!1;if(r&64)if(o){if(r&128)throw new g.ErrnoError(20)}else{if(_)throw new g.ErrnoError(31);o=g.mknod(i,a|511,0),f=!0}if(!o)throw new g.ErrnoError(44);if(g.isChrdev(o.mode)&&(r&=-513),r&65536&&!g.isDir(o.mode))throw new g.ErrnoError(54);if(!f){var m=g.mayOpen(o,r);if(m)throw new g.ErrnoError(m)}r&512&&!f&&g.truncate(o,0),r&=-131713;var y=g.createStream({node:o,path:g.getPath(o),flags:r,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return y.stream_ops.open&&y.stream_ops.open(y),f&&g.chmod(o,a&511),e.logReadFiles&&!(r&1)&&(i in g.readFiles||(g.readFiles[i]=1)),y},close(i){if(g.isClosed(i))throw new g.ErrnoError(8);i.getdents&&(i.getdents=null);try{i.stream_ops.close&&i.stream_ops.close(i)}catch(r){throw r}finally{g.closeStream(i.fd)}i.fd=null},isClosed(i){return i.fd===null},llseek(i,r,a){if(g.isClosed(i))throw new g.ErrnoError(8);if(!i.seekable||!i.stream_ops.llseek)throw new g.ErrnoError(70);if(a!=0&&a!=1&&a!=2)throw new g.ErrnoError(28);return i.position=i.stream_ops.llseek(i,r,a),i.ungotten=[],i.position},read(i,r,a,o,_){if(o<0||_<0)throw new g.ErrnoError(28);if(g.isClosed(i))throw new g.ErrnoError(8);if((i.flags&2097155)===1)throw new g.ErrnoError(8);if(g.isDir(i.node.mode))throw new g.ErrnoError(31);if(!i.stream_ops.read)throw new g.ErrnoError(28);var p=typeof _<"u";if(!p)_=i.position;else if(!i.seekable)throw new g.ErrnoError(70);var f=i.stream_ops.read(i,r,a,o,_);return p||(i.position+=f),f},write(i,r,a,o,_,p){if(o<0||_<0)throw new g.ErrnoError(28);if(g.isClosed(i))throw new g.ErrnoError(8);if(!(i.flags&2097155))throw new g.ErrnoError(8);if(g.isDir(i.node.mode))throw new g.ErrnoError(31);if(!i.stream_ops.write)throw new g.ErrnoError(28);i.seekable&&i.flags&1024&&g.llseek(i,0,2);var f=typeof _<"u";if(!f)_=i.position;else if(!i.seekable)throw new g.ErrnoError(70);var m=i.stream_ops.write(i,r,a,o,_,p);return f||(i.position+=m),m},mmap(i,r,a,o,_){if(o&2&&!(_&2)&&(i.flags&2097155)!==2)throw new g.ErrnoError(2);if((i.flags&2097155)===1)throw new g.ErrnoError(2);if(!i.stream_ops.mmap)throw new g.ErrnoError(43);if(!r)throw new g.ErrnoError(28);return i.stream_ops.mmap(i,r,a,o,_)},msync(i,r,a,o,_){return i.stream_ops.msync?i.stream_ops.msync(i,r,a,o,_):0},ioctl(i,r,a){if(!i.stream_ops.ioctl)throw new g.ErrnoError(59);return i.stream_ops.ioctl(i,r,a)},readFile(i,r={}){if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error(`Invalid encoding type "${r.encoding}"`);var a,o=g.open(i,r.flags),_=g.stat(i),p=_.size,f=new Uint8Array(p);return g.read(o,f,0,p,0),r.encoding==="utf8"?a=Zt(f):r.encoding==="binary"&&(a=f),g.close(o),a},writeFile(i,r,a={}){a.flags=a.flags||577;var o=g.open(i,a.flags,a.mode);if(typeof r=="string"){var _=new Uint8Array(zt(r)+1),p=Ne(r,_,0,_.length);g.write(o,_,0,p,void 0,a.canOwn)}else if(ArrayBuffer.isView(r))g.write(o,r,0,r.byteLength,void 0,a.canOwn);else throw new Error("Unsupported data type");g.close(o)},cwd:()=>g.currentPath,chdir(i){var r=g.lookupPath(i,{follow:!0});if(r.node===null)throw new g.ErrnoError(44);if(!g.isDir(r.node.mode))throw new g.ErrnoError(54);var a=g.nodePermissions(r.node,"x");if(a)throw new g.ErrnoError(a);g.currentPath=r.path},createDefaultDirectories(){g.mkdir("/tmp"),g.mkdir("/home"),g.mkdir("/home/web_user")},createDefaultDevices(){g.mkdir("/dev"),g.registerDevice(g.makedev(1,3),{read:()=>0,write:(o,_,p,f,m)=>f,llseek:()=>0}),g.mkdev("/dev/null",g.makedev(1,3)),Nt.register(g.makedev(5,0),Nt.default_tty_ops),Nt.register(g.makedev(6,0),Nt.default_tty1_ops),g.mkdev("/dev/tty",g.makedev(5,0)),g.mkdev("/dev/tty1",g.makedev(6,0));var i=new Uint8Array(1024),r=0,a=()=>(r===0&&(Ue(i),r=i.byteLength),i[--r]);g.createDevice("/dev","random",a),g.createDevice("/dev","urandom",a),g.mkdir("/dev/shm"),g.mkdir("/dev/shm/tmp")},createSpecialDirectories(){g.mkdir("/proc");var i=g.mkdir("/proc/self");g.mkdir("/proc/self/fd"),g.mount({mount(){var r=g.createNode(i,"fd",16895,73);return r.stream_ops={llseek:R.stream_ops.llseek},r.node_ops={lookup(a,o){var _=+o,p=g.getStreamChecked(_),f={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>p.path},id:_+1};return f.parent=f,f},readdir(){return Array.from(g.streams.entries()).filter(([a,o])=>o).map(([a,o])=>a.toString())}},r}},{},"/proc/self/fd")},createStandardStreams(i,r,a){i?g.createDevice("/dev","stdin",i):g.symlink("/dev/tty","/dev/stdin"),r?g.createDevice("/dev","stdout",null,r):g.symlink("/dev/tty","/dev/stdout"),a?g.createDevice("/dev","stderr",null,a):g.symlink("/dev/tty1","/dev/stderr"),g.open("/dev/stdin",0),g.open("/dev/stdout",1),g.open("/dev/stderr",1)},staticInit(){g.nameTable=new Array(4096),g.mount(R,{},"/"),g.createDefaultDirectories(),g.createDefaultDevices(),g.createSpecialDirectories(),g.filesystems={MEMFS:R}},init(i,r,a){g.initialized=!0,i??=e.stdin,r??=e.stdout,a??=e.stderr,g.createStandardStreams(i,r,a)},quit(){g.initialized=!1;for(var i of g.streams)i&&g.close(i)},findObject(i,r){var a=g.analyzePath(i,r);return a.exists?a.object:null},analyzePath(i,r){try{var a=g.lookupPath(i,{follow:!r});i=a.path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var a=g.lookupPath(i,{parent:!0});o.parentExists=!0,o.parentPath=a.path,o.parentObject=a.node,o.name=j.basename(i),a=g.lookupPath(i,{follow:!r}),o.exists=!0,o.path=a.path,o.object=a.node,o.name=a.node.name,o.isRoot=a.path==="/"}catch(_){o.error=_.errno}return o},createPath(i,r,a,o){i=typeof i=="string"?i:g.getPath(i);for(var _=r.split("/").reverse();_.length;){var p=_.pop();if(p){var f=j.join2(i,p);try{g.mkdir(f)}catch(m){if(m.errno!=20)throw m}i=f}}return f},createFile(i,r,a,o,_){var p=j.join2(typeof i=="string"?i:g.getPath(i),r),f=He(o,_);return g.create(p,f)},createDataFile(i,r,a,o,_,p){var f=r;i&&(i=typeof i=="string"?i:g.getPath(i),f=r?j.join2(i,r):i);var m=He(o,_),y=g.create(f,m);if(a){if(typeof a=="string"){for(var M=new Array(a.length),v=0,I=a.length;v<I;++v)M[v]=a.charCodeAt(v);a=M}g.chmod(y,m|146);var b=g.open(y,577);g.write(b,a,0,a.length,0,p),g.close(b),g.chmod(y,m)}},createDevice(i,r,a,o){var _=j.join2(typeof i=="string"?i:g.getPath(i),r),p=He(!!a,!!o);g.createDevice.major??=64;var f=g.makedev(g.createDevice.major++,0);return g.registerDevice(f,{open(m){m.seekable=!1},close(m){o?.buffer?.length&&o(10)},read(m,y,M,v,I){for(var b=0,P=0;P<v;P++){var T;try{T=a()}catch{throw new g.ErrnoError(29)}if(T===void 0&&b===0)throw new g.ErrnoError(6);if(T==null)break;b++,y[M+P]=T}return b&&(m.node.atime=Date.now()),b},write(m,y,M,v,I){for(var b=0;b<v;b++)try{o(y[M+b])}catch{throw new g.ErrnoError(29)}return v&&(m.node.mtime=m.node.ctime=Date.now()),b}}),g.mkdev(_,p,f)},forceLoadFile(i){if(i.isDevice||i.isFolder||i.link||i.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{i.contents=W(i.url),i.usedBytes=i.contents.length}catch{throw new g.ErrnoError(29)}},createLazyFile(i,r,a,o,_){class p{lengthKnown=!1;chunks=[];get(P){if(!(P>this.length-1||P<0)){var T=P%this.chunkSize,H=P/this.chunkSize|0;return this.getter(H)[T]}}setDataGetter(P){this.getter=P}cacheLength(){var P=new XMLHttpRequest;if(P.open("HEAD",a,!1),P.send(null),!(P.status>=200&&P.status<300||P.status===304))throw new Error("Couldn't load "+a+". Status: "+P.status);var T=Number(P.getResponseHeader("Content-length")),H,rt=(H=P.getResponseHeader("Accept-Ranges"))&&H==="bytes",Z=(H=P.getResponseHeader("Content-Encoding"))&&H==="gzip",at=1024*1024;rt||(at=T);var q=(kt,xt)=>{if(kt>xt)throw new Error("invalid range ("+kt+", "+xt+") or no bytes requested!");if(xt>T-1)throw new Error("only "+T+" bytes available! programmer error!");var it=new XMLHttpRequest;if(it.open("GET",a,!1),T!==at&&it.setRequestHeader("Range","bytes="+kt+"-"+xt),it.responseType="arraybuffer",it.overrideMimeType&&it.overrideMimeType("text/plain; charset=x-user-defined"),it.send(null),!(it.status>=200&&it.status<300||it.status===304))throw new Error("Couldn't load "+a+". Status: "+it.status);return it.response!==void 0?new Uint8Array(it.response||[]):Wi(it.responseText||"")},Ct=this;Ct.setDataGetter(kt=>{var xt=kt*at,it=(kt+1)*at-1;if(it=Math.min(it,T-1),typeof Ct.chunks[kt]>"u"&&(Ct.chunks[kt]=q(xt,it)),typeof Ct.chunks[kt]>"u")throw new Error("doXHR failed!");return Ct.chunks[kt]}),(Z||!T)&&(at=T=1,T=this.getter(0).length,at=T,V("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=T,this._chunkSize=at,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!w)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var f=new p,m={isDevice:!1,contents:f}}else var m={isDevice:!1,url:a};var y=g.createFile(i,r,m,o,_);m.contents?y.contents=m.contents:m.url&&(y.contents=null,y.url=m.url),Object.defineProperties(y,{usedBytes:{get:function(){return this.contents.length}}});var M={},v=Object.keys(y.stream_ops);v.forEach(b=>{var P=y.stream_ops[b];M[b]=(...T)=>(g.forceLoadFile(y),P(...T))});function I(b,P,T,H,rt){var Z=b.node.contents;if(rt>=Z.length)return 0;var at=Math.min(Z.length-rt,H);if(Z.slice)for(var q=0;q<at;q++)P[T+q]=Z[rt+q];else for(var q=0;q<at;q++)P[T+q]=Z.get(rt+q);return at}return M.read=(b,P,T,H,rt)=>(g.forceLoadFile(y),I(b,P,T,H,rt)),M.mmap=(b,P,T,H,rt)=>{g.forceLoadFile(y);var Z=Li(P);if(!Z)throw new g.ErrnoError(48);return I(b,X,Z,P,T),{ptr:Z,allocated:!0}},y.stream_ops=M,y}},je=(i,r)=>(i>>>=0,i?Zt(ht,i,r):""),G={DEFAULT_POLLMASK:5,calculateAt(i,r,a){if(j.isAbs(r))return r;var o;if(i===-100)o=g.cwd();else{var _=G.getStreamFromFD(i);o=_.path}if(r.length==0){if(!a)throw new g.ErrnoError(44);return o}return o+"/"+r},writeStat(i,r){D[i>>>2>>>0]=r.dev,D[i+4>>>2>>>0]=r.mode,B[i+8>>>2>>>0]=r.nlink,D[i+12>>>2>>>0]=r.uid,D[i+16>>>2>>>0]=r.gid,D[i+20>>>2>>>0]=r.rdev,gt[i+24>>>3]=BigInt(r.size),D[i+32>>>2>>>0]=4096,D[i+36>>>2>>>0]=r.blocks;var a=r.atime.getTime(),o=r.mtime.getTime(),_=r.ctime.getTime();return gt[i+40>>>3]=BigInt(Math.floor(a/1e3)),B[i+48>>>2>>>0]=a%1e3*1e3*1e3,gt[i+56>>>3]=BigInt(Math.floor(o/1e3)),B[i+64>>>2>>>0]=o%1e3*1e3*1e3,gt[i+72>>>3]=BigInt(Math.floor(_/1e3)),B[i+80>>>2>>>0]=_%1e3*1e3*1e3,gt[i+88>>>3]=BigInt(r.ino),0},writeStatFs(i,r){D[i+4>>>2>>>0]=r.bsize,D[i+40>>>2>>>0]=r.bsize,D[i+8>>>2>>>0]=r.blocks,D[i+12>>>2>>>0]=r.bfree,D[i+16>>>2>>>0]=r.bavail,D[i+20>>>2>>>0]=r.files,D[i+24>>>2>>>0]=r.ffree,D[i+28>>>2>>>0]=r.fsid,D[i+44>>>2>>>0]=r.flags,D[i+36>>>2>>>0]=r.namelen},doMsync(i,r,a,o,_){if(!g.isFile(r.node.mode))throw new g.ErrnoError(43);if(o&2)return 0;var p=ht.slice(i,i+a);g.msync(r,p,_,a,o)},getStreamFromFD(i){var r=g.getStreamChecked(i);return r},varargs:void 0,getStr(i){var r=je(i);return r}};function fr(i,r){i>>>=0;try{return i=G.getStr(i),g.chmod(i,r),0}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function mr(i){try{var r=G.getStreamFromFD(i);return g.dupStream(r).fd}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function kr(i,r,a,o){r>>>=0;try{if(r=G.getStr(r),r=G.calculateAt(i,r),a&-8)return-28;var _=g.lookupPath(r,{follow:!0}),p=_.node;if(!p)return-44;var f="";return a&4&&(f+="r"),a&2&&(f+="w"),a&1&&(f+="x"),f&&g.nodePermissions(p,f)?-2:0}catch(m){if(typeof g>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function wr(i,r,a,o){a=bt(a),o=bt(o);try{if(isNaN(a))return 61;if(r!=0)return-138;if(a<0||o<0)return-28;var _=g.fstat(i).size,p=a+o;return p>_&&g.ftruncate(i,p),0}catch(f){if(typeof g>"u"||f.name!=="ErrnoError")throw f;return-f.errno}}function yr(i,r){try{return g.fchmod(i,r),0}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}var ye=()=>{var i=D[+G.varargs>>>2>>>0];return G.varargs+=4,i},te=ye;function Mr(i,r,a){a>>>=0,G.varargs=a;try{var o=G.getStreamFromFD(i);switch(r){case 0:{var _=ye();if(_<0)return-28;for(;g.streams[_];)_++;var p;return p=g.dupStream(o,_),p.fd}case 1:case 2:return 0;case 3:return o.flags;case 4:{var _=ye();return o.flags|=_,0}case 12:{var _=te(),f=0;return ft[_+f>>>1>>>0]=2,0}case 13:case 14:return 0}return-28}catch(m){if(typeof g>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function vr(i,r){r>>>=0;try{return G.writeStat(r,g.fstat(i))}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}var It=(i,r,a)=>Ne(i,ht,r,a);function Sr(i,r){i>>>=0,r>>>=0;try{if(r===0)return-28;var a=g.cwd(),o=zt(a)+1;return r<o?-68:(It(a,i,r),o)}catch(_){if(typeof g>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function Ir(i,r,a){r>>>=0,a>>>=0;try{var o=G.getStreamFromFD(i);o.getdents||=g.readdir(o.path);for(var _=280,p=0,f=g.llseek(o,0,1),m=Math.floor(f/_),y=Math.min(o.getdents.length,m+Math.floor(a/_)),M=m;M<y;M++){var v,I,b=o.getdents[M];if(b===".")v=o.node.id,I=4;else if(b===".."){var P=g.lookupPath(o.path,{parent:!0});v=P.node.id,I=4}else{var T;try{T=g.lookupNode(o.node,b)}catch(H){if(H?.errno===28)continue;throw H}v=T.id,I=g.isChrdev(T.mode)?2:g.isDir(T.mode)?4:g.isLink(T.mode)?10:8}gt[r+p>>>3]=BigInt(v),gt[r+p+8>>>3]=BigInt((M+1)*_),ft[r+p+16>>>1>>>0]=280,X[r+p+18>>>0]=I,It(b,r+p+19,256),p+=_}return g.llseek(o,M*_,0),p}catch(H){if(typeof g>"u"||H.name!=="ErrnoError")throw H;return-H.errno}}function Cr(i,r,a){a>>>=0,G.varargs=a;try{var o=G.getStreamFromFD(i);switch(r){case 21509:return o.tty?0:-59;case 21505:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcgets){var _=o.tty.ops.ioctl_tcgets(o),p=te();D[p>>>2>>>0]=_.c_iflag||0,D[p+4>>>2>>>0]=_.c_oflag||0,D[p+8>>>2>>>0]=_.c_cflag||0,D[p+12>>>2>>>0]=_.c_lflag||0;for(var f=0;f<32;f++)X[p+f+17>>>0]=_.c_cc[f]||0;return 0}return 0}case 21510:case 21511:case 21512:return o.tty?0:-59;case 21506:case 21507:case 21508:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcsets){for(var p=te(),m=D[p>>>2>>>0],y=D[p+4>>>2>>>0],M=D[p+8>>>2>>>0],v=D[p+12>>>2>>>0],I=[],f=0;f<32;f++)I.push(X[p+f+17>>>0]);return o.tty.ops.ioctl_tcsets(o.tty,r,{c_iflag:m,c_oflag:y,c_cflag:M,c_lflag:v,c_cc:I})}return 0}case 21519:{if(!o.tty)return-59;var p=te();return D[p>>>2>>>0]=0,0}case 21520:return o.tty?-28:-59;case 21531:{var p=te();return g.ioctl(o,r,p)}case 21523:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tiocgwinsz){var b=o.tty.ops.ioctl_tiocgwinsz(o.tty),p=te();ft[p>>>1>>>0]=b[0],ft[p+2>>>1>>>0]=b[1]}return 0}case 21524:return o.tty?0:-59;case 21515:return o.tty?0:-59;default:return-28}}catch(P){if(typeof g>"u"||P.name!=="ErrnoError")throw P;return-P.errno}}function Pr(i,r){i>>>=0,r>>>=0;try{return i=G.getStr(i),G.writeStat(r,g.lstat(i))}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function br(i,r,a,o){r>>>=0,a>>>=0;try{r=G.getStr(r);var _=o&256,p=o&4096;return o=o&-6401,r=G.calculateAt(i,r,p),G.writeStat(a,_?g.lstat(r):g.stat(r))}catch(f){if(typeof g>"u"||f.name!=="ErrnoError")throw f;return-f.errno}}function Dr(i,r,a,o){r>>>=0,o>>>=0,G.varargs=o;try{r=G.getStr(r),r=G.calculateAt(i,r);var _=o?ye():0;return g.open(r,a,_).fd}catch(p){if(typeof g>"u"||p.name!=="ErrnoError")throw p;return-p.errno}}function Er(i,r,a,o){r>>>=0,a>>>=0,o>>>=0;try{if(r=G.getStr(r),r=G.calculateAt(i,r),o<=0)return-28;var _=g.readlink(r),p=Math.min(o,zt(_)),f=X[a+p>>>0];return It(_,a,o+1),X[a+p>>>0]=f,p}catch(m){if(typeof g>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function xr(i,r,a,o){r>>>=0,o>>>=0;try{return r=G.getStr(r),o=G.getStr(o),r=G.calculateAt(i,r),o=G.calculateAt(a,o),g.rename(r,o),0}catch(_){if(typeof g>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function Ar(i){i>>>=0;try{return i=G.getStr(i),g.rmdir(i),0}catch(r){if(typeof g>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Tr(i,r){i>>>=0,r>>>=0;try{return i=G.getStr(i),G.writeStat(r,g.stat(i))}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function Fr(i,r,a){i>>>=0,a>>>=0;try{return i=G.getStr(i),a=G.getStr(a),a=G.calculateAt(r,a),g.symlink(i,a),0}catch(o){if(typeof g>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Gr(i,r,a){r>>>=0;try{return r=G.getStr(r),r=G.calculateAt(i,r),a===0?g.unlink(r):a===512?g.rmdir(r):le("Invalid flags passed to unlinkat"),0}catch(o){if(typeof g>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var Rr=()=>le(""),Me={},Ye=i=>{for(;i.length;){var r=i.pop(),a=i.pop();a(r)}};function he(i){return this.fromWireType(B[i>>>2>>>0])}var ee={},Ht={},ve={},Wr=e.InternalError=class extends Error{constructor(i){super(i),this.name="InternalError"}},Se=i=>{throw new Wr(i)},Ve=(i,r,a)=>{i.forEach(m=>ve[m]=r);function o(m){var y=a(m);y.length!==i.length&&Se("Mismatched type converter count");for(var M=0;M<i.length;++M)vt(i[M],y[M])}var _=new Array(r.length),p=[],f=0;r.forEach((m,y)=>{Ht.hasOwnProperty(m)?_[y]=Ht[m]:(p.push(m),ee.hasOwnProperty(m)||(ee[m]=[]),ee[m].push(()=>{_[y]=Ht[m],++f,f===p.length&&o(_)}))}),p.length===0&&o(_)},Br=function(i){i>>>=0;var r=Me[i];delete Me[i];var a=r.rawConstructor,o=r.rawDestructor,_=r.fields,p=_.map(f=>f.getterReturnType).concat(_.map(f=>f.setterArgumentType));Ve([i],p,f=>{var m={};return _.forEach((y,M)=>{var v=y.fieldName,I=f[M],b=f[M].optional,P=y.getter,T=y.getterContext,H=f[M+_.length],rt=y.setter,Z=y.setterContext;m[v]={read:at=>I.fromWireType(P(T,at)),write:(at,q)=>{var Ct=[];rt(Z,at,H.toWireType(Ct,q)),Ye(Ct)},optional:b}}),[{name:r.name,fromWireType:y=>{var M={};for(var v in m)M[v]=m[v].read(y);return o(y),M},toWireType:(y,M)=>{for(var v in m)if(!(v in M)&&!m[v].optional)throw new TypeError(`Missing field: "${v}"`);var I=a();for(v in m)m[v].write(I,M[v]);return y!==null&&y.push(o,I),I},argPackAdvance:St,readValueFromPointer:he,destructorFunction:o}]})},Ie=i=>{if(i===null)return"null";var r=typeof i;return r==="object"||r==="array"||r==="function"?i.toString():""+i},Lr=()=>{for(var i=new Array(256),r=0;r<256;++r)i[r]=String.fromCharCode(r);$i=i},$i,ct=i=>{for(var r="",a=i;ht[a>>>0];)r+=$i[ht[a++>>>0]];return r},Ce=e.BindingError=class extends Error{constructor(i){super(i),this.name="BindingError"}},N=i=>{throw new Ce(i)};function Or(i,r,a={}){var o=r.name;if(i||N(`type "${o}" must have a positive integer typeid pointer`),Ht.hasOwnProperty(i)){if(a.ignoreDuplicateRegistrations)return;N(`Cannot register type '${o}' twice`)}if(Ht[i]=r,delete ve[i],ee.hasOwnProperty(i)){var _=ee[i];delete ee[i],_.forEach(p=>p())}}function vt(i,r,a={}){return Or(i,r,a)}var Ui=(i,r,a)=>{switch(r){case 1:return a?o=>X[o>>>0]:o=>ht[o>>>0];case 2:return a?o=>ft[o>>>1>>>0]:o=>ce[o>>>1>>>0];case 4:return a?o=>D[o>>>2>>>0]:o=>B[o>>>2>>>0];case 8:return a?o=>gt[o>>>3]:o=>bi[o>>>3];default:throw new TypeError(`invalid integer width (${r}): ${i}`)}};function $r(i,r,a,o,_){i>>>=0,r>>>=0,a>>>=0,r=ct(r);var p=r.indexOf("u")!=-1;vt(i,{name:r,fromWireType:f=>f,toWireType:function(f,m){if(typeof m!="bigint"&&typeof m!="number")throw new TypeError(`Cannot convert "${Ie(m)}" to ${this.name}`);return typeof m=="number"&&(m=BigInt(m)),m},argPackAdvance:St,readValueFromPointer:Ui(r,a,!p),destructorFunction:null})}var St=8;function Ur(i,r,a,o){i>>>=0,r>>>=0,r=ct(r),vt(i,{name:r,fromWireType:function(_){return!!_},toWireType:function(_,p){return p?a:o},argPackAdvance:St,readValueFromPointer:function(_){return this.fromWireType(ht[_>>>0])},destructorFunction:null})}var zr=i=>({count:i.count,deleteScheduled:i.deleteScheduled,preservePointerOnDelete:i.preservePointerOnDelete,ptr:i.ptr,ptrType:i.ptrType,smartPtr:i.smartPtr,smartPtrType:i.smartPtrType}),Xe=i=>{function r(a){return a.$$.ptrType.registeredClass.name}N(r(i)+" instance already deleted")},qe=!1,zi=i=>{},Nr=i=>{i.smartPtr?i.smartPtrType.rawDestructor(i.smartPtr):i.ptrType.registeredClass.rawDestructor(i.ptr)},Ni=i=>{i.count.value-=1;var r=i.count.value===0;r&&Nr(i)},ge=i=>typeof FinalizationRegistry>"u"?(ge=r=>r,i):(qe=new FinalizationRegistry(r=>{Ni(r.$$)}),ge=r=>{var a=r.$$,o=!!a.smartPtr;if(o){var _={$$:a};qe.register(r,_,r)}return r},zi=r=>qe.unregister(r),ge(i)),Hr=()=>{let i=Pe.prototype;Object.assign(i,{isAliasOf(a){if(!(this instanceof Pe)||!(a instanceof Pe))return!1;var o=this.$$.ptrType.registeredClass,_=this.$$.ptr;a.$$=a.$$;for(var p=a.$$.ptrType.registeredClass,f=a.$$.ptr;o.baseClass;)_=o.upcast(_),o=o.baseClass;for(;p.baseClass;)f=p.upcast(f),p=p.baseClass;return o===p&&_===f},clone(){if(this.$$.ptr||Xe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var a=ge(Object.create(Object.getPrototypeOf(this),{$$:{value:zr(this.$$)}}));return a.$$.count.value+=1,a.$$.deleteScheduled=!1,a},delete(){this.$$.ptr||Xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&N("Object already scheduled for deletion"),zi(this),Ni(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&N("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const r=Symbol.dispose;r&&(i[r]=i.delete)};function Pe(){}var be=(i,r)=>Object.defineProperty(r,"name",{value:i}),Hi={},jr=(i,r,a)=>{if(i[r].overloadTable===void 0){var o=i[r];i[r]=function(..._){return i[r].overloadTable.hasOwnProperty(_.length)||N(`Function '${a}' called with an invalid number of arguments (${_.length}) - expects one of (${i[r].overloadTable})!`),i[r].overloadTable[_.length].apply(this,_)},i[r].overloadTable=[],i[r].overloadTable[o.argCount]=o}},Ke=(i,r,a)=>{e.hasOwnProperty(i)?((a===void 0||e[i].overloadTable!==void 0&&e[i].overloadTable[a]!==void 0)&&N(`Cannot register public name '${i}' twice`),jr(e,i,i),e[i].overloadTable.hasOwnProperty(a)&&N(`Cannot register multiple overloads of a function with the same number of arguments (${a})!`),e[i].overloadTable[a]=r):(e[i]=r,e[i].argCount=a)},Yr=48,Vr=57,Xr=i=>{i=i.replace(/[^a-zA-Z0-9_]/g,"$");var r=i.charCodeAt(0);return r>=Yr&&r<=Vr?`_${i}`:i};function qr(i,r,a,o,_,p,f,m){this.name=i,this.constructor=r,this.instancePrototype=a,this.rawDestructor=o,this.baseClass=_,this.getActualType=p,this.upcast=f,this.downcast=m,this.pureVirtualFunctions=[]}var Qe=(i,r,a)=>{for(;r!==a;)r.upcast||N(`Expected null or instance of ${a.name}, got an instance of ${r.name}`),i=r.upcast(i),r=r.baseClass;return i};function Kr(i,r){if(r===null)return this.isReference&&N(`null is not a valid ${this.name}`),0;r.$$||N(`Cannot pass "${Ie(r)}" as a ${this.name}`),r.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`);var a=r.$$.ptrType.registeredClass,o=Qe(r.$$.ptr,a,this.registeredClass);return o}function Qr(i,r){var a;if(r===null)return this.isReference&&N(`null is not a valid ${this.name}`),this.isSmartPointer?(a=this.rawConstructor(),i!==null&&i.push(this.rawDestructor,a),a):0;(!r||!r.$$)&&N(`Cannot pass "${Ie(r)}" as a ${this.name}`),r.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&N(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var o=r.$$.ptrType.registeredClass;if(a=Qe(r.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&N("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?a=r.$$.smartPtr:N(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:a=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)a=r.$$.smartPtr;else{var _=r.clone();a=this.rawShare(a,mt.toHandle(()=>_.delete())),i!==null&&i.push(this.rawDestructor,a)}break;default:N("Unsupporting sharing policy")}return a}function Jr(i,r){if(r===null)return this.isReference&&N(`null is not a valid ${this.name}`),0;r.$$||N(`Cannot pass "${Ie(r)}" as a ${this.name}`),r.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&N(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var a=r.$$.ptrType.registeredClass,o=Qe(r.$$.ptr,a,this.registeredClass);return o}var ji=(i,r,a)=>{if(r===a)return i;if(a.baseClass===void 0)return null;var o=ji(i,r,a.baseClass);return o===null?null:a.downcast(o)},Zr={},ta=(i,r)=>{for(r===void 0&&N("ptr should not be undefined");i.baseClass;)r=i.upcast(r),i=i.baseClass;return r},ea=(i,r)=>(r=ta(i,r),Zr[r]),De=(i,r)=>{(!r.ptrType||!r.ptr)&&Se("makeClassHandle requires ptr and ptrType");var a=!!r.smartPtrType,o=!!r.smartPtr;return a!==o&&Se("Both smartPtrType and smartPtr must be specified"),r.count={value:1},ge(Object.create(i,{$$:{value:r,writable:!0}}))};function ia(i){var r=this.getPointee(i);if(!r)return this.destructor(i),null;var a=ea(this.registeredClass,r);if(a!==void 0){if(a.$$.count.value===0)return a.$$.ptr=r,a.$$.smartPtr=i,a.clone();var o=a.clone();return this.destructor(i),o}function _(){return this.isSmartPointer?De(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:i}):De(this.registeredClass.instancePrototype,{ptrType:this,ptr:i})}var p=this.registeredClass.getActualType(r),f=Hi[p];if(!f)return _.call(this);var m;this.isConst?m=f.constPointerType:m=f.pointerType;var y=ji(r,this.registeredClass,m.registeredClass);return y===null?_.call(this):this.isSmartPointer?De(m.registeredClass.instancePrototype,{ptrType:m,ptr:y,smartPtrType:this,smartPtr:i}):De(m.registeredClass.instancePrototype,{ptrType:m,ptr:y})}var na=()=>{Object.assign(Ee.prototype,{getPointee(i){return this.rawGetPointee&&(i=this.rawGetPointee(i)),i},destructor(i){this.rawDestructor?.(i)},argPackAdvance:St,readValueFromPointer:he,fromWireType:ia})};function Ee(i,r,a,o,_,p,f,m,y,M,v){this.name=i,this.registeredClass=r,this.isReference=a,this.isConst=o,this.isSmartPointer=_,this.pointeeType=p,this.sharingPolicy=f,this.rawGetPointee=m,this.rawConstructor=y,this.rawShare=M,this.rawDestructor=v,!_&&r.baseClass===void 0?o?(this.toWireType=Kr,this.destructorFunction=null):(this.toWireType=Jr,this.destructorFunction=null):this.toWireType=Qr}var Yi=(i,r,a)=>{e.hasOwnProperty(i)||Se("Replacing nonexistent public symbol"),e[i].overloadTable!==void 0&&a!==void 0?e[i].overloadTable[a]=r:(e[i]=r,e[i].argCount=a)},ra=(i,r,a=[],o=!1)=>{var _=L(r),p=_(...a);return i[0]=="p"?p>>>0:p},aa=(i,r,a=!1)=>(...o)=>ra(i,r,o,a),Dt=(i,r,a=!1)=>{i=ct(i);function o(){if(i.includes("p"))return aa(i,r,a);var p=L(r);return p}var _=o();return typeof _!="function"&&N(`unknown function pointer with signature ${i}: ${r}`),_};class sa extends Error{}var Vi=i=>{var r=Bs(i),a=ct(r);return jt(r),a},Xi=(i,r)=>{var a=[],o={};function _(p){if(!o[p]&&!Ht[p]){if(ve[p]){ve[p].forEach(_);return}a.push(p),o[p]=!0}}throw r.forEach(_),new sa(`${i}: `+a.map(Vi).join([", "]))};function oa(i,r,a,o,_,p,f,m,y,M,v,I,b){i>>>=0,r>>>=0,a>>>=0,o>>>=0,_>>>=0,p>>>=0,f>>>=0,m>>>=0,y>>>=0,M>>>=0,v>>>=0,I>>>=0,b>>>=0,v=ct(v),p=Dt(_,p),m&&=Dt(f,m),M&&=Dt(y,M),b=Dt(I,b);var P=Xr(v);Ke(P,function(){Xi(`Cannot construct ${v} due to unbound types`,[o])}),Ve([i,r,a],o?[o]:[],T=>{T=T[0];var H,rt;o?(H=T.registeredClass,rt=H.instancePrototype):rt=Pe.prototype;var Z=be(v,function(...it){if(Object.getPrototypeOf(this)!==at)throw new Ce(`Use 'new' to construct ${v}`);if(q.constructor_body===void 0)throw new Ce(`${v} has no accessible constructor`);var ln=q.constructor_body[it.length];if(ln===void 0)throw new Ce(`Tried to invoke ctor of ${v} with invalid number of parameters (${it.length}) - expected (${Object.keys(q.constructor_body).toString()}) parameters instead!`);return ln.apply(this,it)}),at=Object.create(rt,{constructor:{value:Z}});Z.prototype=at;var q=new qr(v,Z,at,b,H,p,m,M);q.baseClass&&(q.baseClass.__derivedClasses??=[],q.baseClass.__derivedClasses.push(q));var Ct=new Ee(v,q,!0,!1,!1),kt=new Ee(v+"*",q,!1,!1,!1),xt=new Ee(v+" const*",q,!1,!0,!1);return Hi[i]={pointerType:kt,constPointerType:xt},Yi(P,Z),[Ct,kt,xt]})}var Je=[],Et=[];function Ze(i){i>>>=0,i>9&&--Et[i+1]===0&&(Et[i]=void 0,Je.push(i))}var ca=()=>Et.length/2-5-Je.length,_a=()=>{Et.push(0,1,void 0,1,null,1,!0,1,!1,1),e.count_emval_handles=ca},mt={toValue:i=>(i||N(`Cannot use deleted val. handle = ${i}`),Et[i]),toHandle:i=>{switch(i){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const r=Je.pop()||Et.length;return Et[r]=i,Et[r+1]=1,r}}}},la={name:"emscripten::val",fromWireType:i=>{var r=mt.toValue(i);return Ze(i),r},toWireType:(i,r)=>mt.toHandle(r),argPackAdvance:St,readValueFromPointer:he,destructorFunction:null};function ha(i){return i>>>=0,vt(i,la)}var ga=(i,r,a)=>{switch(r){case 1:return a?function(o){return this.fromWireType(X[o>>>0])}:function(o){return this.fromWireType(ht[o>>>0])};case 2:return a?function(o){return this.fromWireType(ft[o>>>1>>>0])}:function(o){return this.fromWireType(ce[o>>>1>>>0])};case 4:return a?function(o){return this.fromWireType(D[o>>>2>>>0])}:function(o){return this.fromWireType(B[o>>>2>>>0])};default:throw new TypeError(`invalid integer width (${r}): ${i}`)}};function ua(i,r,a,o){i>>>=0,r>>>=0,a>>>=0,r=ct(r);function _(){}_.values={},vt(i,{name:r,constructor:_,fromWireType:function(p){return this.constructor.values[p]},toWireType:(p,f)=>f.value,argPackAdvance:St,readValueFromPointer:ga(r,a,o),destructorFunction:null}),Ke(r,_)}var ti=(i,r)=>{var a=Ht[i];return a===void 0&&N(`${r} has unknown type ${Vi(i)}`),a};function pa(i,r,a){i>>>=0,r>>>=0;var o=ti(i,"enum");r=ct(r);var _=o.constructor,p=Object.create(o.constructor.prototype,{value:{value:a},constructor:{value:be(`${o.name}_${r}`,function(){})}});_.values[a]=p,_[r]=p}var da=(i,r)=>{switch(r){case 4:return function(a){return this.fromWireType(me[a>>>2>>>0])};case 8:return function(a){return this.fromWireType(ke[a>>>3>>>0])};default:throw new TypeError(`invalid float width (${r}): ${i}`)}},fa=function(i,r,a){i>>>=0,r>>>=0,a>>>=0,r=ct(r),vt(i,{name:r,fromWireType:o=>o,toWireType:(o,_)=>_,argPackAdvance:St,readValueFromPointer:da(r,a),destructorFunction:null})};function ma(i){for(var r=1;r<i.length;++r)if(i[r]!==null&&i[r].destructorFunction===void 0)return!0;return!1}var ka={ftf:function(i,r,a,o,_,p,f){return function(){var m=a(o),y=p.fromWireType(m);return y}},ftft:function(i,r,a,o,_,p,f,m,y){return function(M){var v=m.toWireType(null,M),I=a(o,v);y(v);var b=p.fromWireType(I);return b}},fffn:function(i,r,a,o,_,p,f,m){return function(y){var M=m.toWireType(null,y);a(o,M)}},ftfn:function(i,r,a,o,_,p,f,m){return function(y){var M=m.toWireType(null,y),v=a(o,M),I=p.fromWireType(v);return I}},ftfnn:function(i,r,a,o,_,p,f,m,y){return function(M,v){var I=m.toWireType(null,M),b=y.toWireType(null,v),P=a(o,I,b),T=p.fromWireType(P);return T}},ftfnnn:function(i,r,a,o,_,p,f,m,y,M){return function(v,I,b){var P=m.toWireType(null,v),T=y.toWireType(null,I),H=M.toWireType(null,b),rt=a(o,P,T,H),Z=p.fromWireType(rt);return Z}},ftfnt:function(i,r,a,o,_,p,f,m,y,M){return function(v,I){var b=m.toWireType(null,v),P=y.toWireType(null,I),T=a(o,b,P);M(P);var H=p.fromWireType(T);return H}}};function wa(i,r,a,o){const _=["f",a?"t":"f",o?"t":"f"];for(let p=2;p<i.length;++p){const f=i[p];let m="";f.destructorFunction===void 0?m="u":f.destructorFunction===null?m="n":m="t",_.push(m)}return _.join("")}function ya(i,r,a,o,_,p){var f=r.length;f<2&&N("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var m=r[1]!==null&&a!==null,y=ma(r),M=r[0].name!=="void",v=[i,N,o,_,Ye,r[0],r[1]],I=0;I<f-2;++I)v.push(r[I+2]);if(!y)for(var I=2;I<r.length;++I)r[I].destructorFunction!==null&&v.push(r[I].destructorFunction);var b=wa(r,m,M,p),P=ka[b](...v);return be(i,P)}var Ma=(i,r)=>{for(var a=[],o=0;o<i;o++)a.push(B[r+o*4>>>2>>>0]);return a},va=i=>{i=i.trim();const r=i.indexOf("(");return r===-1?i:i.slice(0,r)};function Sa(i,r,a,o,_,p,f,m){i>>>=0,a>>>=0,o>>>=0,_>>>=0,p>>>=0;var y=Ma(r,a);i=ct(i),i=va(i),_=Dt(o,_,f),Ke(i,function(){Xi(`Cannot call ${i} due to unbound types`,y)},r-1),Ve([],y,M=>{var v=[M[0],null].concat(M.slice(1));return Yi(i,ya(i,v,null,_,p,f),r-1),[]})}function Ia(i,r,a,o,_){i>>>=0,r>>>=0,a>>>=0,r=ct(r);var p=v=>v;if(o===0){var f=32-8*a;p=v=>v<<f>>>f}var m=r.includes("unsigned"),y=(v,I)=>{},M;m?M=function(v,I){return y(I,this.name),I>>>0}:M=function(v,I){return y(I,this.name),I},vt(i,{name:r,fromWireType:p,toWireType:M,argPackAdvance:St,readValueFromPointer:Ui(r,a,o!==0),destructorFunction:null})}function Ca(i,r,a){i>>>=0,a>>>=0;var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],_=o[r];function p(f){var m=B[f>>>2>>>0],y=B[f+4>>>2>>>0];return new _(X.buffer,y,m)}a=ct(a),vt(i,{name:a,fromWireType:p,argPackAdvance:St,readValueFromPointer:p},{ignoreDuplicateRegistrations:!0})}function Pa(i,r){i>>>=0,r>>>=0,r=ct(r),vt(i,{name:r,fromWireType(a){for(var o=B[a>>>2>>>0],_=a+4,p,m,f=_,m=0;m<=o;++m){var y=_+m;if(m==o||ht[y>>>0]==0){var M=y-f,v=je(f,M);p===void 0?p=v:(p+="\0",p+=v),f=y+1}}return jt(a),p},toWireType(a,o){o instanceof ArrayBuffer&&(o=new Uint8Array(o));var _,p=typeof o=="string";p||ArrayBuffer.isView(o)&&o.BYTES_PER_ELEMENT==1||N("Cannot pass non-string to std::string"),p?_=zt(o):_=o.length;var f=_n(4+_+1),m=f+4;return B[f>>>2>>>0]=_,p?It(o,m,_+1):ht.set(o,m>>>0),a!==null&&a.push(jt,f),f},argPackAdvance:St,readValueFromPointer:he,destructorFunction(a){jt(a)}})}var qi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ba=(i,r)=>{for(var a=i,o=a>>1,_=o+r/2;!(o>=_)&&ce[o>>>0];)++o;if(a=o<<1,a-i>32&&qi)return qi.decode(ht.subarray(i>>>0,a>>>0));for(var p="",f=0;!(f>=r/2);++f){var m=ft[i+f*2>>>1>>>0];if(m==0)break;p+=String.fromCharCode(m)}return p},Da=(i,r,a)=>{if(a??=2147483647,a<2)return 0;a-=2;for(var o=r,_=a<i.length*2?a/2:i.length,p=0;p<_;++p){var f=i.charCodeAt(p);ft[r>>>1>>>0]=f,r+=2}return ft[r>>>1>>>0]=0,r-o},Ea=i=>i.length*2,xa=(i,r)=>{for(var a=0,o="";!(a>=r/4);){var _=D[i+a*4>>>2>>>0];if(_==0)break;if(++a,_>=65536){var p=_-65536;o+=String.fromCharCode(55296|p>>10,56320|p&1023)}else o+=String.fromCharCode(_)}return o},Aa=(i,r,a)=>{if(r>>>=0,a??=2147483647,a<4)return 0;for(var o=r,_=o+a-4,p=0;p<i.length;++p){var f=i.charCodeAt(p);if(f>=55296&&f<=57343){var m=i.charCodeAt(++p);f=65536+((f&1023)<<10)|m&1023}if(D[r>>>2>>>0]=f,r+=4,r+4>_)break}return D[r>>>2>>>0]=0,r-o},Ta=i=>{for(var r=0,a=0;a<i.length;++a){var o=i.charCodeAt(a);o>=55296&&o<=57343&&++a,r+=4}return r},Fa=function(i,r,a){i>>>=0,r>>>=0,a>>>=0,a=ct(a);var o,_,p,f;r===2?(o=ba,_=Da,f=Ea,p=m=>ce[m>>>1>>>0]):r===4&&(o=xa,_=Aa,f=Ta,p=m=>B[m>>>2>>>0]),vt(i,{name:a,fromWireType:m=>{for(var y=B[m>>>2>>>0],M,v=m+4,I=0;I<=y;++I){var b=m+4+I*r;if(I==y||p(b)==0){var P=b-v,T=o(v,P);M===void 0?M=T:(M+="\0",M+=T),v=b+r}}return jt(m),M},toWireType:(m,y)=>{typeof y!="string"&&N(`Cannot pass non-string to C++ string type ${a}`);var M=f(y),v=_n(4+M+r);return B[v>>>2>>>0]=M/r,_(y,v+4,M+r),m!==null&&m.push(jt,v),v},argPackAdvance:St,readValueFromPointer:he,destructorFunction(m){jt(m)}})};function Ga(i,r,a,o,_,p){i>>>=0,r>>>=0,a>>>=0,o>>>=0,_>>>=0,p>>>=0,Me[i]={name:ct(r),rawConstructor:Dt(a,o),rawDestructor:Dt(_,p),fields:[]}}function Ra(i,r,a,o,_,p,f,m,y,M){i>>>=0,r>>>=0,a>>>=0,o>>>=0,_>>>=0,p>>>=0,f>>>=0,m>>>=0,y>>>=0,M>>>=0,Me[i].fields.push({fieldName:ct(r),getterReturnType:a,getter:Dt(o,_),getterContext:p,setterArgumentType:f,setter:Dt(m,y),setterContext:M})}var Wa=function(i,r){i>>>=0,r>>>=0,r=ct(r),vt(i,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(a,o)=>{}})},Ki=0,Ba=()=>{Oe=!1,Ki=0};function La(i){return i>>>=0,i?-52:0}var Oa=()=>{throw 1/0},$a={},Qi=i=>{var r=$a[i];return r===void 0?ct(i):r},ei=[];function Ua(i,r,a,o,_){return i>>>=0,r>>>=0,a>>>=0,o>>>=0,_>>>=0,i=ei[i],r=mt.toValue(r),a=Qi(a),i(r,r[a],o,_)}var za=i=>{var r=ei.length;return ei.push(i),r},Na=(i,r)=>{for(var a=new Array(i),o=0;o<i;++o)a[o]=ti(B[r+o*4>>>2>>>0],`parameter ${o}`);return a},Ha=(i,r,a)=>{var o=[],_=i.toWireType(o,a);return o.length&&(B[r>>>2>>>0]=mt.toHandle(o)),_},ja=Reflect.construct,Ya=function(i,r,a){r>>>=0;var o=Na(i,r),_=o.shift();i--;var p=new Array(i),f=(y,M,v,I)=>{for(var b=0,P=0;P<i;++P)p[P]=o[P].readValueFromPointer(I+b),b+=o[P].argPackAdvance;var T=a===1?ja(M,p):M.apply(y,p);return Ha(_,v,T)},m=`methodCaller<(${o.map(y=>y.name).join(", ")}) => ${_.name}>`;return za(be(m,f))};function Va(i){i>>>=0,i>9&&(Et[i+1]+=1)}function Xa(){return mt.toHandle([])}function qa(i){return i>>>=0,mt.toHandle(Qi(i))}function Ka(){return mt.toHandle({})}function Qa(i){i>>>=0;var r=mt.toValue(i);Ye(r),Ze(i)}function Ja(i,r,a){i>>>=0,r>>>=0,a>>>=0,i=mt.toValue(i),r=mt.toValue(r),a=mt.toValue(a),i[r]=a}function Za(i,r){i>>>=0,r>>>=0,i=ti(i,"_emval_take_value");var a=i.readValueFromPointer(r);return mt.toHandle(a)}function ts(i,r){i=bt(i),r>>>=0;var a=new Date(i*1e3);D[r>>>2>>>0]=a.getUTCSeconds(),D[r+4>>>2>>>0]=a.getUTCMinutes(),D[r+8>>>2>>>0]=a.getUTCHours(),D[r+12>>>2>>>0]=a.getUTCDate(),D[r+16>>>2>>>0]=a.getUTCMonth(),D[r+20>>>2>>>0]=a.getUTCFullYear()-1900,D[r+24>>>2>>>0]=a.getUTCDay();var o=Date.UTC(a.getUTCFullYear(),0,1,0,0,0,0),_=(a.getTime()-o)/(1e3*60*60*24)|0;D[r+28>>>2>>>0]=_}var es=i=>i%4===0&&(i%100!==0||i%400===0),is=[0,31,60,91,121,152,182,213,244,274,305,335],ns=[0,31,59,90,120,151,181,212,243,273,304,334],Ji=i=>{var r=es(i.getFullYear()),a=r?is:ns,o=a[i.getMonth()]+i.getDate()-1;return o};function rs(i,r){i=bt(i),r>>>=0;var a=new Date(i*1e3);D[r>>>2>>>0]=a.getSeconds(),D[r+4>>>2>>>0]=a.getMinutes(),D[r+8>>>2>>>0]=a.getHours(),D[r+12>>>2>>>0]=a.getDate(),D[r+16>>>2>>>0]=a.getMonth(),D[r+20>>>2>>>0]=a.getFullYear()-1900,D[r+24>>>2>>>0]=a.getDay();var o=Ji(a)|0;D[r+28>>>2>>>0]=o,D[r+36>>>2>>>0]=-(a.getTimezoneOffset()*60);var _=new Date(a.getFullYear(),0,1),p=new Date(a.getFullYear(),6,1).getTimezoneOffset(),f=_.getTimezoneOffset(),m=(p!=f&&a.getTimezoneOffset()==Math.min(f,p))|0;D[r+32>>>2>>>0]=m}var as=function(i){i>>>=0;var r=(()=>{var a=new Date(D[i+20>>>2>>>0]+1900,D[i+16>>>2>>>0],D[i+12>>>2>>>0],D[i+8>>>2>>>0],D[i+4>>>2>>>0],D[i>>>2>>>0],0),o=D[i+32>>>2>>>0],_=a.getTimezoneOffset(),p=new Date(a.getFullYear(),0,1),f=new Date(a.getFullYear(),6,1).getTimezoneOffset(),m=p.getTimezoneOffset(),y=Math.min(m,f);if(o<0)D[i+32>>>2>>>0]=+(f!=m&&y==_);else if(o>0!=(y==_)){var M=Math.max(m,f),v=o>0?y:M;a.setTime(a.getTime()+(v-_)*6e4)}D[i+24>>>2>>>0]=a.getDay();var I=Ji(a)|0;D[i+28>>>2>>>0]=I,D[i>>>2>>>0]=a.getSeconds(),D[i+4>>>2>>>0]=a.getMinutes(),D[i+8>>>2>>>0]=a.getHours(),D[i+12>>>2>>>0]=a.getDate(),D[i+16>>>2>>>0]=a.getMonth(),D[i+20>>>2>>>0]=a.getYear();var b=a.getTime();return isNaN(b)?-1:b/1e3})();return BigInt(r)};function ss(i,r,a,o,_,p,f){i>>>=0,_=bt(_),p>>>=0,f>>>=0;try{if(isNaN(_))return 61;var m=G.getStreamFromFD(o),y=g.mmap(m,i,_,r,a),M=y.ptr;return D[p>>>2>>>0]=y.allocated,B[f>>>2>>>0]=M,0}catch(v){if(typeof g>"u"||v.name!=="ErrnoError")throw v;return-v.errno}}function os(i,r,a,o,_,p){i>>>=0,r>>>=0,p=bt(p);try{var f=G.getStreamFromFD(_);a&2&&G.doMsync(i,f,r,o,p)}catch(m){if(typeof g>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}var cs=function(i,r,a,o){i>>>=0,r>>>=0,a>>>=0,o>>>=0;var _=new Date().getFullYear(),p=new Date(_,0,1),f=new Date(_,6,1),m=p.getTimezoneOffset(),y=f.getTimezoneOffset(),M=Math.max(m,y);B[i>>>2>>>0]=M*60,D[r>>>2>>>0]=+(m!=y);var v=P=>{var T=P>=0?"-":"+",H=Math.abs(P),rt=String(Math.floor(H/60)).padStart(2,"0"),Z=String(H%60).padStart(2,"0");return`UTC${T}${rt}${Z}`},I=v(m),b=v(y);y<m?(It(I,a,17),It(b,o,17)):(It(I,o,17),It(b,a,17))},Zi=()=>performance.now(),tn=()=>Date.now(),_s=i=>i>=0&&i<=3;function ls(i,r,a){if(a>>>=0,!_s(i))return 28;var o;i===0?o=tn():o=Zi();var _=Math.round(o*1e3*1e3);return gt[a>>>3]=BigInt(_),0}var en=()=>4294901760;function hs(){return en()}var gs=i=>{var r=fe.buffer,a=(i-r.byteLength+65535)/65536|0;try{return fe.grow(a),Ei(),1}catch{}};function us(i){i>>>=0;var r=ht.length,a=en();if(i>a)return!1;for(var o=1;o<=4;o*=2){var _=r*(1+.2/o);_=Math.min(_,i+100663296);var p=Math.min(a,Bi(Math.max(i,_),65536)),f=gs(p);if(f)return!0}return!1}var ii={},ps=()=>S||"./this.program",ue=()=>{if(!ue.strings){var i=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:i,_:ps()};for(var a in ii)ii[a]===void 0?delete r[a]:r[a]=ii[a];var o=[];for(var a in r)o.push(`${a}=${r[a]}`);ue.strings=o}return ue.strings};function ds(i,r){i>>>=0,r>>>=0;var a=0,o=0;for(var _ of ue()){var p=r+a;B[i+o>>>2>>>0]=p,a+=It(_,p,1/0)+1,o+=4}return 0}function fs(i,r){i>>>=0,r>>>=0;var a=ue();B[i>>>2>>>0]=a.length;var o=0;for(var _ of a)o+=zt(_)+1;return B[r>>>2>>>0]=o,0}var ms=()=>Oe||Ki>0,nn=i=>{ms()||(e.onExit?.(i),We=!0),E(i,new Kn(i))},ks=(i,r)=>{nn(i)},ws=ks;function ys(i){try{var r=G.getStreamFromFD(i);return g.close(r),0}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return a.errno}}function Ms(i,r){r>>>=0;try{var a=0,o=0,_=0,p=G.getStreamFromFD(i),f=p.tty?2:g.isDir(p.mode)?3:g.isLink(p.mode)?7:4;return X[r>>>0]=f,ft[r+2>>>1>>>0]=_,gt[r+8>>>3]=BigInt(a),gt[r+16>>>3]=BigInt(o),0}catch(m){if(typeof g>"u"||m.name!=="ErrnoError")throw m;return m.errno}}var rn=(i,r,a,o)=>{for(var _=0,p=0;p<a;p++){var f=B[r>>>2>>>0],m=B[r+4>>>2>>>0];r+=8;var y=g.read(i,X,f,m,o);if(y<0)return-1;if(_+=y,y<m)break;typeof o<"u"&&(o+=y)}return _};function vs(i,r,a,o,_){r>>>=0,a>>>=0,o=bt(o),_>>>=0;try{if(isNaN(o))return 61;var p=G.getStreamFromFD(i),f=rn(p,r,a,o);return B[_>>>2>>>0]=f,0}catch(m){if(typeof g>"u"||m.name!=="ErrnoError")throw m;return m.errno}}var an=(i,r,a,o)=>{for(var _=0,p=0;p<a;p++){var f=B[r>>>2>>>0],m=B[r+4>>>2>>>0];r+=8;var y=g.write(i,X,f,m,o);if(y<0)return-1;if(_+=y,y<m)break;typeof o<"u"&&(o+=y)}return _};function Ss(i,r,a,o,_){r>>>=0,a>>>=0,o=bt(o),_>>>=0;try{if(isNaN(o))return 61;var p=G.getStreamFromFD(i),f=an(p,r,a,o);return B[_>>>2>>>0]=f,0}catch(m){if(typeof g>"u"||m.name!=="ErrnoError")throw m;return m.errno}}function Is(i,r,a,o){r>>>=0,a>>>=0,o>>>=0;try{var _=G.getStreamFromFD(i),p=rn(_,r,a);return B[o>>>2>>>0]=p,0}catch(f){if(typeof g>"u"||f.name!=="ErrnoError")throw f;return f.errno}}function Cs(i,r,a,o){r=bt(r),o>>>=0;try{if(isNaN(r))return 61;var _=G.getStreamFromFD(i);return g.llseek(_,r,a),gt[o>>>3]=BigInt(_.position),_.getdents&&r===0&&a===0&&(_.getdents=null),0}catch(p){if(typeof g>"u"||p.name!=="ErrnoError")throw p;return p.errno}}function Ps(i){try{var r=G.getStreamFromFD(i);return r.stream_ops?.fsync?r.stream_ops.fsync(r):0}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return a.errno}}function bs(i,r,a,o){r>>>=0,a>>>=0,o>>>=0;try{var _=G.getStreamFromFD(i),p=an(_,r,a);return B[o>>>2>>>0]=p,0}catch(f){if(typeof g>"u"||f.name!=="ErrnoError")throw f;return f.errno}}function Ds(i,r){i>>>=0,r>>>=0;try{return Ue(ht.subarray(i>>>0,i+r>>>0)),0}catch(a){if(typeof g>"u"||a.name!=="ErrnoError")throw a;return a.errno}}var sn=(i,r)=>{i<128?r.push(i):r.push(i%128|128,i>>7)},Es=i=>{for(var r={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},a={parameters:[],results:i[0]=="v"?[]:[r[i[0]]]},o=1;o<i.length;++o)a.parameters.push(r[i[o]]);return a},xs=(i,r)=>{var a=i.slice(0,1),o=i.slice(1),_={i:127,p:127,j:126,f:125,d:124,e:111};r.push(96),sn(o.length,r);for(var p of o)r.push(_[p]);a=="v"?r.push(0):r.push(1,_[a])},As=(i,r)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(Es(r),i);var a=[1];xs(r,a);var o=[0,97,115,109,1,0,0,0,1];sn(a.length,o),o.push(...a),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var _=new WebAssembly.Module(new Uint8Array(o)),p=new WebAssembly.Instance(_,{e:{f:i}}),f=p.exports.f;return f},Ts=(i,r)=>{if(ie)for(var a=i;a<i+r;a++){var o=L(a);o&&ie.set(o,a)}},ie,Fs=i=>(ie||(ie=new WeakMap,Ts(0,Ut.length)),ie.get(i)||0),on=[],Gs=()=>{if(on.length)return on.pop();try{Ut.grow(1)}catch(i){throw i instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":i}return Ut.length-1},cn=(i,r)=>{Ut.set(i,r),$e[i]=Ut.get(i)},Rs=(i,r)=>{var a=Fs(i);if(a)return a;var o=Gs();try{cn(o,i)}catch(p){if(!(p instanceof TypeError))throw p;var _=As(i,r);cn(o,_)}return ie.set(i,o),o};g.createPreloadedFile=pr,g.staticInit(),R.doesNotExistError=new g.ErrnoError(44),R.doesNotExistError.stack="<generic error, no stack>",Lr(),Hr(),na(),_a(),e.noExitRuntime&&(Oe=e.noExitRuntime),e.preloadPlugins&&(Oi=e.preloadPlugins),e.print&&(V=e.print),e.printErr&&(ot=e.printErr),e.wasmBinary&&(Ot=e.wasmBinary),e.arguments&&e.arguments,e.thisProgram&&(S=e.thisProgram),e.addFunction=Rs,e.setValue=tr,e.getValue=Zn,e.UTF8ToString=je,e.stringToUTF8=It,e.lengthBytesUTF8=zt,e.FS=g;var Ws={Z:nr,D:ar,a:sr,C:or,ua:fr,sa:mr,va:kr,ba:wr,ra:yr,H:Mr,qa:vr,la:Sr,bb:Ir,ya:Cr,na:Pr,oa:br,F:Dr,ab:Er,_a:xr,$a:Ar,pa:Tr,Za:Fr,Y:Gr,wa:Rr,Na:Br,S:$r,Ha:Ur,L:oa,Fa:ha,w:ua,e:pa,R:fa,p:Sa,v:Ia,n:Ca,Ga:Pa,J:Fa,Oa:Ga,K:Ra,Ia:Wa,_:Ba,Xa:La,Va:Oa,Ka:Ua,l:Ze,La:Ya,Ma:Va,T:Xa,t:qa,B:Ka,Ja:Qa,r:Ja,o:Za,ea:ts,fa:rs,ga:as,ca:ss,da:os,ia:cs,ta:ls,O:tn,Ya:hs,E:Zi,Wa:us,za:ds,Aa:fs,y:ws,z:ys,N:Ms,aa:vs,$:Ss,P:Is,ja:Cs,ma:Ps,G:bs,Sa:so,A:io,c:Ys,d:js,g:Hs,j:Ks,X:ao,b:to,M:_o,m:Zs,Ra:lo,Qa:uo,Ea:ko,Da:wo,s:eo,Ua:no,I:yo,u:Js,ha:Qs,x:oo,k:Vs,f:Xs,W:ho,V:go,i:Ns,h:qs,q:co,Pa:fo,Q:mo,Ca:Mo,U:po,Ba:vo,Ta:ro,xa:nn,ka:Ds},s=await qn();s.db;var Bs=s.eb;e._MagickColor_Create=s.fb,e._MagickColor_Dispose=s.gb,e._MagickColor_Count_Get=s.hb,e._MagickColor_Red_Get=s.ib,e._MagickColor_Red_Set=s.jb,e._MagickColor_Green_Get=s.kb,e._MagickColor_Green_Set=s.lb,e._MagickColor_Blue_Get=s.mb,e._MagickColor_Blue_Set=s.nb,e._MagickColor_Alpha_Get=s.ob,e._MagickColor_Alpha_Set=s.pb,e._MagickColor_Black_Get=s.qb,e._MagickColor_Black_Set=s.rb,e._MagickColor_IsCMYK_Get=s.sb,e._MagickColor_IsCMYK_Set=s.tb,e._MagickColor_Clone=s.ub,e._MagickColor_FuzzyEquals=s.vb,e._MagickColor_Initialize=s.wb,e._MagickColorCollection_DisposeList=s.yb,e._MagickColorCollection_GetInstance=s.zb,e._DrawingWand_Create=s.Ab,e._DrawingWand_Dispose=s.Bb,e._DrawingWand_Affine=s.Cb,e._DrawingWand_Alpha=s.Db,e._DrawingWand_Arc=s.Eb,e._DrawingWand_Bezier=s.Fb,e._DrawingWand_BorderColor=s.Gb,e._DrawingWand_Circle=s.Hb,e._DrawingWand_ClipPath=s.Ib,e._DrawingWand_ClipRule=s.Jb,e._DrawingWand_ClipUnits=s.Kb,e._DrawingWand_Color=s.Lb,e._DrawingWand_Composite=s.Mb,e._DrawingWand_Density=s.Nb,e._DrawingWand_Ellipse=s.Ob,e._DrawingWand_FillColor=s.Pb,e._DrawingWand_FillOpacity=s.Qb,e._DrawingWand_FillPatternUrl=s.Rb,e._DrawingWand_FillRule=s.Sb,e._DrawingWand_Font=s.Tb,e._DrawingWand_FontFamily=s.Ub,e._DrawingWand_FontPointSize=s.Vb,e._DrawingWand_FontTypeMetrics=s.Wb,e._TypeMetric_Create=s.Xb,e._DrawingWand_Gravity=s.Yb,e._DrawingWand_Line=s.Zb,e._DrawingWand_PathArcAbs=s._b,e._DrawingWand_PathArcRel=s.$b,e._DrawingWand_PathClose=s.ac,e._DrawingWand_PathCurveToAbs=s.bc,e._DrawingWand_PathCurveToRel=s.cc,e._DrawingWand_PathFinish=s.dc,e._DrawingWand_PathLineToAbs=s.ec,e._DrawingWand_PathLineToHorizontalAbs=s.fc,e._DrawingWand_PathLineToHorizontalRel=s.gc,e._DrawingWand_PathLineToRel=s.hc,e._DrawingWand_PathLineToVerticalAbs=s.ic,e._DrawingWand_PathLineToVerticalRel=s.jc,e._DrawingWand_PathMoveToAbs=s.kc,e._DrawingWand_PathMoveToRel=s.lc,e._DrawingWand_PathQuadraticCurveToAbs=s.mc,e._DrawingWand_PathQuadraticCurveToRel=s.nc,e._DrawingWand_PathSmoothCurveToAbs=s.oc,e._DrawingWand_PathSmoothCurveToRel=s.pc,e._DrawingWand_PathSmoothQuadraticCurveToAbs=s.qc,e._DrawingWand_PathSmoothQuadraticCurveToRel=s.rc,e._DrawingWand_PathStart=s.sc,e._DrawingWand_Point=s.tc,e._DrawingWand_Polygon=s.uc,e._DrawingWand_Polyline=s.vc,e._DrawingWand_PopClipPath=s.wc,e._DrawingWand_PopGraphicContext=s.xc,e._DrawingWand_PopPattern=s.yc,e._DrawingWand_PushClipPath=s.zc,e._DrawingWand_PushGraphicContext=s.Ac,e._DrawingWand_PushPattern=s.Bc,e._DrawingWand_Rectangle=s.Cc,e._DrawingWand_Render=s.Dc,e._DrawingWand_Rotation=s.Ec,e._DrawingWand_RoundRectangle=s.Fc,e._DrawingWand_Scaling=s.Gc,e._DrawingWand_SkewX=s.Hc,e._DrawingWand_SkewY=s.Ic,e._DrawingWand_StrokeAntialias=s.Jc,e._DrawingWand_StrokeColor=s.Kc,e._DrawingWand_StrokeDashArray=s.Lc,e._DrawingWand_StrokeDashOffset=s.Mc,e._DrawingWand_StrokeLineCap=s.Nc,e._DrawingWand_StrokeLineJoin=s.Oc,e._DrawingWand_StrokeMiterLimit=s.Pc,e._DrawingWand_StrokeOpacity=s.Qc,e._DrawingWand_StrokePatternUrl=s.Rc,e._DrawingWand_StrokeWidth=s.Sc,e._DrawingWand_Text=s.Tc,e._DrawingWand_TextAlignment=s.Uc,e._DrawingWand_TextAntialias=s.Vc,e._DrawingWand_TextDecoration=s.Wc,e._DrawingWand_TextDirection=s.Xc,e._DrawingWand_TextEncoding=s.Yc,e._DrawingWand_TextInterlineSpacing=s.Zc,e._DrawingWand_TextInterwordSpacing=s._c,e._DrawingWand_TextKerning=s.$c,e._DrawingWand_TextUnderColor=s.ad,e._DrawingWand_Translation=s.bd,e._DrawingWand_Viewbox=s.cd,e._MagickExceptionHelper_Description=s.dd,e._MagickExceptionHelper_Dispose=s.ed,e._MagickExceptionHelper_Related=s.fd,e._MagickExceptionHelper_RelatedCount=s.gd,e._MagickExceptionHelper_Message=s.hd,e._MagickExceptionHelper_Severity=s.id,e._PdfInfo_PageCount=s.jd,e._Environment_Initialize=s.kd,e._Environment_GetEnv=s.ld,e._Environment_SetEnv=s.md,e._MagickMemory_Relinquish=s.nd,e._Magick_Delegates_Get=s.od,e._Magick_Features_Get=s.pd,e._Magick_ImageMagickVersion_Get=s.qd,e._Magick_GetFonts=s.rd,e._Magick_GetFontFamily=s.sd,e._Magick_GetFontName=s.td,e._Magick_GetWindowsResource=s.ud,e._Magick_DisposeFonts=s.vd,e._Magick_ResetRandomSeed=s.wd,e._Magick_SetDefaultFontFile=s.xd,e._Magick_SetRandomSeed=s.yd,e._Magick_SetLogDelegate=s.zd,e._Magick_SetLogEvents=s.Ad,e._MagickFormatInfo_CreateList=s.Bd,e._MagickFormatInfo_DisposeList=s.Cd,e._MagickFormatInfo_CanReadMultithreaded_Get=s.Dd,e._MagickFormatInfo_CanWriteMultithreaded_Get=s.Ed,e._MagickFormatInfo_Description_Get=s.Fd,e._MagickFormatInfo_Format_Get=s.Gd,e._MagickFormatInfo_MimeType_Get=s.Hd,e._MagickFormatInfo_Module_Get=s.Id,e._MagickFormatInfo_SupportsMultipleFrames_Get=s.Jd,e._MagickFormatInfo_SupportsReading_Get=s.Kd,e._MagickFormatInfo_SupportsWriting_Get=s.Ld,e._MagickFormatInfo_GetInfo=s.Md,e._MagickFormatInfo_GetInfoByName=s.Nd,e._MagickFormatInfo_GetInfoWithBlob=s.Od,e._MagickFormatInfo_Unregister=s.Pd,e._MagickImage_Create=s.Qd,e._MagickImage_Dispose=s.Rd,e._MagickImage_AnimationDelay_Get=s.Sd,e._MagickImage_AnimationDelay_Set=s.Td,e._MagickImage_AnimationIterations_Get=s.Ud,e._MagickImage_AnimationIterations_Set=s.Vd,e._MagickImage_AnimationTicksPerSecond_Get=s.Wd,e._MagickImage_AnimationTicksPerSecond_Set=s.Xd,e._MagickImage_BackgroundColor_Get=s.Yd,e._MagickImage_BackgroundColor_Set=s.Zd,e._MagickImage_BaseHeight_Get=s._d,e._MagickImage_BaseWidth_Get=s.$d,e._MagickImage_BlackPointCompensation_Get=s.ae,e._MagickImage_BlackPointCompensation_Set=s.be,e._MagickImage_BorderColor_Get=s.ce,e._MagickImage_BorderColor_Set=s.de,e._MagickImage_BoundingBox_Get=s.ee,e._MagickRectangle_Create=s.fe,e._MagickImage_ChannelCount_Get=s.ge,e._MagickImage_ChromaBlue_Get=s.he,e._PrimaryInfo_Create=s.ie,e._MagickImage_ChromaBlue_Set=s.je,e._MagickImage_ChromaGreen_Get=s.ke,e._MagickImage_ChromaGreen_Set=s.le,e._MagickImage_ChromaRed_Get=s.me,e._MagickImage_ChromaRed_Set=s.ne,e._MagickImage_ChromaWhite_Get=s.oe,e._MagickImage_ChromaWhite_Set=s.pe,e._MagickImage_ClassType_Get=s.qe,e._MagickImage_ClassType_Set=s.re,e._QuantizeSettings_Create=s.se,e._QuantizeSettings_Dispose=s.te,e._MagickImage_ColorFuzz_Get=s.ue,e._MagickImage_ColorFuzz_Set=s.ve,e._MagickImage_ColormapSize_Get=s.we,e._MagickImage_ColormapSize_Set=s.xe,e._MagickImage_ColorSpace_Get=s.ye,e._MagickImage_ColorSpace_Set=s.ze,e._MagickImage_ColorType_Get=s.Ae,e._MagickImage_ColorType_Set=s.Be,e._MagickImage_Compose_Get=s.Ce,e._MagickImage_Compose_Set=s.De,e._MagickImage_Compression_Get=s.Ee,e._MagickImage_Compression_Set=s.Fe,e._MagickImage_Depth_Get=s.Ge,e._MagickImage_Depth_Set=s.He,e._MagickImage_EncodingGeometry_Get=s.Ie,e._MagickImage_Endian_Get=s.Je,e._MagickImage_Endian_Set=s.Ke,e._MagickImage_FileName_Get=s.Le,e._MagickImage_FileName_Set=s.Me,e._MagickImage_FilterType_Get=s.Ne,e._MagickImage_FilterType_Set=s.Oe,e._MagickImage_Format_Get=s.Pe,e._MagickImage_Format_Set=s.Qe,e._MagickImage_Gamma_Get=s.Re,e._MagickImage_GifDisposeMethod_Get=s.Se,e._MagickImage_GifDisposeMethod_Set=s.Te,e._MagickImage_HasAlpha_Get=s.Ue,e._MagickImage_HasAlpha_Set=s.Ve,e._MagickImage_Height_Get=s.We,e._MagickImage_Interlace_Get=s.Xe,e._MagickImage_Interlace_Set=s.Ye,e._MagickImage_Interpolate_Get=s.Ze,e._MagickImage_Interpolate_Set=s._e,e._MagickImage_IsOpaque_Get=s.$e,e._MagickImage_MatteColor_Get=s.af,e._MagickImage_MatteColor_Set=s.bf,e._MagickImage_MeanErrorPerPixel_Get=s.cf,e._MagickImage_MetaChannelCount_Get=s.df,e._MagickImage_MetaChannelCount_Set=s.ef,e._MagickImage_NormalizedMaximumError_Get=s.ff,e._MagickImage_NormalizedMeanError_Get=s.gf,e._MagickImage_Orientation_Get=s.hf,e._MagickImage_Orientation_Set=s.jf,e._MagickImage_Page_Get=s.kf,e._MagickImage_Page_Set=s.lf,e._MagickImage_Quality_Get=s.mf,e._MagickImage_Quality_Set=s.nf,e._MagickImage_RenderingIntent_Get=s.of,e._MagickImage_RenderingIntent_Set=s.pf,e._MagickImage_ResolutionUnits_Get=s.qf,e._MagickImage_ResolutionUnits_Set=s.rf,e._MagickImage_ResolutionX_Get=s.sf,e._MagickImage_ResolutionX_Set=s.tf,e._MagickImage_ResolutionY_Get=s.uf,e._MagickImage_ResolutionY_Set=s.vf,e._MagickImage_Signature_Get=s.wf,e._MagickImage_TotalColors_Get=s.xf,e._MagickImage_VirtualPixelMethod_Get=s.yf,e._MagickImage_VirtualPixelMethod_Set=s.zf,e._MagickImage_Width_Get=s.Af,e._MagickImage_AdaptiveBlur=s.Bf,e._MagickImage_AdaptiveResize=s.Cf,e._MagickImage_AdaptiveSharpen=s.Df,e._MagickImage_AdaptiveThreshold=s.Ef,e._MagickImage_AddNoise=s.Ff,e._MagickImage_AffineTransform=s.Gf,e._MagickImage_Annotate=s.Hf,e._MagickImage_AutoGamma=s.If,e._MagickImage_AutoLevel=s.Jf,e._MagickImage_AutoOrient=s.Kf,e._MagickImage_AutoThreshold=s.Lf,e._MagickImage_BilateralBlur=s.Mf,e._MagickImage_BlackThreshold=s.Nf,e._MagickImage_BlueShift=s.Of,e._MagickImage_Blur=s.Pf,e._MagickImage_Border=s.Qf,e._MagickImage_BrightnessContrast=s.Rf,e._MagickImage_CannyEdge=s.Sf,e._MagickImage_ChannelOffset=s.Tf,e._MagickImage_Charcoal=s.Uf,e._MagickImage_Chop=s.Vf,e._MagickImage_Clahe=s.Wf,e._MagickImage_Clamp=s.Xf,e._MagickImage_ClipPath=s.Yf,e._MagickImage_Clone=s.Zf,e._MagickImage_CloneArea=s._f,e._MagickImage_Clut=s.$f,e._MagickImage_ColorDecisionList=s.ag,e._MagickImage_Colorize=s.bg,e._MagickImage_ColorMatrix=s.cg,e._MagickImage_ColorThreshold=s.dg,e._MagickImage_Compare=s.eg,e._MagickImage_CompareDistortion=s.fg,e._MagickImage_Composite=s.gg,e._MagickImage_CompositeGravity=s.hg,e._MagickImage_ConnectedComponents=s.ig,e._MagickImage_Contrast=s.jg,e._MagickImage_ContrastStretch=s.kg,e._MagickImage_ConvexHull=s.lg,e._MagickImage_Convolve=s.mg,e._MagickImage_CopyPixels=s.ng,e._MagickImage_Crop=s.og,e._MagickImage_CropToTiles=s.pg,e._MagickImage_CycleColormap=s.qg,e._MagickImage_Decipher=s.rg,e._MagickImage_Deskew=s.sg,e._MagickImage_Despeckle=s.tg,e._MagickImage_DetermineBitDepth=s.ug,e._MagickImage_DetermineColorType=s.vg,e._MagickImage_Distort=s.wg,e._MagickImage_Edge=s.xg,e._MagickImage_Emboss=s.yg,e._MagickImage_Encipher=s.zg,e._MagickImage_Enhance=s.Ag,e._MagickImage_Equalize=s.Bg,e._MagickImage_Equals=s.Cg,e._MagickImage_EvaluateFunction=s.Dg,e._MagickImage_EvaluateGeometry=s.Eg,e._MagickImage_EvaluateOperator=s.Fg,e._MagickImage_Extent=s.Gg,e._MagickImage_Flip=s.Hg,e._MagickImage_FloodFill=s.Ig,e._MagickImage_Flop=s.Jg,e._MagickImage_FontTypeMetrics=s.Kg,e._MagickImage_FormatExpression=s.Lg,e._MagickImage_Frame=s.Mg,e._MagickImage_Fx=s.Ng,e._MagickImage_GammaCorrect=s.Og,e._MagickImage_GaussianBlur=s.Pg,e._MagickImage_GetArtifact=s.Qg,e._MagickImage_GetAttribute=s.Rg,e._MagickImage_GetColormapColor=s.Sg,e._MagickImage_GetNext=s.Tg,e._MagickImage_GetNextArtifactName=s.Ug,e._MagickImage_GetNextAttributeName=s.Vg,e._MagickImage_GetNextProfileName=s.Wg,e._MagickImage_GetProfile=s.Xg,e._MagickImage_GetReadMask=s.Yg,e._MagickImage_GetWriteMask=s.Zg,e._MagickImage_Grayscale=s._g,e._MagickImage_HaldClut=s.$g,e._MagickImage_HasChannel=s.ah,e._MagickImage_HasProfile=s.bh,e._MagickImage_Histogram=s.ch,e._MagickImage_HoughLine=s.dh,e._MagickImage_Implode=s.eh,e._MagickImage_ImportPixels=s.fh,e._MagickImage_Integral=s.gh,e._MagickImage_InterpolativeResize=s.hh,e._MagickImage_InverseLevel=s.ih,e._MagickImage_Kmeans=s.jh,e._MagickImage_Kuwahara=s.kh,e._MagickImage_Level=s.lh,e._MagickImage_LevelColors=s.mh,e._MagickImage_LinearStretch=s.nh,e._MagickImage_LiquidRescale=s.oh,e._MagickImage_LocalContrast=s.ph,e._MagickImage_Magnify=s.qh,e._MagickImage_MeanShift=s.rh,e._MagickImage_Minify=s.sh,e._MagickImage_MinimumBoundingBox=s.th,e._MagickImage_Modulate=s.uh,e._MagickImage_Moments=s.vh,e._MagickImage_Morphology=s.wh,e._MagickImage_MotionBlur=s.xh,e._MagickImage_Negate=s.yh,e._MagickImage_Normalize=s.zh,e._MagickImage_OilPaint=s.Ah,e._MagickImage_Opaque=s.Bh,e._MagickImage_OrderedDither=s.Ch,e._MagickImage_Perceptible=s.Dh,e._MagickImage_PerceptualHash=s.Eh,e._MagickImage_Quantize=s.Fh,e._MagickImage_Polaroid=s.Gh,e._MagickImage_Posterize=s.Hh,e._MagickImage_RaiseOrLower=s.Ih,e._MagickImage_RandomThreshold=s.Jh,e._MagickImage_RangeThreshold=s.Kh,e._MagickImage_ReadBlob=s.Lh,e._MagickImage_ReadFile=s.Mh,e._MagickImage_ReadPixels=s.Nh,e._MagickImage_ReadStream=s.Oh,e._MagickImage_RegionMask=s.Ph,e._MagickImage_Remap=s.Qh,e._MagickImage_RemoveArtifact=s.Rh,e._MagickImage_RemoveAttribute=s.Sh,e._MagickImage_RemoveProfile=s.Th,e._MagickImage_ResetArtifactIterator=s.Uh,e._MagickImage_ResetAttributeIterator=s.Vh,e._MagickImage_ResetProfileIterator=s.Wh,e._MagickImage_Resample=s.Xh,e._MagickImage_Resize=s.Yh,e._MagickImage_Roll=s.Zh,e._MagickImage_Rotate=s._h,e._MagickImage_RotationalBlur=s.$h,e._MagickImage_Sample=s.ai,e._MagickImage_Scale=s.bi,e._MagickImage_Segment=s.ci,e._MagickImage_SelectiveBlur=s.di,e._MagickImage_Separate=s.ei,e._MagickImage_SepiaTone=s.fi,e._MagickImage_SetAlpha=s.gi,e._MagickImage_SetArtifact=s.hi,e._MagickImage_SetAttribute=s.ii,e._MagickImage_SetBitDepth=s.ji,e._MagickImage_SetClientData=s.ki,e._MagickImage_SetColormapColor=s.li,e._MagickImage_SetColorMetric=s.mi,e._MagickImage_SetNext=s.ni,e._MagickImage_SetProfile=s.oi,e._MagickImage_SetProgressDelegate=s.pi,e._MagickImage_SetReadMask=s.qi,e._MagickImage_SetWriteMask=s.ri,e._MagickImage_Shade=s.si,e._MagickImage_Shadow=s.ti,e._MagickImage_Sharpen=s.ui,e._MagickImage_Shave=s.vi,e._MagickImage_Shear=s.wi,e._MagickImage_SigmoidalContrast=s.xi,e._MagickImage_SparseColor=s.yi,e._MagickImage_Spread=s.zi,e._MagickImage_Sketch=s.Ai,e._MagickImage_Solarize=s.Bi,e._MagickImage_SortPixels=s.Ci,e._MagickImage_Splice=s.Di,e._MagickImage_Statistic=s.Ei,e._MagickImage_Statistics=s.Fi,e._MagickImage_Stegano=s.Gi,e._MagickImage_Stereo=s.Hi,e._MagickImage_Strip=s.Ii,e._MagickImage_SubImageSearch=s.Ji,e._MagickImage_Swirl=s.Ki,e._MagickImage_Texture=s.Li,e._MagickImage_Threshold=s.Mi,e._MagickImage_Thumbnail=s.Ni,e._MagickImage_Tint=s.Oi,e._MagickImage_Transparent=s.Pi,e._MagickImage_TransparentChroma=s.Qi,e._MagickImage_Transpose=s.Ri,e._MagickImage_Transverse=s.Si,e._MagickImage_Trim=s.Ti,e._MagickImage_UniqueColors=s.Ui,e._MagickImage_UnsharpMask=s.Vi,e._MagickImage_Vignette=s.Wi,e._MagickImage_Wave=s.Xi,e._MagickImage_WaveletDenoise=s.Yi,e._MagickImage_WhiteBalance=s.Zi,e._MagickImage_WhiteThreshold=s._i,e._MagickImage_WriteBlob=s.$i,e._MagickImage_WriteFile=s.aj,e._MagickImage_WriteStream=s.bj,e._MagickImageCollection_Append=s.cj,e._MagickImageCollection_Coalesce=s.dj,e._MagickImageCollection_Combine=s.ej,e._MagickImageCollection_Complex=s.fj,e._MagickImageCollection_Deconstruct=s.gj,e._MagickImageCollection_Dispose=s.hj,e._MagickImageCollection_Evaluate=s.ij,e._MagickImageCollection_Fx=s.jj,e._MagickImageCollection_Merge=s.kj,e._MagickImageCollection_Montage=s.lj,e._MagickImageCollection_Morph=s.mj,e._MagickImageCollection_Optimize=s.nj,e._MagickImageCollection_OptimizePlus=s.oj,e._MagickImageCollection_OptimizeTransparency=s.pj,e._MagickImageCollection_Polynomial=s.qj,e._MagickImageCollection_Quantize=s.rj,e._MagickImageCollection_ReadBlob=s.sj,e._MagickImageCollection_ReadFile=s.tj,e._MagickImageCollection_ReadStream=s.uj,e._MagickImageCollection_Remap=s.vj,e._MagickImageCollection_Smush=s.wj,e._MagickImageCollection_WriteFile=s.xj,e._MagickImageCollection_WriteStream=s.yj,e._DoubleMatrix_Create=s.zj,e._DoubleMatrix_Dispose=s.Aj,e._OpenCL_GetDevices=s.Bj,e._OpenCL_GetDevice=s.Cj,e._OpenCL_GetEnabled=s.Dj,e._OpenCL_SetEnabled=s.Ej,e._OpenCLDevice_DeviceType_Get=s.Fj,e._OpenCLDevice_BenchmarkScore_Get=s.Gj,e._OpenCLDevice_IsEnabled_Get=s.Hj,e._OpenCLDevice_IsEnabled_Set=s.Ij,e._OpenCLDevice_Name_Get=s.Jj,e._OpenCLDevice_Version_Get=s.Kj,e._OpenCLDevice_GetKernelProfileRecords=s.Lj,e._OpenCLDevice_GetKernelProfileRecord=s.Mj,e._OpenCLDevice_SetProfileKernels=s.Nj,e._OpenCLKernelProfileRecord_Count_Get=s.Oj,e._OpenCLKernelProfileRecord_Name_Get=s.Pj,e._OpenCLKernelProfileRecord_MaximumDuration_Get=s.Qj,e._OpenCLKernelProfileRecord_MinimumDuration_Get=s.Rj,e._OpenCLKernelProfileRecord_TotalDuration_Get=s.Sj,e._JpegOptimizer_CompressFile=s.Tj,e._JpegOptimizer_CompressStream=s.Uj;var _n=e._malloc=s.Vj,jt=e._free=s.Wj;e._PixelCollection_Create=s.Xj,e._PixelCollection_Dispose=s.Yj,e._PixelCollection_GetArea=s.Zj,e._PixelCollection_GetReadOnlyArea=s._j,e._PixelCollection_SetArea=s.$j,e._PixelCollection_ToByteArray=s.ak,e._PixelCollection_ToShortArray=s.bk,e._Quantum_Depth_Get=s.ck,e._Quantum_Max_Get=s.dk,e._ResourceLimits_Area_Get=s.ek,e._ResourceLimits_Area_Set=s.fk,e._ResourceLimits_Disk_Get=s.gk,e._ResourceLimits_Disk_Set=s.hk,e._ResourceLimits_Height_Get=s.ik,e._ResourceLimits_Height_Set=s.jk,e._ResourceLimits_ListLength_Get=s.kk,e._ResourceLimits_ListLength_Set=s.lk,e._ResourceLimits_MaxMemoryRequest_Get=s.mk,e._ResourceLimits_MaxMemoryRequest_Set=s.nk,e._ResourceLimits_MaxProfileSize_Get=s.ok,e._ResourceLimits_MaxProfileSize_Set=s.pk,e._ResourceLimits_Memory_Get=s.qk,e._ResourceLimits_Memory_Set=s.rk,e._ResourceLimits_Thread_Get=s.sk,e._ResourceLimits_Thread_Set=s.tk,e._ResourceLimits_Throttle_Get=s.uk,e._ResourceLimits_Throttle_Set=s.vk,e._ResourceLimits_Time_Get=s.wk,e._ResourceLimits_Time_Set=s.xk,e._ResourceLimits_Width_Get=s.yk,e._ResourceLimits_Width_Set=s.zk,e._ResourceLimits_LimitMemory=s.Ak,e._ResourceLimits_TrimMemory=s.Bk,e._DrawingSettings_Create=s.Ck,e._DrawingSettings_Dispose=s.Dk,e._DrawingSettings_BorderColor_Get=s.Ek,e._DrawingSettings_BorderColor_Set=s.Fk,e._DrawingSettings_FillColor_Get=s.Gk,e._DrawingSettings_FillColor_Set=s.Hk,e._DrawingSettings_FillRule_Get=s.Ik,e._DrawingSettings_FillRule_Set=s.Jk,e._DrawingSettings_Font_Get=s.Kk,e._DrawingSettings_Font_Set=s.Lk,e._DrawingSettings_FontFamily_Get=s.Mk,e._DrawingSettings_FontFamily_Set=s.Nk,e._DrawingSettings_FontPointsize_Get=s.Ok,e._DrawingSettings_FontPointsize_Set=s.Pk,e._DrawingSettings_FontStyle_Get=s.Qk,e._DrawingSettings_FontStyle_Set=s.Rk,e._DrawingSettings_FontWeight_Get=s.Sk,e._DrawingSettings_FontWeight_Set=s.Tk,e._DrawingSettings_StrokeAntiAlias_Get=s.Uk,e._DrawingSettings_StrokeAntiAlias_Set=s.Vk,e._DrawingSettings_StrokeColor_Get=s.Wk,e._DrawingSettings_StrokeColor_Set=s.Xk,e._DrawingSettings_StrokeDashOffset_Get=s.Yk,e._DrawingSettings_StrokeDashOffset_Set=s.Zk,e._DrawingSettings_StrokeLineCap_Get=s._k,e._DrawingSettings_StrokeLineCap_Set=s.$k,e._DrawingSettings_StrokeLineJoin_Get=s.al,e._DrawingSettings_StrokeLineJoin_Set=s.bl,e._DrawingSettings_StrokeMiterLimit_Get=s.cl,e._DrawingSettings_StrokeMiterLimit_Set=s.dl,e._DrawingSettings_StrokeWidth_Get=s.el,e._DrawingSettings_StrokeWidth_Set=s.fl,e._DrawingSettings_TextAntiAlias_Get=s.gl,e._DrawingSettings_TextAntiAlias_Set=s.hl,e._DrawingSettings_TextDirection_Get=s.il,e._DrawingSettings_TextDirection_Set=s.jl,e._DrawingSettings_TextEncoding_Get=s.kl,e._DrawingSettings_TextEncoding_Set=s.ll,e._DrawingSettings_TextGravity_Get=s.ml,e._DrawingSettings_TextGravity_Set=s.nl,e._DrawingSettings_TextInterlineSpacing_Get=s.ol,e._DrawingSettings_TextInterlineSpacing_Set=s.pl,e._DrawingSettings_TextInterwordSpacing_Get=s.ql,e._DrawingSettings_TextInterwordSpacing_Set=s.rl,e._DrawingSettings_TextKerning_Get=s.sl,e._DrawingSettings_TextKerning_Set=s.tl,e._DrawingSettings_TextUnderColor_Get=s.ul,e._DrawingSettings_TextUnderColor_Set=s.vl,e._DrawingSettings_SetAffine=s.wl,e._DrawingSettings_SetFillPattern=s.xl,e._DrawingSettings_SetStrokeDashArray=s.yl,e._DrawingSettings_SetStrokePattern=s.zl,e._DrawingSettings_SetText=s.Al,e._MagickSettings_Create=s.Bl,e._MagickSettings_Dispose=s.Cl,e._MagickSettings_AntiAlias_Get=s.Dl,e._MagickSettings_AntiAlias_Set=s.El,e._MagickSettings_BackgroundColor_Get=s.Fl,e._MagickSettings_BackgroundColor_Set=s.Gl,e._MagickSettings_ColorSpace_Get=s.Hl,e._MagickSettings_ColorSpace_Set=s.Il,e._MagickSettings_ColorType_Get=s.Jl,e._MagickSettings_ColorType_Set=s.Kl,e._MagickSettings_Compression_Get=s.Ll,e._MagickSettings_Compression_Set=s.Ml,e._MagickSettings_Debug_Get=s.Nl,e._MagickSettings_Debug_Set=s.Ol,e._MagickSettings_Density_Get=s.Pl,e._MagickSettings_Density_Set=s.Ql,e._MagickSettings_Depth_Get=s.Rl,e._MagickSettings_Depth_Set=s.Sl,e._MagickSettings_Endian_Get=s.Tl,e._MagickSettings_Endian_Set=s.Ul,e._MagickSettings_Extract_Get=s.Vl,e._MagickSettings_Extract_Set=s.Wl,e._MagickSettings_Format_Get=s.Xl,e._MagickSettings_Format_Set=s.Yl,e._MagickSettings_FontPointsize_Get=s.Zl,e._MagickSettings_FontPointsize_Set=s._l,e._MagickSettings_Interlace_Get=s.$l,e._MagickSettings_Interlace_Set=s.am,e._MagickSettings_Monochrome_Get=s.bm,e._MagickSettings_Monochrome_Set=s.cm,e._MagickSettings_Verbose_Get=s.dm,e._MagickSettings_Verbose_Set=s.em,e._MagickSettings_SetColorFuzz=s.fm,e._MagickSettings_SetFileName=s.gm,e._MagickSettings_SetFont=s.hm,e._MagickSettings_SetNumberScenes=s.im,e._MagickSettings_SetOption=s.jm,e._MagickSettings_SetPage=s.km,e._MagickSettings_SetPing=s.lm,e._MagickSettings_SetQuality=s.mm,e._MagickSettings_SetScenes=s.nm,e._MagickSettings_SetScene=s.om,e._MagickSettings_SetSize=s.pm,e._MontageSettings_Create=s.qm,e._MontageSettings_Dispose=s.rm,e._MontageSettings_SetBackgroundColor=s.sm,e._MontageSettings_SetBorderColor=s.tm,e._MontageSettings_SetBorderWidth=s.um,e._MontageSettings_SetFillColor=s.vm,e._MontageSettings_SetFont=s.wm,e._MontageSettings_SetFontPointsize=s.xm,e._MontageSettings_SetFrameGeometry=s.ym,e._MontageSettings_SetGeometry=s.zm,e._MontageSettings_SetGravity=s.Am,e._MontageSettings_SetShadow=s.Bm,e._MontageSettings_SetStrokeColor=s.Cm,e._MontageSettings_SetTextureFileName=s.Dm,e._MontageSettings_SetTileGeometry=s.Em,e._MontageSettings_SetTitle=s.Fm,e._QuantizeSettings_SetColors=s.Gm,e._QuantizeSettings_SetColorSpace=s.Hm,e._QuantizeSettings_SetDitherMethod=s.Im,e._QuantizeSettings_SetMeasureErrors=s.Jm,e._QuantizeSettings_SetTreeDepth=s.Km,e._ChannelMoments_Centroid_Get=s.Lm,e._ChannelMoments_EllipseAngle_Get=s.Mm,e._ChannelMoments_EllipseAxis_Get=s.Nm,e._ChannelMoments_EllipseEccentricity_Get=s.Om,e._ChannelMoments_EllipseIntensity_Get=s.Pm,e._ChannelMoments_GetHuInvariants=s.Qm,e._ChannelPerceptualHash_GetHuPhash=s.Rm,e._ChannelStatistics_Depth_Get=s.Sm,e._ChannelStatistics_Entropy_Get=s.Tm,e._ChannelStatistics_Kurtosis_Get=s.Um,e._ChannelStatistics_Maximum_Get=s.Vm,e._ChannelStatistics_Mean_Get=s.Wm,e._ChannelStatistics_Minimum_Get=s.Xm,e._ChannelStatistics_Skewness_Get=s.Ym,e._ChannelStatistics_StandardDeviation_Get=s.Zm,e._Moments_DisposeList=s._m,e._Moments_GetInstance=s.$m,e._PerceptualHash_DisposeList=s.an,e._PerceptualHash_GetInstance=s.bn,e._Statistics_DisposeList=s.cn,e._Statistics_GetInstance=s.dn,e._ConnectedComponent_DisposeList=s.en,e._ConnectedComponent_GetArea=s.fn,e._ConnectedComponent_GetCentroid=s.gn,e._ConnectedComponent_GetColor=s.hn,e._ConnectedComponent_GetHeight=s.jn,e._ConnectedComponent_GetId=s.kn,e._ConnectedComponent_GetWidth=s.ln,e._ConnectedComponent_GetX=s.mn,e._ConnectedComponent_GetY=s.nn,e._ConnectedComponent_GetInstance=s.on,e._MagickGeometry_Create=s.pn,e._MagickGeometry_Dispose=s.qn,e._MagickGeometry_X_Get=s.rn,e._MagickGeometry_Y_Get=s.sn,e._MagickGeometry_Width_Get=s.tn,e._MagickGeometry_Height_Get=s.un,e._MagickGeometry_Initialize=s.vn,e._MagickRectangle_Dispose=s.wn,e._MagickRectangle_X_Get=s.xn,e._MagickRectangle_X_Set=s.yn,e._MagickRectangle_Y_Get=s.zn,e._MagickRectangle_Y_Set=s.An,e._MagickRectangle_Width_Get=s.Bn,e._MagickRectangle_Width_Set=s.Cn,e._MagickRectangle_Height_Get=s.Dn,e._MagickRectangle_Height_Set=s.En,e._MagickRectangle_FromPageSize=s.Fn,e._OffsetInfo_Create=s.Gn,e._OffsetInfo_Dispose=s.Hn,e._OffsetInfo_SetX=s.In,e._OffsetInfo_SetY=s.Jn,e._PointInfo_X_Get=s.Kn,e._PointInfo_Y_Get=s.Ln,e._PointInfoCollection_Create=s.Mn,e._PointInfoCollection_Dispose=s.Nn,e._PointInfoCollection_GetX=s.On,e._PointInfoCollection_GetY=s.Pn,e._PointInfoCollection_Set=s.Qn,e._PrimaryInfo_Dispose=s.Rn,e._PrimaryInfo_X_Get=s.Sn,e._PrimaryInfo_X_Set=s.Tn,e._PrimaryInfo_Y_Get=s.Un,e._PrimaryInfo_Y_Set=s.Vn,e._PrimaryInfo_Z_Get=s.Wn,e._PrimaryInfo_Z_Set=s.Xn,e._StringInfo_Length_Get=s.Yn,e._StringInfo_Datum_Get=s.Zn,e._TypeMetric_Dispose=s._n,e._TypeMetric_Ascent_Get=s.$n,e._TypeMetric_Descent_Get=s.ao,e._TypeMetric_MaxHorizontalAdvance_Get=s.bo,e._TypeMetric_TextHeight_Get=s.co,e._TypeMetric_TextWidth_Get=s.eo,e._TypeMetric_UnderlinePosition_Get=s.fo,e._TypeMetric_UnderlineThickness_Get=s.go;var Ls=s.ho,U=s.io,Os=s.jo,$s=s.ko,Us=s.lo,zs=s.mo;function Ns(i,r,a,o){var _=$();try{L(i)(r,a,o)}catch(p){if(O(_),p!==p+0)throw p;U(1,0)}}function Hs(i,r,a,o){var _=$();try{return L(i)(r,a,o)}catch(p){if(O(_),p!==p+0)throw p;U(1,0)}}function js(i,r,a){var o=$();try{return L(i)(r,a)}catch(_){if(O(o),_!==_+0)throw _;U(1,0)}}function Ys(i,r){var a=$();try{return L(i)(r)}catch(o){if(O(a),o!==o+0)throw o;U(1,0)}}function Vs(i,r){var a=$();try{L(i)(r)}catch(o){if(O(a),o!==o+0)throw o;U(1,0)}}function Xs(i,r,a){var o=$();try{L(i)(r,a)}catch(_){if(O(o),_!==_+0)throw _;U(1,0)}}function qs(i,r,a,o,_){var p=$();try{L(i)(r,a,o,_)}catch(f){if(O(p),f!==f+0)throw f;U(1,0)}}function Ks(i,r,a,o,_){var p=$();try{return L(i)(r,a,o,_)}catch(f){if(O(p),f!==f+0)throw f;U(1,0)}}function Qs(i,r,a,o){var _=$();try{return L(i)(r,a,o)}catch(p){if(O(_),p!==p+0)throw p;return U(1,0),0n}}function Js(i,r){var a=$();try{return L(i)(r)}catch(o){if(O(a),o!==o+0)throw o;return U(1,0),0n}}function Zs(i,r,a,o,_,p,f,m,y){var M=$();try{return L(i)(r,a,o,_,p,f,m,y)}catch(v){if(O(M),v!==v+0)throw v;U(1,0)}}function to(i,r,a,o,_,p,f){var m=$();try{return L(i)(r,a,o,_,p,f)}catch(y){if(O(m),y!==y+0)throw y;U(1,0)}}function eo(i,r,a,o,_){var p=$();try{return L(i)(r,a,o,_)}catch(f){if(O(p),f!==f+0)throw f;U(1,0)}}function io(i){var r=$();try{return L(i)()}catch(a){if(O(r),a!==a+0)throw a;U(1,0)}}function no(i,r,a){var o=$();try{return L(i)(r,a)}catch(_){if(O(o),_!==_+0)throw _;U(1,0)}}function ro(i,r,a){var o=$();try{L(i)(r,a)}catch(_){if(O(o),_!==_+0)throw _;U(1,0)}}function ao(i,r,a,o,_,p){var f=$();try{return L(i)(r,a,o,_,p)}catch(m){if(O(f),m!==m+0)throw m;U(1,0)}}function so(i,r,a){var o=$();try{return L(i)(r,a)}catch(_){if(O(o),_!==_+0)throw _;U(1,0)}}function oo(i){var r=$();try{L(i)()}catch(a){if(O(r),a!==a+0)throw a;U(1,0)}}function co(i,r,a,o,_,p){var f=$();try{L(i)(r,a,o,_,p)}catch(m){if(O(f),m!==m+0)throw m;U(1,0)}}function _o(i,r,a,o,_,p,f,m){var y=$();try{return L(i)(r,a,o,_,p,f,m)}catch(M){if(O(y),M!==M+0)throw M;U(1,0)}}function lo(i,r,a,o,_,p,f,m,y,M){var v=$();try{return L(i)(r,a,o,_,p,f,m,y,M)}catch(I){if(O(v),I!==I+0)throw I;U(1,0)}}function ho(i,r,a,o){var _=$();try{L(i)(r,a,o)}catch(p){if(O(_),p!==p+0)throw p;U(1,0)}}function go(i,r,a,o,_,p,f,m,y,M,v){var I=$();try{L(i)(r,a,o,_,p,f,m,y,M,v)}catch(b){if(O(I),b!==b+0)throw b;U(1,0)}}function uo(i,r,a,o,_,p,f,m,y,M,v){var I=$();try{return L(i)(r,a,o,_,p,f,m,y,M,v)}catch(b){if(O(I),b!==b+0)throw b;U(1,0)}}function po(i,r,a,o,_,p,f,m,y,M){var v=$();try{L(i)(r,a,o,_,p,f,m,y,M)}catch(I){if(O(v),I!==I+0)throw I;U(1,0)}}function fo(i,r,a,o,_,p,f){var m=$();try{L(i)(r,a,o,_,p,f)}catch(y){if(O(m),y!==y+0)throw y;U(1,0)}}function mo(i,r,a,o,_,p,f,m){var y=$();try{L(i)(r,a,o,_,p,f,m)}catch(M){if(O(y),M!==M+0)throw M;U(1,0)}}function ko(i,r,a,o,_,p,f,m,y,M,v,I){var b=$();try{return L(i)(r,a,o,_,p,f,m,y,M,v,I)}catch(P){if(O(b),P!==P+0)throw P;U(1,0)}}function wo(i,r,a,o,_,p){var f=$();try{return L(i)(r,a,o,_,p)}catch(m){if(O(f),m!==m+0)throw m;U(1,0)}}function yo(i,r){var a=$();try{return L(i)(r)}catch(o){if(O(a),o!==o+0)throw o;U(1,0)}}function Mo(i,r,a,o,_,p,f,m,y){var M=$();try{L(i)(r,a,o,_,p,f,m,y)}catch(v){if(O(M),v!==v+0)throw v;U(1,0)}}function vo(i,r,a,o,_,p,f,m,y,M,v,I){var b=$();try{L(i)(r,a,o,_,p,f,m,y,M,v,I)}catch(P){if(O(b),P!==P+0)throw P;U(1,0)}}function So(i){i=Object.assign({},i);var r=_=>p=>_(p)>>>0,a=_=>(p,f)=>_(p,f)>>>0,o=_=>()=>_()>>>0;return i.eb=r(i.eb),i.Vj=r(i.Vj),i.ho=a(i.ho),i._emscripten_stack_alloc=r(i._emscripten_stack_alloc),i.lo=o(i.lo),i}function ni(){if($t>0){_e=ni;return}if($n(),$t>0){_e=ni;return}function i(){e.calledRun=!0,!We&&(Un(),c(e),e.onRuntimeInitialized?.(),zn())}e.setStatus?(e.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>e.setStatus(""),1),i()},1)):i()}function Io(){if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.shift()()}return Io(),ni(),n=d,n}})();class Xo{constructor(t){if(t instanceof URL){if(t.protocol!=="http:"&&t.protocol!=="https:")throw new z("Only http/https protocol is supported");this.locateFile=()=>t.href}else t instanceof WebAssembly.Module?this.instantiateWasm=(n,e)=>{const c=new WebAssembly.Instance(t,n);e(c)}:this.wasmBinary=t}wasmBinary;instantiateWasm;locateFile}let l=class{loader;api;constructor(){this.loader=(t,n)=>new Promise((e,c)=>{if(this.api!==void 0){e();return}const h=new Xo(t);Vo(h).then(d=>{try{this.writeConfigurationFiles(d,n),fi(d,"MAGICK_CONFIGURE_PATH",k=>{fi(d,"/xml",w=>{d._Environment_SetEnv(k,w),d._Environment_Initialize(),this.api=d,e()})})}catch(k){c(k)}})})}async _initialize(t,n){await this.loader(t,n)}static get _api(){if(!Fe.api)throw new z("`await initializeImageMagick` should be called to initialize the library");return Fe.api}static set _api(t){Fe.api=t}static read(t,n,e,c){return nt._create(h=>{let d=c;if(typeof t!="string"&&!Pn(t))typeof n=="number"&&typeof e=="number"&&h.read(t,n,e);else if(typeof n!="number"&&typeof e!="number"){d=e;let k;n instanceof wt?k=n:typeof n=="string"?(k=new wt,k.format=n):d=n,h.read(t,k)}return d(h)})}static readCollection(t,n,e){return Mt.use(c=>{let h=e,d;return n instanceof wt?d=n:typeof n=="string"?(d=new wt,d.format=n):h=n,c.read(t,d),h(c)})}static readFromCanvas(t,n,e){return nt._create(c=>(c.readFromCanvas(t,e),n(c)))}writeConfigurationFiles(t,n){t.FS.analyzePath("/xml").exists||t.FS.mkdir("/xml");for(const e of n.all()){const c=t.FS.open(`/xml/${e.fileName}`,"w"),h=new TextEncoder().encode(e.data);t.FS.write(c,h,0,h.length),t.FS.close(c)}}};const Fe=new l;async function qo(u,t){await Fe._initialize(u,ki.default)}class Ko{constructor(t,n,e){this.origin=t,this.progress=new st((n+1)/(e*100))}origin;progress;cancel=!1}class lt{static _logDelegate=0;static _onLog;static _progressDelegate=0;static _images={};static setLogDelegate(t){lt._logDelegate===0&&t!==void 0&&(lt._logDelegate=l._api.addFunction(lt.logDelegate,"vii")),l._api._Magick_SetLogDelegate(t===void 0?0:lt._logDelegate),lt._onLog=t}static setProgressDelegate(t){lt._progressDelegate===0&&(this._progressDelegate=l._api.addFunction(lt.progressDelegate,"iijji")),this._images[t._instance]=t,l._api._MagickImage_SetClientData(t._instance,t._instance),l._api._MagickImage_SetProgressDelegate(t._instance,lt._progressDelegate)}static removeProgressDelegate(t){l._api._MagickImage_SetClientData(t._instance,0),l._api._MagickImage_SetProgressDelegate(t._instance,0),delete lt._images[t._instance]}static logDelegate(t,n){if(lt._onLog===void 0)return;const e=pt(n,"");lt._onLog(new Co(t,e))}static progressDelegate(t,n,e,c){const h=lt._images[c];if(h===void 0||h.onProgress===void 0)return 1;const d=Number(n),k=Number(e),w=pt(t),S=new Ko(w,d,k);return h.onProgress(S),S.cancel?0:1}}class Tt{static _allFormats;constructor(t,n,e,c,h,d,k){this.format=t,this.description=n,this.mimeType=e,this.moduleFormat=c,this.supportsMultipleFrames=h,this.supportsReading=d,this.supportsWriting=k}description;format;mimeType;moduleFormat;supportsMultipleFrames;supportsReading;supportsWriting;static get all(){return Tt._allFormats===void 0&&(Tt._allFormats=Tt.loadFormats()),Tt._allFormats}static loadFormats(){return x.usePointer(t=>Rt.use(n=>{const e=l._api._MagickFormatInfo_CreateList(n.ptr,t),c=n.value;try{const h=new Array(c),d=Object.values(dt);for(let k=0;k<c;k++){const w=l._api._MagickFormatInfo_GetInfo(e,k,t),S=pt(l._api._MagickFormatInfo_Format_Get(w)),E=Tt.convertFormat(S,d),C=pt(l._api._MagickFormatInfo_Description_Get(w),""),K=pt(l._api._MagickFormatInfo_MimeType_Get(w)),Q=pt(l._api._MagickFormatInfo_Module_Get(w)),W=Tt.convertFormat(Q,d),V=l._api._MagickFormatInfo_SupportsMultipleFrames_Get(w)==1,ot=l._api._MagickFormatInfo_SupportsReading_Get(w)==1,Ot=l._api._MagickFormatInfo_SupportsWriting_Get(w)==1;h[k]=new Tt(E,C,K,W,V,ot,Ot)}return h}finally{l._api._MagickFormatInfo_DisposeList(e,c)}}))}static convertFormat(t,n){return t===null?dt.Unknown:n.includes(t)?t:dt.Unknown}}const J={None:0,Accelerate:1,Annotate:2,Blob:4,Cache:8,Coder:16,Configure:32,Deprecate:64,Draw:128,Exception:256,Image:512,Locale:1024,Module:2048,Pixel:4096,Policy:8192,Resource:16384,Trace:32768,Transform:65536,User:131072,Wand:262144,Detailed:2147450879,get All(){return this.Detailed|this.Trace}};class Xt{static get delegates(){return pt(l._api._Magick_Delegates_Get(),"Unknown")}static get features(){return pt(l._api._Magick_Features_Get()," ").slice(0,-1)}static get imageMagickVersion(){return pt(l._api._Magick_ImageMagickVersion_Get(),"Unknown")}static get supportedFormats(){return Tt.all}static onLog;static addFont(t,n){const e=l._api.FS;e.analyzePath("/fonts").exists||e.mkdir("/fonts");const c=e.open(`/fonts/${t}`,"w");e.write(c,n,0,n.length),e.close(c)}static resetRandomSeed=()=>l._api._Magick_ResetRandomSeed();static setRandomSeed=t=>l._api._Magick_SetRandomSeed(t);static setLogEvents(t){const n=t==J.None?void 0:Xt.logDelegate;lt.setLogDelegate(n);const e=Xt.getEventTypeString(t);F(e,c=>l._api._Magick_SetLogEvents(c))}static _getFontFileName(t){const n=`/fonts/${t}`;if(!l._api.FS.analyzePath(n).exists)throw`Unable to find a font with the name '${t}', register it with the addFont method of the Magick class.`;return n}static getEventTypeString(t){if(t==J.All)return"All,Trace";if(t==J.Detailed)return"All";switch(t){case J.Accelerate:return"Accelerate";case J.Annotate:return"Annotate";case J.Blob:return"Blob";case J.Cache:return"Cache";case J.Coder:return"Coder";case J.Configure:return"Configure";case J.Deprecate:return"Deprecate";case J.Draw:return"Draw";case J.Exception:return"Exception";case J.Image:return"Image";case J.Locale:return"Locale";case J.Module:return"Module";case J.Pixel:return"Pixel";case J.Policy:return"Policy";case J.Resource:return"Resource";case J.Trace:return"Trace";case J.Transform:return"Transform";case J.User:return"User";case J.Wand:return"Wand";case J.None:default:return"None"}}static logDelegate(t){Xt.onLog!==void 0&&Xt.onLog(t)}}"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(u,t,n){const e=Number(0xffffffffn&t),c=Number(t>>32n);this.setUint32(u+(n?0:4),e,n),this.setUint32(u+(n?4:0),c,n)}});var se=u=>new DataView(new ArrayBuffer(u)),Wt=u=>new Uint8Array(u.buffer||u),re=u=>new TextEncoder().encode(String(u)),qt=u=>Math.min(4294967295,Number(u)),kn=u=>Math.min(65535,Number(u));function Qo(u,t,n){t===void 0||t instanceof Date||(t=new Date(t));const e=u!==void 0;if(n||(n=e?436:509),u instanceof File)return{isFile:e,t:t||new Date(u.lastModified),bytes:u.stream(),mode:n};if(u instanceof Response)return{isFile:e,t:t||new Date(u.headers.get("Last-Modified")||Date.now()),bytes:u.body,mode:n};if(t===void 0)t=new Date;else if(isNaN(t))throw new Error("Invalid modification date.");if(!e)return{isFile:e,t,mode:n};if(typeof u=="string")return{isFile:e,t,bytes:re(u),mode:n};if(u instanceof Blob)return{isFile:e,t,bytes:u.stream(),mode:n};if(u instanceof Uint8Array||u instanceof ReadableStream)return{isFile:e,t,bytes:u,mode:n};if(u instanceof ArrayBuffer||ArrayBuffer.isView(u))return{isFile:e,t,bytes:Wt(u),mode:n};if(Symbol.asyncIterator in u)return{isFile:e,t,bytes:Tn(u[Symbol.asyncIterator]()),mode:n};throw new TypeError("Unsupported input format.")}function Tn(u,t=u){return new ReadableStream({async pull(n){let e=0;for(;n.desiredSize>e;){const c=await u.next();if(!c.value){n.close();break}{const h=Jo(c.value);n.enqueue(h),e+=h.byteLength}}},cancel(n){t.throw?.(n)}})}function Jo(u){return typeof u=="string"?re(u):u instanceof Uint8Array?u:Wt(u)}function Zo(u,t,n){let[e,c]=function(h){return h?h instanceof Uint8Array?[h,1]:ArrayBuffer.isView(h)||h instanceof ArrayBuffer?[Wt(h),1]:[re(h),0]:[void 0,0]}(t);if(u instanceof File)return{i:ai(e||re(u.name)),o:BigInt(u.size),u:c};if(u instanceof Response){const h=u.headers.get("content-disposition"),d=h&&h.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),k=d&&d[1]||u.url&&new URL(u.url).pathname.split("/").findLast(Boolean),w=k&&decodeURIComponent(k),S=n||+u.headers.get("content-length");return{i:ai(e||re(w)),o:BigInt(S),u:c}}return e=ai(e,u!==void 0||n!==void 0),typeof u=="string"?{i:e,o:BigInt(re(u).length),u:c}:u instanceof Blob?{i:e,o:BigInt(u.size),u:c}:u instanceof ArrayBuffer||ArrayBuffer.isView(u)?{i:e,o:BigInt(u.byteLength),u:c}:{i:e,o:tc(u,n),u:c}}function tc(u,t){return t>-1?BigInt(t):u?void 0:0n}function ai(u,t=1){if(!u||u.every(n=>n===47))throw new Error("The file must have a name.");if(t)for(;u[u.length-1]===47;)u=u.subarray(0,-1);else u[u.length-1]!==47&&(u=new Uint8Array([...u,47]));return u}var Fn=new Uint32Array(256);for(let u=0;u<256;++u){let t=u;for(let n=0;n<8;++n)t=t>>>1^(1&t&&3988292384);Fn[u]=t}function wn(u,t=0){t=~t;for(var n=0,e=u.length;n<e;n++)t=t>>>8^Fn[255&t^u[n]];return~t>>>0}function Gn(u,t,n=0){const e=u.getSeconds()>>1|u.getMinutes()<<5|u.getHours()<<11,c=u.getDate()|u.getMonth()+1<<5|u.getFullYear()-1980<<9;t.setUint16(n,e,1),t.setUint16(n+2,c,1)}function ec({i:u,u:t},n){return 8*(!t||(n??function(e){try{ic.decode(e)}catch{return 0}return 1}(u)))}var ic=new TextDecoder("utf8",{fatal:1});function nc(u,t=0){const n=se(30);return n.setUint32(0,1347093252),n.setUint32(4,754976768|t),Gn(u.t,n,10),n.setUint16(26,u.i.length,1),Wt(n)}async function*rc(u){let{bytes:t}=u;if("then"in t&&(t=await t),t instanceof Uint8Array)yield t,u.l=wn(t,0),u.o=BigInt(t.length);else{u.o=0n;const n=t.getReader();for(;;){const{value:e,done:c}=await n.read();if(c)break;u.l=wn(e,u.l),u.o+=BigInt(e.length),yield e}}}function ac(u,t){const n=se(16+(t?8:0));return n.setUint32(0,1347094280),n.setUint32(4,u.isFile?u.l:0,1),t?(n.setBigUint64(8,u.o,1),n.setBigUint64(16,u.o,1)):(n.setUint32(8,qt(u.o),1),n.setUint32(12,qt(u.o),1)),Wt(n)}function sc(u,t,n=0,e=0){const c=se(46);return c.setUint32(0,1347092738),c.setUint32(4,755182848),c.setUint16(8,2048|n),Gn(u.t,c,12),c.setUint32(16,u.isFile?u.l:0,1),c.setUint32(20,qt(u.o),1),c.setUint32(24,qt(u.o),1),c.setUint16(28,u.i.length,1),c.setUint16(30,e,1),c.setUint16(40,u.mode|(u.isFile?32768:16384),1),c.setUint32(42,qt(t),1),Wt(c)}function oc(u,t,n){const e=se(n);return e.setUint16(0,1,1),e.setUint16(2,n-4,1),16&n&&(e.setBigUint64(4,u.o,1),e.setBigUint64(12,u.o,1)),e.setBigUint64(n-8,t,1),Wt(e)}function cc(u){return u instanceof File||u instanceof Response?[[u],[u]]:[[u.input,u.name,u.size],[u.input,u.lastModified,u.mode]]}function si(u,t={}){const n=function(e){const c=e[Symbol.iterator in e?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const h=await c.next();if(h.done)return h;const[d,k]=cc(h.value);return{done:0,value:Object.assign(Qo(...k),Zo(...d))}},throw:c.throw?.bind(c),[Symbol.asyncIterator](){return this}}}(u);return Tn(async function*(e,c){const h=[];let d=0n,k=0n,w=0;for await(const C of e){const K=ec(C,c.buffersAreUTF8);yield nc(C,K),yield new Uint8Array(C.i),C.isFile&&(yield*rc(C));const Q=C.o>=0xffffffffn,W=12*(d>=0xffffffffn)|28*Q;yield ac(C,Q),h.push(sc(C,d,K,W)),h.push(C.i),W&&h.push(oc(C,d,W)),Q&&(d+=8n),k++,d+=BigInt(46+C.i.length)+C.o,w||(w=Q)}let S=0n;for(const C of h)yield C,S+=BigInt(C.length);if(w||d>=0xffffffffn){const C=se(76);C.setUint32(0,1347094022),C.setBigUint64(4,BigInt(44),1),C.setUint32(12,755182848),C.setBigUint64(24,k,1),C.setBigUint64(32,k,1),C.setBigUint64(40,S,1),C.setBigUint64(48,d,1),C.setUint32(56,1347094023),C.setBigUint64(64,d+S,1),C.setUint32(72,1,1),yield Wt(C)}const E=se(22);E.setUint32(0,1347093766),E.setUint16(8,kn(k),1),E.setUint16(10,kn(k),1),E.setUint32(12,qt(S),1),E.setUint32(16,qt(d),1),yield Wt(E)}(n,t),n)}function yn(u,t,n=0,e=u.length){if(e%t)throw new Error("Bad buffer length.");for(let c=n;c<e;c+=t)_c(u,t,c)}function _c(u,t,n){t--;for(let e=0;e<t;e++){let c=u[n+e];u[n+e]=u[n+t],u[n+t]=c,t--}}function lc(u,t=0,n=u.length){let e="";for(let c=t;c<n;){let h=128,d=191,k=!1,w=u[c++];if(w>=0&&w<=127)e+=String.fromCharCode(w);else{let S=0;w>=194&&w<=223?S=1:w>=224&&w<=239?(S=2,u[c]===224&&(h=160),u[c]===237&&(d=159)):w>=240&&w<=244?(S=3,u[c]===240&&(h=144),u[c]===244&&(d=143)):k=!0,w=w&(1<<8-S-1)-1;for(let E=0;E<S;E++)(u[c]<h||u[c]>d)&&(k=!0),w=w<<6|u[c]&63,c++;k?e+="":w<=65535?e+=String.fromCharCode(w):(w-=65536,e+=String.fromCharCode((w>>10&1023)+55296,(w&1023)+56320))}}return e}let hc=class{constructor(t,n=!1,e=!1){this.bits=t,this.bytes=t<8?1:Math.ceil(t/8),this.max=Math.pow(2,t)-1,this.min=0;let c=8-((t-1|7)+1-t);this.lastByteMask_=Math.pow(2,c>0?c:8)-1,this.unpack=this.unpackUnsigned_,n&&(this.max=Math.pow(2,t)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_),e&&(this.overflow_=this.overflowClamp_)}pack(t,n,e=0){if(n!==n||n.constructor!=Number)throw new TypeError;n=this.overflow_(n),t[e]=(n<0?n+Math.pow(2,this.bits):n)&255,e++;for(let c=2,h=this.bytes;c<h;c++)t[e]=Math.floor(n/Math.pow(2,(c-1)*8))&255,e++;return this.bits>8&&(t[e]=Math.floor(n/Math.pow(2,(this.bytes-1)*8))&this.lastByteMask_,e++),e}unpack_(t,n=0){let e=0;for(let c=0;c<this.bytes;c++)e+=t[n+c]*Math.pow(256,c);return e}unpackUnsigned_(t,n=0){return this.overflow_(this.unpack_(t,n))}unpackSigned_(t,n=0){return this.overflow_(this.sign_(this.unpack_(t,n)))}overflow_(t){if(t>this.max||t<this.min)throw new RangeError;return t}overflowClamp_(t){return t>this.max?this.max:t<this.min?this.min:t}sign_(t){return t>this.max&&(t-=this.max*2+2),t}};class oi{constructor(t,n){this.ebits=t,this.fbits=n,this.bias=(1<<t-1)-1,this.numBytes=Math.ceil((t+n)/8),this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=t+n,this.fbias=Math.pow(2,-(8*this.numBytes-1-t))}pack(t,n,e){if(typeof n!="number")throw new TypeError;Math.abs(n)>this.biasP2-this.ebitsFbits*2&&(n=n<0?-1/0:1/0);let c=((n=+n)||1/n)<0||n<0?1:0;n=Math.abs(n);let h=Math.min(Math.floor(Math.log(n)/Math.LN2),1023),d=ci(n/Math.pow(2,h)*Math.pow(2,this.fbits));return n!==n?(d=Math.pow(2,this.fbits-1),h=(1<<this.ebits)-1):n!==0&&(n>=Math.pow(2,1-this.bias)?(d/Math.pow(2,this.fbits)>=2&&(h=h+1,d=1),h>this.bias?(h=(1<<this.ebits)-1,d=0):(h=h+this.bias,d=ci(d)-Math.pow(2,this.fbits))):(d=ci(n/Math.pow(2,1-this.bias-this.fbits)),h=0)),this.packFloatBits_(t,e,c,h,d)}unpack(t,n){let e=(1<<this.ebits)-1,c,h="";for(let w=this.numBytes-1;w>=0;w--){let S=t[w+n].toString(2);h+="00000000".substring(S.length)+S}let d=h.charAt(0)=="1"?-1:1;h=h.substring(1);let k=parseInt(h.substring(0,this.ebits),2);return h=h.substring(this.ebits),k==e?parseInt(h,2)!==0?NaN:d*(1/0):(k===0?(k+=1,c=parseInt(h,2)):c=parseInt("1"+h,2),d*c*this.fbias*Math.pow(2,k-this.bias))}packFloatBits_(t,n,e,c,h){let d=[];d.push(e);for(let C=this.ebits;C>0;C-=1)d[C]=c%2?1:0,c=Math.floor(c/2);let k=d.length;for(let C=this.fbits;C>0;C-=1)d[k+C]=h%2?1:0,h=Math.floor(h/2);let w=d.join(""),S=this.numBytes+n-1,E=n;for(;S>=n;)t[S]=parseInt(w.substring(0,8),2),w=w.substring(8),S--,E++;return E}}function ci(u){let t=Math.floor(u),n=u-t;return n<.5?t:n>.5||t%2?t+1:t}function _i(u,t=0,n=u.length){return lc(u,t,n)}function gc(u,t,n,e=0,c=u.length,h=!1,d=!1){t=t||{};let k=fc(t.bits,t.fp,t.signed,d),w=Math.ceil(t.bits/8);c=dc(u,e,c,w,h);let S=0,E=e;try{for(t.be&&yn(u,w,e,c);E<c;E+=w,S++)n[S]=k.unpack(u,E);t.be&&yn(u,w,e,c)}catch(C){pc(C,u.slice(E,E+w),E)}}function uc(u,t,n=0,e=u.length,c=!1,h=!1){let d=[];return gc(u,t,d,n,e,c,h),d}function Mn(u,t,n=0,e=!1){return uc(u,t,n,n+Math.ceil(t.bits/8),!0,e)[0]}function pc(u,t,n){throw u.message=u.constructor.name+" at index "+n+": "+t,u}function dc(u,t,n,e,c){let h=(n-t)%e;if(c&&(h||u.length<e))throw new Error("Bad buffer length");return n-h}function fc(u,t,n,e){return t?mc(u):kc(u),t&&u===16?new oi(5,11):t&&u==32?new oi(8,23):t&&u==64?new oi(11,52):new hc(u,n,e)}const Rn="Unsupported type";function mc(u){if(!u||u!==16&&u!==32&&u!==64)throw new Error(Rn+": float, bits: "+u)}function kc(u){if(!u||u<1||u>53)throw new Error(Rn+": int, bits: "+u)}class wc{constructor(){this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1,signed:!1,fp:!1},this.supported_containers=["RIFF","RIFX"]}setSignature(t){if(this.head=0,this.container=this.readString(t,4),this.supported_containers.indexOf(this.container)===-1)throw Error("Not a supported format.");this.uInt32.be=this.container==="RIFX",this.chunkSize=this.readUInt32(t),this.format=this.readString(t,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(t),chunkData:{start:0,end:this.chunkSize}}}findChunk(t,n=!1){let e=this.signature.subChunks,c=[];for(let h=0;h<e.length;h++)if(e[h].chunkId==t)if(n)c.push(e[h]);else return e[h];return t=="LIST"&&c.length?c:null}readString(t,n){let e="";return e=_i(t,this.head,this.head+n),this.head+=n,e}readUInt32(t){let n=Mn(t,this.uInt32,this.head);return this.head+=4,n}getSubChunksIndex_(t){let n=[],e=this.head;for(;e<=t.length-8;)n.push(this.getSubChunkIndex_(t,e)),e+=8+n[n.length-1].chunkSize,e=e%2?e+1:e;return n}getSubChunkIndex_(t,n){let e={chunkId:this.getChunkId_(t,n),chunkSize:this.getChunkSize_(t,n)};if(e.chunkId=="LIST")e.format=_i(t,n+8,n+12),this.head+=4,e.subChunks=this.getSubChunksIndex_(t);else{let c=e.chunkSize%2?e.chunkSize+1:e.chunkSize;this.head=n+8+c,e.chunkData={start:n+8,end:this.head}}return e}getChunkId_(t,n){return this.head+=4,_i(t,n,n+4)}getChunkSize_(t,n){return this.head+=4,Mn(t,this.uInt32,n+4)}}function yc(u,t,n=0,e=u.length){for(let c=n;c<e;c+=t)Mc(u,t,c)}function Mc(u,t,n){t--;for(let e=0;e<t;e++){let c=u[n+e];u[n+e]=u[n+t],u[n+t]=c,t--}}function vc(u,t=0,n=u.length){let e="";for(let c=t;c<n;){let h=128,d=191,k=!1,w=u[c++];if(w>=0&&w<=127)e+=String.fromCharCode(w);else{let S=0;w>=194&&w<=223?S=1:w>=224&&w<=239?(S=2,u[c]===224&&(h=160),u[c]===237&&(d=159)):w>=240&&w<=244?(S=3,u[c]===240&&(h=144),u[c]===244&&(d=143)):k=!0,w=w&(1<<8-S-1)-1;for(let E=0;E<S;E++)(u[c]<h||u[c]>d)&&(k=!0),w=w<<6|u[c]&63,c++;k?e+="":w<=65535?e+=String.fromCharCode(w):(w-=65536,e+=String.fromCharCode((w>>10&1023)+55296,(w&1023)+56320))}}return e}class Sc{constructor(t,n=!1,e=!1){this.bits=t,this.offset=Math.ceil(t/8),this.max=Math.pow(2,t)-1,this.min=0,this.unpack=this.unpack_,n&&(this.max=Math.pow(2,t)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_),e&&(this.overflow_=this.clamp_)}pack(t,n,e=0){if(typeof n!="number"||!isFinite(n)||Math.floor(n)!==n)throw new TypeError;n=this.overflow_(n);for(let c=0,h=this.offset;c<h;c++)t[e]=Math.floor(n/Math.pow(2,c*8))&255,e++;return e}unpack_(t,n=0){let e=0;for(let c=0;c<this.offset;c++)e+=t[n+c]*Math.pow(256,c);return e}unpackSigned_(t,n=0){return this.sign_(this.unpack_(t,n))}overflow_(t){if(t>this.max||t<this.min)throw new RangeError;return t}clamp_(t){return t>this.max?this.max:t<this.min?this.min:t}sign_(t){return t>this.max&&(t-=this.max*2+2),t}}class li{constructor(t,n){this.offset=Math.ceil((t+n)/8),this.ebits=t,this.fbits=n,this.bias=(1<<t-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=t+n,this.fbias=Math.pow(2,-(8*this.offset-1-t))}pack(t,n,e){if(typeof n!="number")throw new TypeError;Math.abs(n)>this.biasP2-this.ebitsFbits*2&&(n=n<0?-1/0:1/0);let c=((n=+n)||1/n)<0||n<0?1:0;n=Math.abs(n);let h=Math.min(Math.floor(Math.log(n)/Math.LN2),1023),d=hi(n/Math.pow(2,h)*Math.pow(2,this.fbits));return n!==n?(d=Math.pow(2,this.fbits-1),h=(1<<this.ebits)-1):n!==0&&(n>=Math.pow(2,1-this.bias)?(d/Math.pow(2,this.fbits)>=2&&(h=h+1,d=1),h>this.bias?(h=(1<<this.ebits)-1,d=0):(h=h+this.bias,d=hi(d)-Math.pow(2,this.fbits))):(d=hi(n/Math.pow(2,1-this.bias-this.fbits)),h=0)),this.packFloatBits_(t,e,c,h,d)}unpack(t,n){let e=(1<<this.ebits)-1,c,h="";for(let w=this.offset-1;w>=0;w--){let S=t[w+n].toString(2);h+="00000000".substring(S.length)+S}let d=h.charAt(0)=="1"?-1:1;h=h.substring(1);let k=parseInt(h.substring(0,this.ebits),2);return h=h.substring(this.ebits),k==e?parseInt(h,2)!==0?NaN:d*(1/0):(k===0?(k+=1,c=parseInt(h,2)):c=parseInt("1"+h,2),d*c*this.fbias*Math.pow(2,k-this.bias))}packFloatBits_(t,n,e,c,h){let d=[];d.push(e);for(let C=this.ebits;C>0;C-=1)d[C]=c%2?1:0,c=Math.floor(c/2);let k=d.length;for(let C=this.fbits;C>0;C-=1)d[k+C]=h%2?1:0,h=Math.floor(h/2);let w=d.join(""),S=this.offset+n-1,E=n;for(;S>=n;)t[S]=parseInt(w.substring(0,8),2),w=w.substring(8),S--,E++;return E}}function hi(u){let t=Math.floor(u),n=u-t;return n<.5?t:n>.5||t%2?t+1:t}function vn(u,t=0,n=u.length){return vc(u,t,n)}function Ic(u,t,n,e=0,c=u.length,h=!1){t=t||{};let d=bc(t.bits,t.fp,t.signed,!1);if(c=Pc(u,e,c,d.offset,h),t.be){let k=Cc(u);t.be&&yc(k,d.offset,e,c),Sn(k,n,e,c,d)}else Sn(u,n,e,c,d)}function gi(u,t,n=0,e=u.length,c=!1){let h=[];return Ic(u,t,h,n,e,c),h}function Sn(u,t,n,e,c){let h=c.offset;for(let d=0,k=n;k<e;k+=h,d++)t[d]=c.unpack(u,k)}function Cc(u){return u.constructor===Array?u.slice():new Uint8Array(u)}function Pc(u,t,n,e,c){let h=(n-t)%e;if(c&&(h||u.length<e))throw new Error("Bad buffer length");return n-h}function bc(u,t,n,e){return t?Dc(u):Ec(u),t&&u===16?new li(5,11):t&&u==32?new li(8,23):t&&u==64?new li(11,52):new Sc(u,n,e)}const Wn="Unsupported type";function Dc(u){if(!u||u!==16&&u!==32&&u!==64)throw new Error(Wn+": float, bits: "+u)}function Ec(u){if(!u||u<1||u>53)throw new Error(Wn+": int, bits: "+u)}const ui={bits:32,be:!1,signed:!1,fp:!1};function xc(u){const t=new wc;t.setSignature(u);const n=t.signature;if(n.format!=="ACON")throw new Error(`Expected format. Expected "ACON", got "${n.format}"`);function e(W,V){const ot=t.findChunk(W);return ot==null?null:V(ot)}function c(W,V){return W.subChunks.slice(0,V).map(ot=>{if(ot.chunkId!=="icon")throw new Error(`Unexpected chunk type in fram: ${ot.chunkId}`);return u.slice(ot.chunkData.start,ot.chunkData.end)})}const h=e("anih",W=>{const V=gi(u,ui,W.chunkData.start,W.chunkData.end);return{cbSize:V[0],nFrames:V[1],nSteps:V[2],iWidth:V[3],iHeight:V[4],iBitCount:V[5],nPlanes:V[6],iDispRate:V[7],bfAttributes:V[8]}});if(h==null)throw new Error("Did not find anih");const d=e("rate",W=>gi(u,ui,W.chunkData.start,W.chunkData.end)),k=e("seq ",W=>gi(u,ui,W.chunkData.start,W.chunkData.end)),w=t.findChunk("LIST",!0),S=w?.find(W=>W.format==="fram");if(S==null)throw new Error("Did not find fram LIST");let E=c(S,h.nFrames),C=null,K=null;const Q=w?.find(W=>W.format==="INFO");return Q?.subChunks.forEach(W=>{switch(W.chunkId){case"INAM":C=vn(u,W.chunkData.start,W.chunkData.end);break;case"IART":K=vn(u,W.chunkData.start,W.chunkData.end);break;case"LIST":W.format==="fram"&&(E=c(W,h.nFrames));break}}),{images:E,rate:d,seq:k,metadata:h,artist:K,title:C}}var Ac="/_app/immutable/workers/assets/vert_wasm_bg-DFM5P2x-.wasm",Tc=async(u={},t)=>{let n;if(t.startsWith("data:")){const e=t.replace(/^data:.*?base64,/,"");let c;if(typeof Buffer=="function"&&typeof Buffer.from=="function")c=Buffer.from(e,"base64");else if(typeof atob=="function"){const h=atob(e);c=new Uint8Array(h.length);for(let d=0;d<h.length;d++)c[d]=h.charCodeAt(d)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(c,u)}else{const e=await fetch(t),c=e.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&c.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(e,u);else{const h=await e.arrayBuffer();n=await WebAssembly.instantiate(h,u)}}return n.instance.exports};let Lt;function Fc(u){Lt=u}const Gc=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let Bn=new Gc("utf-8",{ignoreBOM:!0,fatal:!0});Bn.decode();let Ae=null;function Pi(){return(Ae===null||Ae.byteLength===0)&&(Ae=new Uint8Array(Lt.memory.buffer)),Ae}function Rc(u,t){return u=u>>>0,Bn.decode(Pi().subarray(u,u+t))}function Wc(u,t){return u=u>>>0,Pi().subarray(u/1,u/1+t)}let Ln=0;function Bc(u,t){const n=t(u.length*1,1)>>>0;return Pi().set(u,n/1),Ln=u.length,n}function In(u){const t=Lt.__wbindgen_export_0.get(u);return Lt.__externref_table_dealloc(u),t}function Lc(u){const t=Bc(u,Lt.__wbindgen_malloc),n=Ln,e=Lt.parseIcns(t,n);if(e[2])throw In(e[1]);return In(e[0])}function Oc(){return[]}function $c(u,t){u.push(t)}function Uc(){const u=Lt.__wbindgen_export_0,t=u.grow(4);u.set(0,void 0),u.set(t+0,void 0),u.set(t+1,null),u.set(t+2,!0),u.set(t+3,!1)}function zc(u,t){return Rc(u,t)}function Nc(u,t){var n=Wc(u,t).slice();return Lt.__wbindgen_free(u,t*1,1),n}URL=globalThis.URL;const Kt=await Tc({"./vert_wasm_bg.js":{__wbindgen_string_new:zc,__wbindgen_array_new:Oc,__wbindgen_array_push:$c,__wbindgen_uint8_array_new:Nc,__wbindgen_init_externref_table:Uc}},Ac),Hc=Kt.memory,jc=Kt.parseIcns,Yc=Kt.__wbindgen_export_0,Vc=Kt.__wbindgen_free,Xc=Kt.__wbindgen_malloc,qc=Kt.__externref_table_dealloc,On=Kt.__wbindgen_start;var Kc=Object.freeze({__proto__:null,__externref_table_dealloc:qc,__wbindgen_export_0:Yc,__wbindgen_free:Vc,__wbindgen_malloc:Xc,__wbindgen_start:On,memory:Hc,parseIcns:jc});Fc(Kc);On();let Cn=!1;self.postMessage({type:"ready",id:"0"});const Qc=async u=>{switch(u.type){case"load":try{if(!u.wasm||!(u.wasm instanceof ArrayBuffer))throw new Error(`Invalid WASM data: ${typeof u.wasm}`);const t=new Uint8Array(u.wasm);return await qo(t),Cn=!0,{type:"loaded"}}catch(t){return{type:"error",error:`error loading magick-wasm: ${t.message}`}}case"convert":{if(!Cn)return{type:"error",error:"magick-wasm not initialized"};const t=u.compression??void 0,n=u.keepMetadata??!0;u.to.startsWith(".")||(u.to=`.${u.to}`),u.to=u.to.toLowerCase(),u.to===".jfif"&&(u.to=".jpeg");let e=u.input.from;e===".jfif"&&(e=".jpeg"),e===".fit"&&(e=".fits");const c=await u.input.file.arrayBuffer();if(e===".ico"){const k=Mt.create();for(;;)try{const C=nt.create(new Uint8Array(c),new wt({format:dt.Ico,frameIndex:k.length}));k.push(C)}catch{break}if(k.length===0)return{type:"error",error:"Failed to read ICO -- no images found inside?"};const w=[];await Promise.all(k.map(async(C,K)=>{const Q=await Te(C,u.to,n,t);w[K]=Q}));const S=si(w.map((C,K)=>new File([new Uint8Array(C)],`image${K}.${u.to.slice(1)}`)),"images.zip"),E=await pi(S.getReader());return k.dispose(),{type:"finished",output:E,zip:!0}}else if(e===".ani"){console.log("Parsing ANI file");try{const k=xc(new Uint8Array(c)),w=[];await Promise.all(k.images.map(async(C,K)=>{const Q=await Te(nt.create(C,new wt({format:dt.Ico})),u.to,n,t);w.push(new File([new Uint8Array(Q)],`image${K}${u.to}`))}));const S=si(w,"images.zip");return{type:"finished",output:await pi(S.getReader()),zip:!0}}catch(k){console.error(k)}}else if(e===".icns"){const k=Lc(new Uint8Array(c));if(typeof k=="string")return{type:"error",error:`Failed to read ICNS -- ${k}`};const w=[dt.Png,dt.Jpeg,dt.Rgba,dt.Rgb],S=[];for(const K of k)for(const Q of w)try{const W=nt.create(K,new wt({format:Q})),V=await Te(W,u.to,n,t);S.push(V);break}catch{continue}const E=si(S.map((K,Q)=>new File([new Uint8Array(K)],`image${Q}.${u.to.slice(1)}`)),"images.zip");return{type:"finished",output:await pi(E.getReader()),zip:!0}}if((e===".webp"||e===".gif")&&(u.to===".gif"||u.to===".webp")){const k=Mt.create(new Uint8Array(c)),w=u.to===".gif"?dt.Gif:dt.WebP,S=await new Promise(E=>{k.write(w,C=>{E(structuredClone(C))})});return k.dispose(),{type:"finished",output:S}}const h=nt.create(new Uint8Array(c),new wt({format:e.slice(1).toUpperCase()}));return{type:"finished",output:await Te(h,u.to,n,t)}}default:return{type:"error",error:`Unknown message type: ${u.type}`}}},pi=async u=>{const t=[];let n=!1;for(;!n;){const{value:h,done:d}=await u.read();h&&t.push(h),n=d}const c=await new Blob(t.map(h=>new Uint8Array(h)),{type:"application/zip"}).arrayBuffer();return new Uint8Array(c)},Te=async(u,t,n,e)=>{let c=t.slice(1).toUpperCase();if(c==="JFIF"&&(c="JPEG"),c==="ICO"){const k=u.width,w=u.height;if(k>256||w>256){const S=256/Math.max(k,w),E=Math.max(1,Math.round(k*S)),C=Math.max(1,Math.round(w*S));u.resize(E,C)}}return await new Promise((d,k)=>{try{e&&(u.quality=e),n||u.strip(),u.write(c,w=>{d(structuredClone(w))})}catch(w){k(w)}})};onmessage=async u=>{const t=u.data;try{const n=await Qc(t);if(!n)return;postMessage({...n,id:t.id})}catch(n){postMessage({type:"error",error:n,id:t.id})}};
